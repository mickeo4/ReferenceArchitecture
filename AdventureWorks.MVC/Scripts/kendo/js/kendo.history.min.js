/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){var n=window.kendo,r=window.location,i=window.history,s=50,o=/^#*/,u=window.document.documentMode,a=n.support.browser.msie&&(!u||u<=8),f="onhashchange"in window&&!a,l=window.document,c=n.Observable.extend({start:function(e){e=e||{};var t=this;t._pushStateRequested=!!e.pushState,t._pushState=t._pushStateRequested&&t._pushStateSupported(),t.root=e.root||"/",t._interval=0,this.bind(["change","ready"],e);if(t._normalizeUrl())return!0;t.current=t._currentLocation(),t._listenToLocationChange(),t.trigger("ready",{url:t.current})},stop:function(){e(window).unbind(".kendo"),this.unbind("change"),this.unbind("ready"),clearInterval(this._interval)},_normalizeUrl:function(){var e=this,t,n=e.root==r.pathname,s=e._pushStateRequested&&!e._pushStateSupported()&&!n,u=e._pushState&&n&&r.hash;return s?(r.replace(e.root+"#"+e._stripRoot(r.pathname)),!0):u?(t=e._makePushStateUrl(r.hash.replace(o,"")),i.replaceState({},l.title,t),!1):!1},_listenToLocationChange:function(){var t=this,n=e.proxy(t._checkUrl,t);this._pushState?e(window).bind("popstate.kendo",n):f?e(window).bind("hashchange.kendo",n):t._interval=setInterval(n,s)},_pushStateSupported:function(){return window.history&&window.history.pushState},_checkUrl:function(e){var t=this,n=t._currentLocation();n!=t.current&&t.navigate(n)},_stripRoot:function(e){var t=this;return e.indexOf(t.root)===0?("/"+e.substr(t.root.length)).replace(/\/\//g,"/"):e},_makePushStateUrl:function(e){var t=this;return e.indexOf(t.root)!==0&&(e=(t.root+e).replace(/\/\//g,"/")),r.protocol+"//"+r.host+e},_currentLocation:function(){var e=this,t;return e._pushState?(t=r.pathname,r.search&&(t+=r.search),e._stripRoot(t)):r.hash.replace(o,"")},change:function(e){this.bind("change",e)},navigate:function(e,t){var n=this;if(e==="#:back"){i.back();return}e=e.replace(o,"");if(n.current===e||n.current===decodeURIComponent(e))return;n._pushState?(i.pushState({},l.title,n._makePushStateUrl(e)),n.current=e):r.hash=n.current=e,t||n.trigger("change",{url:n.current})}});n.history=new c})(jQuery);