/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function N(e){return f.test(e)}function C(e){return a.test(e)}function k(e){return!N(e)&&!C(e)}function L(t,n){return function(r,i){var s=e(r).data(w);if(arguments.length==1)return s[t];s[t]=i;if(n){var o=this.element.data("kendoSplitter");o.trigger(d)}}}function _(e){var t=this,r=e.orientation;t.owner=e,t._element=e.element,t.orientation=r,s(t,r===m?M:O),t._resizable=new n.ui.Resizable(e.element,{orientation:r,handle:".k-splitbar-draggable-"+r+"[data-marker="+e._marker+"]",hint:o(t._createHint,t),start:o(t._start,t),max:o(t._max,t),min:o(t._min,t),invalidClass:"k-restricted-size-"+r,resizeend:o(t._stop,t)})}var n=window.kendo,r=n.ui,i=n.keys,s=e.extend,o=e.proxy,u=r.Widget,a=/^\d+(\.\d+)?px$/i,f=/^\d+(\.\d+)?%$/i,l=".kendoSplitter",c="expand",h="collapse",p="contentLoad",d="resize",v="layoutChange",m="horizontal",g="vertical",y="mouseenter",b="click",w="pane",E="mouseleave",S="k-state-focused",x="k-"+w,T="."+x,A=u.extend({init:function(t,r){var s=this,a;u.fn.init.call(s,t,r),s.wrapper=s.element,a=s.options.orientation.toLowerCase()!=g,s.orientation=a?m:g,s._dimension=a?"width":"height",s._keys={decrease:a?i.LEFT:i.UP,increase:a?i.RIGHT:i.DOWN},s._resizeStep=10,s.bind(d,o(s._resize,s)),s._marker=n.guid().substring(0,8),s._initPanes(),s._resizeHandler=function(){s.trigger(d)},s._attachEvents(),e(window).on("resize",s._resizeHandler),s.resizing=new _(s),s.element.triggerHandler("init.kendoSplitter")},events:[c,h,p,d,v],_attachEvents:function(){var t=this,n=t.options.orientation,r=".k-splitbar-"+n,i=".k-splitbar-draggable-"+n,s=".k-splitbar .k-icon:not(.k-resize-handle)";t.element.on("keydown"+l,r,o(t._keydown,t)).on("mousedown"+l,r,function(e){e.currentTarget.focus()}).on("focus"+l,r,function(t){e(t.currentTarget).addClass(S)}).on("blur"+l,r,function(n){e(n.currentTarget).removeClass(S),t.resizing.end()}).on(y+l,i,function(){e(this).addClass("k-splitbar-"+t.orientation+"-hover")}).on(E+l,i,function(){e(this).removeClass("k-splitbar-"+t.orientation+"-hover")}).on("mousedown"+l,i,function(){t.resizing.end(),t._panes().append("<div class='k-splitter-overlay k-overlay' />")}).on("mouseup"+l,i,function(){t._panes().children(".k-splitter-overlay").remove()}).on(y+l,s,function(){e(this).addClass("k-state-hover")}).on(E+l,s,function(){e(this).removeClass("k-state-hover")}).on(b+l,".k-splitbar .k-collapse-next, .k-splitbar .k-collapse-prev",t._arrowClick(h)).on(b+l,".k-splitbar .k-expand-next, .k-splitbar .k-expand-prev",t._arrowClick(c)).on("dblclick"+l,".k-splitbar",o(t._togglePane,t)).parent().closest(".k-splitter").each(function(){var n=e(this),r=n.data("kendoSplitter");r?r.bind(d,t._resizeHandler):n.one("init"+l,function(){e(this).data("kendoSplitter").bind(d,t._resizeHandler),t._resizeHandler()})})},options:{name:"Splitter",orientation:m},destroy:function(){var t=this;u.fn.destroy.call(t),t.element.off(l),t.resizing.destroy(),e(window).off("resize",t._resizeHandler),n.destroy(t.element)},_keydown:function(t){var n=this,r=t.keyCode,s=n.resizing,o=e(t.currentTarget),u=n._keys,a=r===u.increase,f=r===u.decrease,l;a||f?(t.ctrlKey?(l=o[f?"next":"prev"](),s.isResizing()&&s.end(),l[n._dimension]()?n._triggerAction(h,o[f?"prev":"next"]()):n._triggerAction(c,l)):s.move((f?-1:1)*n._resizeStep,o),t.preventDefault()):r===i.ENTER&&(s.end(),t.preventDefault())},_initPanes:function(){var t=this,n=t.options.panes||[];t.element.addClass("k-widget").addClass("k-splitter").children().each(function(r,i){var s=n&&n[r];i=e(i).attr("role","group").addClass(x),i.data(w,s?s:{}).toggleClass("k-scrollable",s?s.scrollable!==!1:!0),t.ajaxRequest(i)}).end(),t.trigger(d)},ajaxRequest:function(t,r,i){t=e(t);var s=this,o=t.data(w);r=r||o.contentUrl,r&&(t.append("<span class='k-icon k-loading k-pane-loading' />"),n.isLocalUrl(r)?e.ajax({url:r,data:i||{},type:"GET",dataType:"html",success:function(e){t.html(e),s.trigger(p,{pane:t[0]})}}):t.removeClass("k-scrollable").html("<iframe src='"+r+"' frameborder='0' class='k-content-frame'>"+"This page requires frames in order to show content"+"</iframe>"))},_triggerAction:function(e,t){this.trigger(e,{pane:t[0]})||this[e](t[0])},_togglePane:function(t){var n=this,r=e(t.target),i;if(r.closest(".k-splitter")[0]!=n.element[0])return;i=r.children(".k-icon:not(.k-resize-handle)");if(i.length!==1)return;i.is(".k-collapse-prev")?n._triggerAction(h,r.prev()):i.is(".k-collapse-next")?n._triggerAction(h,r.next()):i.is(".k-expand-prev")?n._triggerAction(c,r.prev()):i.is(".k-expand-next")&&n._triggerAction(c,r.next())},_arrowClick:function(t){var n=this;return function(r){var i=e(r.target),s;if(i.closest(".k-splitter")[0]!=n.element[0])return;i.is(".k-"+t+"-prev")?s=i.parent().prev():s=i.parent().next(),n._triggerAction(t,s)}},_updateSplitBar:function(e,t,n){var r=function(e,t){return t?"<div class='k-icon "+e+"' />":""},i=this.orientation,s=t.resizable!==!1&&n.resizable!==!1,o=t.collapsible,u=t.collapsed,a=n.collapsible,f=n.collapsed;e.addClass("k-splitbar k-state-default k-splitbar-"+i).attr("role","separator").attr("aria-expanded",!u&&!f).removeClass("k-splitbar-"+i+"-hover").toggleClass("k-splitbar-draggable-"+i,s&&!u&&!f).toggleClass("k-splitbar-static-"+i,!s&&!o&&!a).html(r("k-collapse-prev",o&&!u&&!f)+r("k-expand-prev",o&&u&&!f)+r("k-resize-handle",s)+r("k-collapse-next",a&&!f&&!u)+r("k-expand-next",a&&f&&!u))},_updateSplitBars:function(){var t=this;this.element.children(".k-splitbar").each(function(){var n=e(this),r=n.prev(T).data(w),i=n.next(T).data(w);if(!i)return;t._updateSplitBar(n,r,i)})},_panes:function(){return this.element.children(T)},_resize:function(){var t=this,n=t.element,r=n.children(":not(.k-splitbar)"),i=t.orientation==m,s=n.children(".k-splitbar"),o=s.length,u=i?"width":"height",a=n[u]();o===0?(o=r.length-1,r.slice(0,o).after("<div tabindex='0' class='k-splitbar' data-marker='"+t._marker+"' />"),t._updateSplitBars(),s=n.children(".k-splitbar")):t._updateSplitBars(),s.each(function(){a-=this[i?"offsetWidth":"offsetHeight"]});var f=0,l=0,c=e();r.css({position:"absolute",top:0})[u](function(){var t=e(this).data(w)||{},n;if(t.collapsed)n=0,e(this).css("overflow","hidden");else{if(k(t.size)){c=c.add(this);return}n=parseInt(t.size,10),N(t.size)&&(n=Math.floor(n*a/100))}return l++,f+=n,n}),a-=f;var h=c.length,p=Math.floor(a/h);c.slice(0,h-1).css(u,p).end().eq(h-1).css(u,a-(h-1)*p);var d=0,g=i?"height":"width",y=i?"left":"top",b=i?"offsetWidth":"offsetHeight";if(h===0){var E=r.filter(function(){return!(e(this).data(w)||{}).collapsed}).last();E[u](a+E[0][b])}n.children().css(g,n[g]()).each(function(e,t){t.style[y]=Math.floor(d)+"px",d+=t[b]}),t.trigger(v)},toggle:function(n,r){var i;n=e(n),i=n.data(w);if(!r&&!i.collapsible)return;arguments.length==1&&(r=i.collapsed===t?!1:i.collapsed),i.collapsed=!r,i.collapsed?n.css("overflow","hidden"):n.css("overflow",""),this.trigger(d),this.resizing.destroy(),this.resizing=new _(this)},collapse:function(e){this.toggle(e,!1)},expand:function(e){this.toggle(e,!0)},size:L("size",!0),min:L("min"),max:L("max")});r.plugin(A);var O={sizingProperty:"height",sizingDomProperty:"offsetHeight",alternateSizingProperty:"width",positioningProperty:"top",mousePositioningProperty:"pageY"},M={sizingProperty:"width",sizingDomProperty:"offsetWidth",alternateSizingProperty:"height",positioningProperty:"left",mousePositioningProperty:"pageX"};_.prototype={press:function(e){this._resizable.press(e)},move:function(e,t){this._resizable.target||this._resizable.press(t),this._resizable.move(e)},end:function(){this._resizable.end()},destroy:function(){this._resizable.destroy()},isResizing:function(){return this._resizable.resizing},_createHint:function(t){var n=this;return e("<div class='k-ghost-splitbar k-ghost-splitbar-"+n.orientation+" k-state-default' />").css(n.alternateSizingProperty,t[n.alternateSizingProperty]())},_start:function(t){var n=this,r=e(t.currentTarget),i=r.prev(),s=r.next(),o=i.data(w),u=s.data(w),a=parseInt(i[0].style[n.positioningProperty],10),f=parseInt(s[0].style[n.positioningProperty],10)+s[0][n.sizingDomProperty]-r[0][n.sizingDomProperty],l=n._element.css(n.sizingProperty),c=function(e){var t=parseInt(e,10);return(C(e)?t:l*t/100)||0},h=c(o.min),p=c(o.max)||f-a,d=c(u.min),v=c(u.max)||f-a;n.previousPane=i,n.nextPane=s,n._maxPosition=Math.min(f-d,a+p),n._minPosition=Math.max(a+h,f-v)},_max:function(e){return this._maxPosition},_min:function(e){return this._minPosition},_stop:function(t){var r=this,i=e(t.currentTarget),s=r.owner;s._panes().children(".k-splitter-overlay").remove();if(t.keyCode!==n.keys.ESC){var o=t.position,u=i.prev(),a=i.next(),f=u.data(w),l=a.data(w),c=o-parseInt(u[0].style[r.positioningProperty],10),h=parseInt(a[0].style[r.positioningProperty],10)+a[0][r.sizingDomProperty]-o-i[0][r.sizingDomProperty],p=r._element.children(T).filter(function(){return k(e(this).data(w).size)}).length;if(!k(f.size)||p>1)k(f.size)&&p--,f.size=c+"px";if(!k(l.size)||p>1)l.size=h+"px";s.trigger(d)}return setTimeout(function(){r.press(i)}),!1}}})(jQuery);