/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function p(e,t,n){return Math.max(t,Math.min(n,e))}var n=window.kendo,r=n.mobile.ui,i=r.Widget,s=n.support,o="change",u="km-switch-on",a="km-switch-off",f="margin-left",l="km-state-active",c=s.transitions.css+"transform",h=e.proxy,d=i.extend({init:function(e,t){var r=this,s,o,u;i.fn.init.call(r,e,t),r._wrapper(),r._drag(),r._background(),r._handle(),e=r.element[0],e.type="checkbox",s=r.wrapper.width(),u=r.handle.outerWidth(!0),r.constrain=s-u,r.snapPoint=s/2-u/2,r._animateBackground=!0,o=r.options.checked,o===null&&(o=e.checked),r.check(o),n.notify(r,n.mobile.ui)},events:[o],options:{name:"Switch",onLabel:"ON",offLabel:"OFF",checked:null},check:function(e){var n=this,r=n.element[0];if(e===t)return r.checked;n._position(e?n.constrain:0),r.checked=e,n.wrapper.toggleClass(u,e).toggleClass(a,!e)},destroy:function(){i.fn.destroy.call(this),this.userEvents.destroy()},toggle:function(){var e=this;e.check(!e.element[0].checked)},_move:function(e){var t=this;e.preventDefault(),t._position(p(t.position+e.x.delta,0,t.constrain))},_position:function(e){var t=this;t.position=e,t.handle.css(c,"translatex("+e+"px)"),t._animateBackground&&t.background.css(f,t.origin+e)},_start:function(e){this.userEvents.capture(),this.handle.addClass(l)},_stop:function(e){var t=this;t.handle.removeClass(l),t._toggle(t.position>t.snapPoint)},_toggle:function(e){var t=this,n=t.handle,r=t.element[0],i=r.checked,s=200,f;t.wrapper.toggleClass(u,e).toggleClass(a,!e),t.position=f=e*t.constrain,t._animateBackground&&t.background.kendoStop(!0,!0).kendoAnimate({effects:"slideMargin",offset:f,reset:!0,reverse:!e,axis:"left",duration:s,ease:"linear"}),n.kendoStop(!0,!0).kendoAnimate({effects:"slideTo",duration:s,offset:f+"px,0",reset:!0,complete:function(){i!==e&&(r.checked=e,t.trigger(o,{checked:e}))}})},_background:function(){var t=this,n;n=e("<span class='km-switch-wrapper'><span class='km-switch-background'></span></span>").appendTo(t.wrapper).children(".km-switch-background"),t.origin=parseInt(n.css(f),10),n.data("origin",t.origin),t.background=n},_handle:function(){var t=this,n=t.options;t.handle=e("<span class='km-switch-container'><span class='km-switch-handle' /></span>").appendTo(t.wrapper).children(".km-switch-handle"),t.handle.append('<span class="km-switch-label-on">'+n.onLabel+'</span><span class="km-switch-label-off">'+n.offLabel+"</span>")},_wrapper:function(){var e=this,t=e.element,n=t.parent("span.km-switch");n[0]||(n=t.wrap('<span class="km-switch"/>').parent()),e.wrapper=n},_drag:function(){var e=this;e.userEvents=new n.UserEvents(e.wrapper,{tap:function(){e._toggle(!e.element[0].checked)},start:h(e._start,e),move:h(e._move,e),end:h(e._stop,e)})}});r.plugin(d)})(jQuery);