/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function q(t,n){return t===n||e.contains(t,n)}var n=window.kendo,r=n.ui,i=r.Widget,s=n.support,o=s.touch,u=n.getOffset,a=n.support.browser,f=a.msie&&a.version<9,l="open",c="close",h="deactivate",p="activate",d="center",v="left",m="right",g="top",y="bottom",b="absolute",w="hidden",E="body",S="location",x="position",T="visible",N="fitted",C="effects",k="k-state-active",L="k-state-border",A=".k-picker-wrap, .k-dropdown-wrap, .k-link",O=o?"touchstart":"mousedown",M=e(document),_=e(window),D=e(document.documentElement),P="resize scroll",H=s.transitions.css,B=H+"transform",j=e.extend,F=".kendoPopup",I=["font-family","font-size","font-stretch","font-style","font-weight","line-height"],R=i.extend({init:function(t,r){var s=this,o;r=r||{},r.isRtl&&(r.origin=r.origin||y+" "+m,r.position=r.position||g+" "+m),i.fn.init.call(s,t,r),t=s.element,r=s.options,s.collisions=r.collision?r.collision.split(" "):[],s.collisions.length===1&&s.collisions.push(s.collisions[0]),o=e(s.options.anchor).closest(".k-popup,.k-group"),r.appendTo=e(e(r.appendTo)[0]||o[0]||E),s.element.hide().addClass("k-popup k-group k-reset").toggleClass("k-rtl",!!r.isRtl).css({position:b}).appendTo(r.appendTo).on("mouseenter"+F,function(){s._hovered=!0}).on("mouseleave"+F,function(){s._hovered=!1}),s.wrapper=e(),r.animation===!1&&(r.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),j(r.animation.open,{complete:function(){s.wrapper.css({overflow:T}),s.trigger(p)}}),j(r.animation.close,{complete:function(){s.wrapper.hide();var i=s.wrapper.data(S),o=e(r.anchor),u,a;i&&s.wrapper.css(i),r.anchor!=E&&(u=o.hasClass(L+"-down")?"down":"up",a=L+"-"+u,o.removeClass(a).children(A).removeClass(k).removeClass(a),t.removeClass(L+"-"+n.directions[u].reverse)),s._closing=!1,s.trigger(h)}}),s._mousedownProxy=function(e){s._mousedown(e)},s._currentWidth=M.width(),s._resizeProxy=function(e){s._resize(e)},r.toggleTarget&&e(r.toggleTarget).on(r.toggleEvent+F,e.proxy(s.toggle,s))},events:[l,p,c,h],options:{name:"Popup",toggleEvent:"click",origin:y+" "+v,position:g+" "+v,anchor:E,collision:"flip fit",viewport:window,animation:{open:{effects:"slideIn:down",transition:!0,duration:200,show:!0},close:{duration:100,show:!1,hide:!0}}},destroy:function(){var t=this,r=t.options,s=t.element.off(F),o;i.fn.destroy.call(t),r.toggleTarget&&e(r.toggleTarget).off(F),D.unbind(O,t._mousedownProxy),_.unbind(P,t._resizeProxy),r.appendTo[0]===document.body&&(o=s.parent(".k-animation-container"),o[0]?o.remove():s.remove()),n.destroy(t.element.children())},open:function(t,r){var i=this,u={isFixed:!isNaN(parseInt(r,10)),x:t,y:r},a=i.element,f=i.options,c="down",h,p,d=e(f.anchor);if(!i.visible()){a.css(n.getComputedStyles(d[0],I));if(a.data("animating")||i.trigger(l))return;D.unbind(O,i._mousedownProxy).bind(O,i._mousedownProxy),o||_.unbind(P,i._resizeProxy).bind(P,i._resizeProxy),i.wrapper=p=n.wrap(a).css({overflow:w,display:"block",position:b}),s.mobileOS.android&&p.add(d).css(B,"translatez(0)"),p.css(x),e(f.appendTo)[0]==document.body&&p.css(g,"-10000px"),h=j(!0,{},f.animation.open),i.flipped=i._position(u),h.effects=n.parseEffects(h.effects,i.flipped),c=h.effects.slideIn?h.effects.slideIn.direction:c;if(f.anchor!=E){var v=L+"-"+c;a.addClass(L+"-"+n.directions[c].reverse),d.addClass(v).children(A).addClass(k).addClass(v)}a.data(C,h.effects).kendoStop(!0).kendoAnimate(h)}},toggle:function(){var e=this;e[e.visible()?c:l]()},visible:function(){return this.element.is(":"+T)},close:function(){var t=this,r=t.options,i,s,o;if(t.visible()){if(t._closing||t.trigger(c))return;t.element.find(".k-popup").each(function(){var t=e(this),n=t.data("kendoPopup");n&&n.close()}),D.unbind(O,t._mousedownProxy),_.unbind(P,t._resizeProxy),i=j(!0,{},r.animation.close),s=t.element.data(C),o=i.effects,t.wrapper=n.wrap(t.element).css({overflow:w}),!o&&!n.size(o)&&s&&n.size(s)&&(i.effects=s,i.reverse=!0),t._closing=!0,t.element.kendoStop(!0).kendoAnimate(i)}},_resize:function(e){var t=this;if(f){var n=M.width();if(n==t._currentWidth)return;t._currentWidth=n}t._hovered||t.close()},_mousedown:function(t){var r=this,i=r.element[0],s=r.options,o=e(s.anchor)[0],u=s.toggleTarget,a=n.eventTarget(t),f=e(a).closest(".k-popup")[0];if(f&&f!==r.element[0])return;!q(i,a)&&!q(o,a)&&(!u||!q(e(u)[0],a))&&r.close()},_fit:function(e,t,n){var r=0;return e+t>n&&(r=n-(e+t)),e<0&&(r=-e),r},_flip:function(e,t,n,r,i,s,o){var u=0;return o=o||t,s!==i&&s!==d&&i!==d&&(e+o>r&&(u+=-(n+t)),e+u<0&&(u+=n+t)),u},_position:function(t){var n=this,r=n.element.css(x,""),i=n.wrapper,o=n.options,a=e(o.viewport),f=e(a).offset(),l=e(o.anchor),c=o.origin.toLowerCase().split(" "),h=o.position.toLowerCase().split(" "),p=n.collisions,d=s.zoomLevel(),v=10002,m=l.parents().filter(i.siblings());if(m[0]){var g=Number(e(m).css("zIndex"));g&&(v=g+1)}i.css("zIndex",v),t&&t.isFixed?i.css({left:t.x,top:t.y}):i.css(n._align(c,h));var y=u(i,x),w=u(i),E=l.offsetParent().parent(".k-animation-container");E.length&&E.data(N)&&(y=u(i,x),w=u(i)),a[0]===window?(w.top-=window.pageYOffset||document.documentElement.scrollTop||0,w.left-=window.pageXOffset||document.documentElement.scrollLeft||0):(w.top-=f.top,w.left-=f.left),n.wrapper.data(S)||i.data(S,j({},y));var T=j({},w),C=j({},y);p[0]==="fit"&&(C.top+=n._fit(T.top,i.outerHeight(),a.height()/d)),p[1]==="fit"&&(C.left+=n._fit(T.left,i.outerWidth(),a.width()/d)),C.left!=y.left||C.top!=y.top?i.data(N,!0):i.removeData(N);var k=j({},C);return p[0]==="flip"&&(C.top+=n._flip(T.top,r.outerHeight(),l.outerHeight(),a.height()/d,c[0],h[0],i.outerHeight())),p[1]==="flip"&&(C.left+=n._flip(T.left,r.outerWidth(),l.outerWidth(),a.width()/d,c[1],h[1],i.outerWidth())),r.css(x,b),i.css(C),C.left!=k.left||C.top!=k.top},_align:function(t,n){var r=this,i=r.wrapper,s=e(r.options.anchor),o=t[0],a=t[1],f=n[0],l=n[1],c=u(s),h=e(r.options.appendTo),p,v=i.outerWidth(),g=i.outerHeight(),b=s.outerWidth(),w=s.outerHeight(),E=c.top,S=c.left,x=Math.round;return h[0]!=document.body&&(p=u(h),E-=p.top,S-=p.left),o===y&&(E+=w),o===d&&(E+=x(w/2)),f===y&&(E-=g),f===d&&(E-=x(g/2)),a===m&&(S+=b),a===d&&(S+=x(b/2)),l===m&&(S-=v),l===d&&(S-=x(v/2)),{top:E,left:S}}});r.plugin(R)})(jQuery);