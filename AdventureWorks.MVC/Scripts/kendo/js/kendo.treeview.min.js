/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function q(e){return function(t){var n=t.children(".k-animation-container");return n.length||(n=t),n.children(e)}}function R(e){return e.children("div").find(":checkbox:first")}function U(t){var n=t.children("div"),r=t.children("ul"),i=n.children(".k-icon"),s=n.children(".k-in"),o,u;if(t.hasClass("k-treeview"))return;n.length||(n=e("<div />").prependTo(t));if(!i.length&&r.length)i=e("<span class='k-icon' />").prependTo(n);else if(!r.length||!r.children().length)i.remove(),r.remove();if(!s.length){s=e("<span class='k-in' />").appendTo(n)[0],o=n[0].nextSibling,s=n.find(".k-in")[0];while(o&&o.nodeName.toLowerCase()!="ul")u=o,o=o.nextSibling,u.nodeType==3&&(u.nodeValue=e.trim(u.nodeValue)),s.appendChild(u)}}function z(e){var t=this;t.treeview=e,t.hovered=e.element,t._draggable=new r.Draggable(e.element,{filter:"div:not(.k-state-disabled) .k-in",hint:function(t){return e.templates.dragClue({text:t.text()})},cursorOffset:{left:10,top:n.support.touch?-40/n.support.zoomLevel():10},dragstart:l(t.dragstart,t),dragcancel:l(t.dragcancel,t),drag:l(t.drag,t),dragend:l(t.dragend,t)})}var n=window.kendo,r=n.ui,i=n.data,s=e.extend,o=n.template,u=e.isArray,a=r.Widget,f=i.HierarchicalDataSource,l=e.proxy,c=n.keys,h=".kendoTreeView",p="select",d="navigate",v="expand",m="change",g="checked",y="collapse",b="dragstart",w="drag",E="drop",S="dragend",x="dataBound",T="click",N="visibility",C="undefined",k="k-state-hover",L="k-treeview",A=":visible",O=".k-item",M="aria-selected",_="aria-disabled",D,P,H,B,j,F={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},I=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"};H=q(".k-group"),B=q(".k-group,.k-content"),j=function(e){return e.children("div").children(".k-icon")},P=a.extend({init:function(e,t){var r=this,i,s=!1;u(t)&&(i=!0,t={dataSource:t}),t&&typeof t.loadOnDemand==C&&u(t.dataSource)&&(t.loadOnDemand=!1),a.prototype.init.call(r,e,t),e=r.element,t=r.options,s=e.is("ul")||e.hasClass(L),s&&(t.dataSource.list=e.is("ul")?e:e.children("ul")),r._animation(),r._accessors(),r._templates(),e.hasClass(L)?(r.wrapper=e,r.root=e.children("ul").eq(0)):(r._wrapper(),s&&(r.root=e,r._group(r.wrapper))),r._tabindex(),r.wrapper.filter("[role=tree]").length||r.wrapper.attr("role","tree"),r._dataSource(s),r._attachEvents(),t.dragAndDrop&&(r.dragging=new z(r)),s?r._attachUids():t.autoBind&&(r._progress(!0),r.dataSource.fetch()),r.element[0].id&&(r._ariaId=n.format("{0}_tv_active",r.element[0].id))},_attachEvents:function(){var t=this,n=".k-in:not(.k-state-selected,.k-state-disabled)",r="mouseenter";t.wrapper.on(r+h,".k-in.k-state-selected",function(e){e.preventDefault()}).on(r+h,n,function(){e(this).addClass(k)}).on("mouseleave"+h,n,function(){e(this).removeClass(k)}).on(T+h,n,l(t._click,t)).on("dblclick"+h,".k-in:not(.k-state-disabled)",l(t._toggleButtonClick,t)).on(T+h,".k-plus,.k-minus",l(t._toggleButtonClick,t)).on("keydown"+h,l(t._keydown,t)).on("focus"+h,l(t._focus,t)).on("blur"+h,l(t._blur,t)).on("mousedown"+h,".k-in,.k-checkbox :checkbox",l(t._mousedown,t)).on("change"+h,".k-checkbox :checkbox",l(t._checkboxChange,t)).on("click"+h,".k-checkbox :checkbox",l(t._checkboxClick,t)).on("click"+h,function(){t.focus()})},_checkboxClick:function(t){var n=e(t.target);n.data("indeterminate")&&(n.data("indeterminate",!1).prop("indeterminate",!1).prop(g,!0),this._checkboxChange(t))},_attachUids:function(t,r){var i=this,s,o=n.attr("uid");t=t||i.root,r=r||i.dataSource,s=r.view(),t.children("li").each(function(t,n){n=e(n).attr(o,s[t].uid),n.attr("role","treeitem"),i._attachUids(n.children("ul"),s[t].children)})},_animation:function(){var e=this.options,t=e.animation;if(t===!1)t={expand:{show:!0,effects:{}},collapse:{hide:!0,effects:{}}};else if(!t.collapse||!("effects"in t.collapse))t.collapse=s({reverse:!0},t.expand);s(t.collapse,{show:!1,hide:!0}),e.animation=t},_templates:function(){var e=this,t=e.options;t.template&&typeof t.template=="string"?t.template=o(t.template):t.template||(t.template=e._textTemplate()),e._checkboxes(),e.templates={dragClue:o("<div class='k-header k-drag-clue'><span class='k-icon k-drag-status'></span>#= text #</div>"),group:o("<ul class='#= r.groupCssClass(group) #'#= r.groupAttributes(group) # role='group'>#= renderItems(data) #</ul>"),item:e._itemTemplate(),loading:e._loadingTemplate()}},items:function(){return this.element.find(".k-item")},setDataSource:function(e){this.options.dataSource=e,this._dataSource(),this.dataSource.fetch()},_dataSource:function(e){function i(e){for(var t=0;t<e.length;t++)e[t]._initChildren(),e[t].children.fetch(),i(e[t].children.view())}var t=this,n=t.options,r=n.dataSource;r=u(r)?{data:r}:r,t.dataSource&&t._refreshHandler?t.dataSource.unbind(m,t._refreshHandler):t._refreshHandler=l(t.refresh,t),r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),t.dataSource=f.create(r),e&&(t.dataSource.fetch(),i(t.dataSource.view())),t.dataSource.bind(m,t._refreshHandler)},events:[b,w,E,S,x,v,y,p,d],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200,show:!0},collapse:{duration:100}},dragAndDrop:!1,autoBind:!0,loadOnDemand:!0,template:""},_accessors:function(){var e=this,t=e.options,r,i,s,o=e.element;for(r in F)i=t[F[r]],s=o.attr(n.attr(r+"-field")),s&&(i=s),i||(i=r),u(i)||(i=[i]),t[F[r]]=i},_fieldAccessor:function(t){var r=this.options[F[t]],i=r.length,s="(function(item) {";return i===0?s+="return item['"+t+"'];":(s+="var level = item.level();var levels = ["+e.map(r,function(e){return"function(d){ return "+n.expr(e)+"}"}).join(",")+"];",s+="return levels[level < "+i+" ? level : "+(i-1)+"](item)"),s+="})",s},_textTemplate:function(){var e=this,t="# var text = "+e._fieldAccessor("text")+"(item); #"+"# if (typeof item.encoded != 'undefined' && item.encoded === false) {#"+"#= text #"+"# } else { #"+"#: text #"+"# } #";return o(t)},_loadingTemplate:function(){return o("<div class='k-icon k-loading' /> Loading...")},_itemTemplate:function(){var e=this,t="# var url = "+e._fieldAccessor("url")+"(item); #"+"# var imageUrl = "+e._fieldAccessor("imageUrl")+"(item); #"+"# var spriteCssClass = "+e._fieldAccessor("spriteCssClass")+"(item); #"+"<li role='treeitem' class='#= r.wrapperCssClass(group, item) #'"+" "+n.attr("uid")+"='#= item.uid #'"+"#=item.selected ? \"aria-selected='true'\" : ''#"+"#=item.enabled === false ? \"aria-disabled='true'\" : ''#"+">"+"<div class='#= r.cssClass(group, item) #'>"+"# if (item.hasChildren) { #"+"<span class='#= r.toggleButtonClass(item) #' role='presentation'></span>"+"# } #"+"# if (treeview.checkboxes) { #"+"<span class='k-checkbox' role='presentation'>"+"#= treeview.checkboxes.template(data) #"+"</span>"+"# } #"+"# var tag = url ? 'a' : 'span'; #"+"# var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #"+"<#=tag#  class='#= r.textClass(item) #'#= textAttr # >"+"# if (imageUrl) { #"+"<img class='k-image' alt='' src='#= imageUrl #'>"+"# } #"+"# if (spriteCssClass) { #"+"<span class='k-sprite #= spriteCssClass #'></span>"+"# } #"+"#= treeview.template(data) #"+"</#=tag#>"+"</div>"+"</li>";return o(t)},setOptions:function(e){var t=this;"dragAndDrop"in e&&e.dragAndDrop&&!t.options.dragAndDrop&&(t.dragging=new z(t)),a.fn.setOptions.call(t,e),t._animation(),t._templates()},_trigger:function(e,t){return this.trigger(e,{node:t.closest(O)[0]})},_updateIndeterminate:function(e){var t=e.parent().closest(O),n,r,i=!0;if(t.length){n=R(e.siblings().andSelf());for(r=1;r<n.length;r++)if(n[r].checked!=n[r-1].checked||n[r].indeterminate||n[r-1].indeterminate){i=!1;break}R(t).data("indeterminate",!i).prop("indeterminate",!i).prop(g,i&&n[0].checked),this._updateIndeterminate(t)}},_checkboxChange:function(t){var n=e(t.target),r=n.prop(g),i=n.closest(O),s=this;s.options.checkboxes.checkChildren?(i.find(":checkbox").each(function(){s.dataItem(this).set(g,r)}),s._updateIndeterminate(i)):s.dataItem(i).set(g,r)},_toggleButtonClick:function(t){this.toggle(e(t.target).closest(O))},_mousedown:function(t){this._clickTarget=e(t.currentTarget).closest(O)},_focusable:function(e){return e&&e.length&&e.is(":visible")&&!e.find(".k-in:first").hasClass("k-state-disabled")},_focus:function(t){var n=this.select();this._focusable(n)||(n=this._clickTarget),this._focusable(n)||(n=this.current()),this._focusable(n)||(n=this._nextVisible(e())),this.current(n)},focus:function(){this.wrapper.focus()},_blur:function(e){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(e){return!e.children("div").children(".k-in").hasClass("k-state-disabled")},parent:function(t){return e(t).parent().closest(O)},_nextVisible:function(e){var t=this,n=t._expanded(e),r;if(!e.length||!e.is(":visible"))r=t.root.children().eq(0);else if(n)r=H(e).children().first();else{while(e.length&&!e.next().length)e=t.parent(e);e.next().length?r=e.next():r=e}return t._enabled(r)||(r=t._nextVisible(r)),r},_previousVisible:function(e){var t=this,n;if(!e.length||e.prev().length){e.length?n=e.prev():n=t.root.children().last();while(t._expanded(n))n=H(n).children().last()}else n=t.parent(e)||e;return t._enabled(n)||(n=t._previousVisible(n)),n},_keydown:function(r){var i=this,s=r.keyCode,o,u=i.current(),a=i._expanded(u),f=u.find(":checkbox:first"),l=n.support.isRtl(i.element);if(r.target!=r.currentTarget)return;!l&&s==c.RIGHT||l&&s==c.LEFT?a?o=i._nextVisible(u):i.expand(u):!l&&s==c.LEFT||l&&s==c.RIGHT?a?i.collapse(u):(o=i.parent(u),i._enabled(o)||(o=t)):s==c.DOWN?o=i._nextVisible(u):s==c.UP?o=i._previousVisible(u):s==c.HOME?o=i._nextVisible(e()):s==c.END?o=i._previousVisible(e()):s==c.ENTER?u.find(".k-in:first").hasClass("k-state-selected")||(i.select(u),i._trigger(p,u)):s==c.SPACEBAR&&f.length&&(f.prop(g,!f.prop(g)).data("indeterminate",!1).prop("indeterminate",!1),i._checkboxChange({target:f}),o=u),o&&(r.preventDefault(),u[0]!=o[0]&&(i._trigger(d,o),i.current(o)))},_click:function(t){var n=this,r=e(t.target),i=B(r.closest(O)),s=r.attr("href"),o;s?o=s=="#"||s.indexOf("#"+this.element.id+"-")>=0:o=i.length&&!i.children().length,o&&t.preventDefault(),!r.hasClass(".k-state-selected")&&!n._trigger(p,r)&&n.select(r)},_wrapper:function(){var e=this,t=e.element,n,r,i="k-widget k-treeview";t.is("div")?(n=t,r=n.children("ul").eq(0)):(n=t.wrap("<div />").parent(),r=t),e.wrapper=n.addClass(i),e.root=r},_group:function(e){var t=this,n=e.hasClass(L),r={firstLevel:n,expanded:n||t._expanded(e)},i=e.children("ul");i.addClass(D.groupCssClass(r)).css("display",r.expanded?"":"none"),t._nodes(i,r)},_nodes:function(t,n){var r=this,i=t.children("li"),o;n=s({length:i.length},n),i.each(function(t,i){i=e(i),o={index:t,expanded:r._expanded(i)},U(i),r._updateNodeClasses(i,n,o),r._group(i)})},_checkboxes:function(){var e=this,t=e.options,n=t.checkboxes;if(n||t.checkboxTemplate)n=s({template:t.checkboxTemplate||"<input type='checkbox' #= item.checked ? 'checked' : '' # />"},t.checkboxes),typeof n.template=="string"&&(n.template=o(n.template)),t.checkboxes=n},_updateNodeClasses:function(e,t,n){var r=e.children("div"),i=e.children("ul");if(e.hasClass("k-treeview"))return;n=n||{},n.expanded=typeof n.expanded!=C?n.expanded:this._expanded(e),n.index=typeof n.index!=C?n.index:e.index(),n.enabled=typeof n.enabled!=C?n.enabled:!r.children(".k-in").hasClass("k-state-disabled"),t=t||{},t.firstLevel=typeof t.firstLevel!=C?t.firstLevel:e.parent().parent().hasClass(L),t.length=typeof t.length!=C?t.length:e.parent().children().length,e.removeClass("k-first k-last").addClass(D.wrapperCssClass(t,n)),r.removeClass("k-top k-mid k-bot").addClass(D.cssClass(t,n)),r.children(".k-in").removeClass("k-in k-state-default k-state-disabled").addClass(D.textClass(n));if(i.length||e.attr("data-hasChildren")=="true")r.children(".k-icon").removeClass("k-plus k-minus k-plus-disabled k-minus-disabled").addClass(D.toggleButtonClass(n)),i.addClass("k-group")},_processNodes:function(t,n){var r=this;r.element.find(t).each(function(t,i){n.call(r,t,e(i).closest(O))})},dataItem:function(t){var r=e(t).closest(O).attr(n.attr("uid")),i=this.dataSource;return i&&i.getByUid(r)},_insertNode:function(t,n,r,i,s){var o=this,u=H(r),a=u.children().length+1,f,l={firstLevel:r.hasClass(L),expanded:!s,length:a},c,h,p,d="",v=function(e,t){e.appendTo(t)};for(h=0;h<t.length;h++)p=t[h],p.index=n+h,d+=o._renderItem({group:l,item:p});c=e(d);if(!c.length)return;u.length||(u=e(o._renderGroup({group:l})).appendTo(r)),i(c,u),r.hasClass("k-item")&&(U(r),o._updateNodeClasses(r)),o._updateNodeClasses(c.prev().first()),o._updateNodeClasses(c.next().last());for(h=0;h<t.length;h++)p=t[h],p.hasChildren&&(f=p.children.data(),f.length&&o._insertNode(f,p.index,c.eq(h),v,!o._expanded(c.eq(h))));return c},_updateNode:function(t,n){var r=this,i,s,o;if(t=="selected")o=n[0],s=r.findByUid(o.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",o[t]).end(),o[t]?(r.current(s),s.attr(M,!0)):s.attr(M,!1);else for(i=0;i<n.length;i++)o=n[i],e.inArray(t,r.options.dataTextField)>=0?(s=r.findByUid(o.uid),r.text(s,o[t])):t==g?(s=r.findByUid(o.uid),s.children("div").find(":checkbox").prop(g,o[t]).data("indeterminate",!1).prop("indeterminate",!1)):t=="expanded"&&r._toggle(r.findByUid(o.uid),o[t])},refresh:function(e){function l(e,t){var r=H(t),i=r.children(),s=!n._expanded(t);typeof u==C&&(u=i.length),n._insertNode(e,u,t,function(e,t){u==i.length?e.appendTo(t):e.insertBefore(i.eq(u))},s),n._expanded(t)&&(n._updateNodeClasses(t),H(t).css("display","block"))}var n=this,r=n.wrapper,i=e.node,s=e.action,o=e.items,u=e.index,a=n.options.loadOnDemand,f;if(e.field)return n._updateNode(e.field,o);i&&(r=n.findByUid(i.uid),n._progress(r,!1)),s=="add"?l(o,r):s=="remove"?n._remove(n.findByUid(o[0].uid),!1):i?(H(r).empty(),l(o,r)):n.root=n.wrapper.html(n._renderGroup({items:o,group:{firstLevel:!0,expanded:!0}})).children("ul");for(f=0;f<o.length;f++)(!a||o[f].expanded)&&o[f].load();n.trigger(x,{node:i?r:t})},expand:function(e){this._processNodes(e,function(e,t){this.toggle(t,!0)})},collapse:function(e){this._processNodes(e,function(e,t){this.toggle(t,!1)})},enable:function(e,t){t=arguments.length==2?!!t:!0,this._processNodes(e,function(e,n){var r=!B(n).is(A);n.removeAttr(_),t||(this.collapse(n),r=!0,n.find(".k-in:first").removeClass("k-state-selected"),n.removeAttr(M),n.attr(_,!0)),this._updateNodeClasses(n,{},{enabled:t,expanded:!r})})},current:function(t){var n=this,r=n._current,i=n.element,s=n._ariaId;if(arguments.length>0&&t&&t.length){r&&r.removeAttr("id").find(".k-in:first").removeClass("k-state-focused"),r=n._current=e(t,i).closest(O),r.find(".k-in:first").addClass("k-state-focused"),s&&(n.wrapper.removeAttr("aria-activedescendant"),r.attr("id",s),n.wrapper.attr("aria-activedescendant",s));return}return r||(r=n._nextVisible(e())),r},select:function(t){var n=this,r=n.element;if(!arguments.length)return r.find(".k-state-selected").closest(O);t=e(t,r).closest(O),t.length&&(r.find(".k-state-selected").each(function(){var e=n.dataItem(this);e.set("selected",!1),delete e.selected}),n.dataItem(t).set("selected",!0))},_toggle:function(e,t){var n=this,r=n.options,i=B(e),o=t?"expand":"collapse",u=r.animation[o],a=n.dataItem(e),f;if(i.data("animating"))return;n._trigger(o,e)||(n._expanded(e,t),f=a&&a.loaded(),f&&i.children().length>0?(n._updateNodeClasses(e,{},{expanded:t}),t||i.css("height",i.height()).css("height"),i.kendoStop(!0,!0).kendoAnimate(s({reset:!0},u,{complete:function(){t&&i.css("height","")}}))):a&&(r.loadOnDemand&&n._progress(e,!0),i.remove(),a.load()))},toggle:function(t,n){t=e(t);if(!j(t).is(".k-minus,.k-plus,.k-minus-disabled,.k-plus-disabled"))return;arguments.length==1&&(n=!B(t).is(A)),this._expanded(t,n)},destroy:function(){var e=this;a.fn.destroy.call(e),e.element.off(h),e.dragging&&e.dragging.destroy(),n.destroy(e.element)},_expanded:function(e,t){var r=n.attr("expanded"),i=this.dataItem(e);if(arguments.length==1)return e.attr(r)==="true"||i&&i.expanded;i&&i.set("expanded",t),t?(e.attr(r,"true"),e.attr("aria-expanded","true")):(e.removeAttr(r),e.attr("aria-expanded","false"))},_progress:function(e,t){var n=this.element;arguments.length==1?(t=e,t?n.html(this.templates.loading):n.empty()):j(e).toggleClass("k-loading",t)},text:function(t,n){t=e(t).closest(O).find(">div>.k-in");if(!n)return t.text();t.text(n)},_objectOrSelf:function(t){return e(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,r,s,o){var a=this,f=a._objectOrSelf(t),l,c,h,p,d=a._objectOrSelf(s||r),v=d.dataSource;s&&(h=d.dataItem(s),h.loaded()||(d._progress(s,!0),h.load()),s!=a.root&&(v=h.children));if(t instanceof e||I(t))t=e(t),l=f.dataSource,c=l.getByUid(t.attr(n.attr("uid"))),c&&(c=l.remove(c)),c=o(v,c);else if(u(t)||t instanceof i.ObservableArray)for(p=0;p<t.length;p++)c=o(v,t[p]);else c=o(v,t);return c&&a.findByUid(c.uid)},insertAfter:function(e,t){var n=t.parent(),r;return n.parent().is("li")&&(r=n.parent()),this._dataSourceMove(e,n,r,function(e,n){return e.insert(t.index()+1,n)})},insertBefore:function(e,t){var n=t.parent(),r;return n.parent().is("li")&&(r=n.parent()),this._dataSourceMove(e,n,r,function(e,n){return e.insert(t.index(),n)})},append:function(e,t){var n=this,r=n.root;return t&&(r=H(t)),n._dataSourceMove(e,r,t,function(e,r){function i(){return t&&n._expanded(t,!0),e.add(r)}return e.data()?i():(e.one(m,i),null)})},_remove:function(t,n){var r=this,i,s,o;return t=e(t,r.element),i=t.parent().parent(),s=t.prev(),o=t.next(),t[n?"detach":"remove"](),i.hasClass("k-item")&&(U(i),r._updateNodeClasses(i)),r._updateNodeClasses(s),r._updateNodeClasses(o),t},remove:function(e){var t=this.dataItem(e);t&&this.dataSource.remove(t)},detach:function(e){return this._remove(e,!0)},findByText:function(t){return e(this.element).find(".k-in").filter(function(n,r){return e(r).text()==t}).closest(O)},findByUid:function(e){return this.element.find(".k-item["+n.attr("uid")+"="+e+"]")},_renderItem:function(e){return e.group||(e.group={}),e.treeview=this.options,e.r=D,this.templates.item(e)},_renderGroup:function(e){var t=this;return e.renderItems=function(e){var n="",r=0,i=e.items,s=i?i.length:0,o=e.group;o.length=s;for(;r<s;r++)e.group=o,e.item=i[r],e.item.index=r,n+=t._renderItem(e);return n},e.r=D,t.templates.group(e)}}),z.prototype={_removeTouchHover:function(){var e=this;n.support.touch&&e.hovered&&(e.hovered.find("."+k).removeClass(k),e.hovered=!1)},_hintStatus:function(t){var n=this._draggable.hint.find(".k-drag-status")[0];if(!t)return e.trim(n.className.replace(/k-(icon|drag-status)/g,""));n.className="k-icon k-drag-status "+t},dragstart:function(t){var n=this,r=n.treeview,i=n.sourceNode=t.currentTarget.closest(O);r.trigger(b,{sourceNode:i[0]})&&t.preventDefault(),n.dropHint=e("<div class='k-drop-hint' />").css(N,"hidden").appendTo(r.element)},drag:function(t){var r=this,i=r.treeview,s=r.sourceNode,o=r.dropTarget=e(n.eventTarget(t)),u,a=o.closest(".k-treeview"),f,l,c,h,p,d,v,m,g;a.length?e.contains(s[0],o[0])?u="k-denied":(u="k-insert-middle",f=o.closest(".k-top,.k-mid,.k-bot"),f.length?(c=f.outerHeight(),h=f.offset().top,p=o.closest(".k-in"),d=c/(p.length>0?4:2),v=t.y.location<h+d,m=h+c-d<t.y.location,r._removeTouchHover(),g=p.length&&!v&&!m,r.hovered=g?a:!1,r.dropHint.css(N,g?"hidden":"visible"),p.toggleClass(k,g),g?u="k-add":(l=f.position(),l.top+=v?0:c,r.dropHint.css(l)[v?"prependTo":"appendTo"](o.closest(O).children("div:first")),v&&f.hasClass("k-top")&&(u="k-insert-top"),m&&f.hasClass("k-bot")&&(u="k-insert-bottom"))):o[0]!=r.dropHint[0]&&(u="k-denied")):(u="k-denied",r._removeTouchHover()),i.trigger(w,{sourceNode:s[0],dropTarget:o[0],pageY:t.y.location,pageX:t.x.location,statusClass:u.substring(2),setStatusClass:function(e){u=e}}),u.indexOf("k-insert")!==0&&r.dropHint.css(N,"hidden"),r._hintStatus(u)},dragcancel:function(e){this.dropHint.remove()},dragend:function(e){var t=this,n=t.treeview,r="over",i=t.sourceNode,s,o=t.dropHint,u,a;o.css(N)=="visible"?(r=o.prevAll(".k-in").length>0?"after":"before",s=o.closest(O)):t.dropTarget&&(s=t.dropTarget.closest(O)),u=t._hintStatus()!="k-denied",a=n.trigger(E,{sourceNode:i[0],destinationNode:s[0],valid:u,setValid:function(e){u=e},dropTarget:e.target,dropPosition:r}),o.remove(),t._removeTouchHover();if(!u||a){t._draggable.dropped=u;return}t._draggable.dropped=!0,r=="over"?i=n.append(i,s):r=="before"?i=n.insertBefore(i,s):r=="after"&&(i=n.insertAfter(i,s)),n.trigger(S,{sourceNode:i&&i[0],destinationNode:s[0],dropPosition:r})},destroy:function(){this._draggable.destroy()}},D={wrapperCssClass:function(e,t){var n="k-item",r=t.index;return e.firstLevel&&r===0&&(n+=" k-first"),r==e.length-1&&(n+=" k-last"),n},cssClass:function(e,t){var n="",r=t.index,i=e.length-1;return e.firstLevel&&r===0&&(n+="k-top "),r===0&&r!=i?n+="k-top":r==i?n+="k-bot":n+="k-mid",n},textClass:function(e){var t="k-in";return e.enabled===!1&&(t+=" k-state-disabled"),e.selected===!0&&(t+=" k-state-selected"),t},toggleButtonClass:function(e){var t="k-icon";return e.expanded!==!0?t+=" k-plus":t+=" k-minus",e.enabled===!1&&(t+="-disabled"),t},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(e){var t="k-group";return e.firstLevel&&(t+=" k-treeview-lines"),t}},r.plugin(P)})(jQuery);