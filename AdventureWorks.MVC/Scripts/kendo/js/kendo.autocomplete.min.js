/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function E(e,t,n){return n?t.substring(0,e).split(n).length-1:0}function S(e,t,n){return t.split(n)[E(e,t,n)]}function x(e,t,n,r){var i=t.split(r);return i.splice(E(e,t,r),1,n),r&&i[i.length-1]!==""&&i.push(""),i.join(r)}function T(e){var t=e.value.length;b(e,t,t)}var n=window.kendo,r=n.support,i=r.placeholder,s=n.ui,o=n.keys,u=n.data.DataSource,a=s.List,f="aria-disabled",l="k-state-default",c="disabled",h="k-state-focused",p="k-state-selected",d="k-state-disabled",v="k-state-hover",m=".kendoAutoComplete",g="mouseenter"+m+" mouseleave"+m,y=a.caret,b=a.selectText,w=e.proxy,N=a.extend({init:function(t,r){var s=this,o;s.ns=m,r=e.isArray(r)?{dataSource:r}:r,a.fn.init.call(s,t,r),t=s.element,r=s.options,r.placeholder=r.placeholder||t.attr("placeholder"),i&&t.attr("placeholder",r.placeholder),s._wrapper(),s._accessors(),s._dataSource(),t[0].type="text",o=s.wrapper,s._enable(),s._popup(),t.addClass("k-input").on("keydown"+m,w(s._keydown,s)).on("paste"+m,w(s._search,s)).on("focus"+m,function(){s._prev=s._accessor(),s._placeholder(!1),o.addClass(h)}).on("blur"+m,function(){s._change(),s._placeholder(),o.removeClass(h)}).attr({autocomplete:"off",role:"textbox","aria-haspopup":!0}),s._enable(),s._popup(),s._old=s._accessor(),t[0].id&&t.attr("aria-owns",s.ul[0].id),s._aria(),s._placeholder(),n.notify(s)},options:{name:"AutoComplete",suggest:!1,template:"",dataTextField:"",minLength:1,delay:200,height:200,filter:"startswith",ignoreCase:!0,highlightFirst:!1,separator:null,placeholder:"",animation:{}},_dataSource:function(){var e=this;e.dataSource&&e._refreshHandler?e._unbindDataSource():e._refreshHandler=w(e.refresh,e),e.dataSource=u.create(e.options.dataSource).bind("change",e._refreshHandler)},setDataSource:function(e){this.options.dataSource=e,this._dataSource()},events:["open","close","change","select","dataBinding","dataBound"],setOptions:function(e){a.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},enable:function(e){var t=this,n=t.element,r=t.wrapper.off(g);e===!1?(r.removeClass(l).addClass(d),n.attr(c,c).attr(f,!0)):(r.removeClass(d).addClass(l).on(g,t._toggleHover),n.removeAttr(c).attr(f,!1))},close:function(){var e=this;e.current(null),e.popup.close()},destroy:function(){var e=this;e.element.off(m),e.wrapper.off(m),a.fn.destroy.call(e)},refresh:function(){var r=this,i=r.ul[0],s=r.popup,o=r.options,u=r._data(),a=u.length,f;r.trigger("dataBinding"),i.innerHTML=n.render(r.template,u),r._height(a),s.visible()&&s._position(),a&&(o.highlightFirst&&r.current(e(i.firstChild)),o.suggest&&r.suggest(e(i.firstChild))),r._open&&(r._open=!1,f=a?"open":"close",r._typing&&r.element[0]!==document.activeElement&&(f="close"),s[f](),r._typing=t),r._touchScroller&&r._touchScroller.reset(),r._makeUnselectable(),r.trigger("dataBound")},select:function(e){this._select(e)},search:function(e){var t=this,n=t.options,r=n.ignoreCase,i=n.separator,s;e=e||t._accessor(),t._current=null,clearTimeout(t._typing),i&&(e=S(y(t.element[0]),e,i)),s=e.length,s?s>=t.options.minLength&&(t._open=!0,t.dataSource.filter({value:r?e.toLowerCase():e,operator:n.filter,field:n.dataTextField,ignoreCase:r})):t.popup.close()},suggest:function(e){var n=this,r=n._last,i=n._accessor(),s=n.element[0],u=y(s),f=n.options.separator,l=i.split(f),c=E(u,i,f),h=u,p;if(r==o.BACKSPACE||r==o.DELETE){n._last=t;return}e=e||"",typeof e!="string"&&(p=a.inArray(e[0],n.ul[0]),p>-1?e=n._text(n._data()[p]):e=""),u<=0&&(u=i.toLowerCase().indexOf(e.toLowerCase())+1),p=i.substring(0,u).lastIndexOf(f),p=p>-1?u-(p+f.length):u,i=l[c].substring(0,p),e&&(p=e.toLowerCase().indexOf(i.toLowerCase()),p>-1&&(e=e.substring(p+i.length),h=u+e.length,i+=e),f&&l[l.length-1]!==""&&l.push("")),l[c]=i,n._accessor(l.join(f||"")),b(s,u,h)},value:function(e){if(e===t)return this._accessor();this._accessor(e),this._old=e},_accessor:function(e){var n=this,r=n.element[0];if(e===t)return e=r.value,r.className.indexOf("k-readonly")>-1?e===n.options.placeholder?"":e:e;r.value=e,n._placeholder()},_accept:function(e){var t=this;t._focus(e),T(t.element[0])},_keydown:function(t){var n=this,r=n.ul[0],i=t.keyCode,s=n._current,u=n.popup.visible();n._last=i,i===o.DOWN?(u&&n._move(s?s.next():e(r.firstChild)),t.preventDefault()):i===o.UP?(u&&n._move(s?s.prev():e(r.lastChild)),t.preventDefault()):i===o.ENTER||i===o.TAB?(i===o.ENTER&&n.popup.visible()&&t.preventDefault(),n._accept(s)):i===o.ESC?(n.popup.visible()&&t.preventDefault(),n.close()):n._search()},_move:function(e){var t=this;e=e[0]?e:null,t.current(e),t.options.suggest&&t.suggest(e)},_placeholder:function(e){if(i)return;var n=this,r=n.element,s=n.options.placeholder,o;if(s){o=r.val(),e===t&&(e=!o),e||(o!==s?s=o:s="");if(o===n._old&&!e)return;r.toggleClass("k-readonly",e).val(s)}},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._prev!==e._accessor()&&(e._prev=e._accessor(),e.search())},e.options.delay)},_select:function(t){var n=this,r=n.options.separator,i=n._data(),s,o;t=e(t),t[0]&&!t.hasClass(p)&&(o=a.inArray(t[0],n.ul[0]),o>-1&&(i=i[o],s=n._text(i),r&&(s=x(y(n.element[0]),n._accessor(),s,r)),n._accessor(s),n.current(t.addClass(p))))},_toggleHover:function(t){r.touch||e(t.currentTarget).toggleClass(v,t.type==="mouseenter")},_wrapper:function(){var e=this,t=e.element,n=t[0],r;r=t.parent(),r.is("span.k-widget")||(r=t.wrap("<span />").parent()),r.attr("tabindex",-1),r.attr("role","presentation"),r[0].style.cssText=n.style.cssText,t.css({width:"100%",height:n.style.height}),e._focused=e.element,e.wrapper=r.addClass("k-widget k-autocomplete k-header").addClass(n.className)}});s.plugin(N)})(jQuery);