/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function rt(e,t,n){var i=S(e.from)?e.from:H,s=S(e.to)?e.to:P;return e.from=r.max(r.min(s,i),t),e.to=r.min(r.max(s,i),n),e}var n=document,r=Math,i=window.kendo,s=i.ui.Widget,o=i.deepExtend,u=i.dataviz,a=u.Axis,f=u.Box2D,l=u.ChartElement,c=u.NumericAxis,h=u.Pin,p=u.Ring,d=u.RootElement,v=u.RotationAnimation,m=u.BarIndicatorAnimatin,g=u.ArrowAnimation,y=u.append,b=u.animationDecorator,w=u.autoMajorUnit,E=u.getSpacing,S=u.defined,x=u.rotatePoint,T=u.Point2D,N=u.round,C=u.uniqueId,k=150,L="arrow",A="arrowPointer",O="barIndicator",M="#000",_=.05,D=u.COORD_PRECISION,P=Number.MAX_VALUE,H=-Number.MAX_VALUE,B=200,j=.5,F=200,I=60,q=60,R=r.PI/180,U="inside",z="needle",W="outside",X="radialPointer",V=90,$=l.extend({init:function(e,t){var n=this,i=e.options;l.fn.init.call(n,t),t=n.options,t.id||(t.id=C()),t.fill=t.color,n.scale=e,S(t.value)?t.value=r.min(r.max(t.value,i.min),i.max):t.value=i.min},options:{color:M},value:function(e){var t=this,n=t.options,i=n.value,s=t.scale.options;if(arguments.length===0)return i;n._oldValue=n.value,n.value=r.min(r.max(e,s.min),s.max),t.repaint()}}),J=$.extend({options:{shape:z,cap:{size:_},arrow:{width:16,height:14},animation:{type:X,speed:k}},reflow:function(){var e=this,t=e.options,n=e.scale,r=n.ring,i=r.c,s=r.r*t.cap.size;e.box=new f(i.x-s,i.y-s,i.x+s,i.y+s)},repaint:function(){var e=this,t=e.scale,r=e.options,i=e.elements[0],s=r.animation,u=t.slotAngle(t.options.min),a=t.slotAngle(r._oldValue)-u,f=i._animation;i.options.rotation[0]=t.slotAngle(r.value)-u,f&&f.abort(),s.transitions===!1?i.refresh(n.getElementById(r.id)):(f=i._animation=new v(i,o(s,{startAngle:a,reverse:t.options.reverse})),f.setup(),f.play())},_renderNeedle:function(e,t,n,r){var i=this,s=i.options,o=i.scale,u=o.ring.r*s.cap.size;return[e.createPolyline([x((t.x1+t.x2)/2,t.y1+o.options.minorTicks.size,n.x,n.y,r),x(n.x-u/2,n.y,n.x,n.y,r),x(n.x+u/2,n.y,n.x,n.y,r)],!0,s),e.createCircle(n,u,{fill:s.cap.color||s.color})]},_renderArrow:function(e,t,n,r){var i=this,s=i.options,o=i.scale,u=o.ring.clone(),a=5,f=s.arrow,l=f.height;return u.ir=u.r-a,[e.createPin(new h({origin:x((t.x1+t.x2)/2,t.y1+l,n.x,n.y,r),height:f.height,radius:a,rotation:r,arcAngle:180}),s),e.createRing(u,{fill:s.color})]},renderPointer:function(e){var t=this,n=t.scale,r=n.ring,i=r.c,s=r.r,u,a=t.options,l=new f(i.x-s,i.y-s,i.x+s,i.y+s),c=l.center(),h=n.slotAngle(n.options.min),p=V-h;return a.animation!==!1&&o(a.animation,{startAngle:0,center:c,reverse:n.options.reverse}),o(a,{rotation:[n.slotAngle(a.value)-h,c.x,c.y]}),a.shape==L?u=t._renderArrow(e,l,c,p):u=t._renderNeedle(e,l,c,p),u},getViewElements:function(e){var t=this,n=t.renderPointer(e);return t.elements=n,n}}),K=c.extend({init:function(e){var t=this,n=t.options;n.majorUnit=w(t.options.min,t.options.max),a.fn.init.call(t,e),t.options.minorUnit=t.options.minorUnit||t.options.majorUnit/10},options:{min:0,max:100,majorTicks:{size:15,align:U,color:M,width:j,visible:!0},minorTicks:{size:10,align:U,color:M,width:j,visible:!0},startAngle:-30,endAngle:210,labels:{position:U,padding:2}},reflow:function(e){var t=this,n=t.options,i=e.center(),s=r.min(e.height(),e.width())/2,o=t.ring||new u.Ring(i,s-n.majorTicks.size,s,n.startAngle,n.endAngle-n.startAngle);t.ring=o,t.box=o.getBBox(),t.arrangeLabels()},slotAngle:function(e){var t=this.options,n=t.startAngle,r=t.reverse,i=t.endAngle-n,s=t.min,o=t.max,u;return r?u=t.endAngle-(e-s)/(o-s)*i:u=(e-s)/(o-s)*i+n,u},renderTicks:function(e){function u(r,i,s,o,u){var a=t.tickAngles(r,i),f,l,c,h=u/i,p=a.length;if(o)for(f=0;f<p;f++){if(f%h===0)continue;c=r.point(a[f]),l=r.point(a[f],!0),n.push(e.createLine(l.x,l.y,c.x,c.y,{align:!1,stroke:s.color,strokeWidth:s.width}))}}var t=this,n=[],r=t.ring,i=r.clone(),s=t.options,o=s.minorTicks.size;return u(r,s.majorUnit,s.majorTicks,s.majorTicks.visible),s.labels.position==U?i.radius(i.r-o,!0):i.radius(i.ir+o),u(i,s.minorUnit,s.minorTicks,s.minorTicks.visible,s.majorUnit),n},arrangeLabels:function(){var e=this,t=e.options,n=e.ring.clone(),i=e.tickAngles(n,t.majorUnit),s=e.labels,o=s.length,u=t.labels,a=u.padding,l=n.r*.05,c=t.rangeSize=t.rangeSize||n.r*.1,h=t.ranges||[],p,d,v,m,g,y,b,w,E,S;typeof e.options.rangeDistance!="undefined"?l=e.options.rangeDistance:e.options.rangeDistance=l,u.position===U&&h.length&&(n.r-=c+l,n.ir-=c+l);for(b=0;b<o;b++)g=s[b],p=g.box.width()/2,d=g.box.height()/2,m=i[b],v=m*R,S=u.position===U,y=n.point(m,S),w=y.x+r.cos(v)*(p+a)*(S?1:-1),E=y.y+r.sin(v)*(d+a)*(S?1:-1),g.reflow(new f(w-p,E-d,w+p,E+d)),e.box.wrap(g.box)},tickAngles:function(e,t){var n=this,r=n.options,i=r.reverse,s=r.max-r.min,o=e.angle,u=e.startAngle,a=s/t,f=o/a,l=[],c;i&&(u+=o,f=-f);for(c=0;c<a;c++)l.push(N(u,D)),u+=f;return N(u)<=r.endAngle&&l.push(u),l},renderRanges:function(e){var t=this,n=[],r,i,s=t.rangeSegments(),o=s.length,u=t.options.reverse,a,f,l;if(o){f=t.getRadius();for(l=0;l<o;l++)a=s[l],r=t.slotAngle(a[u?"to":"from"]),i=t.slotAngle(a[u?"from":"to"]),i-r!==0&&n.push(e.createRing(new p(t.ring.c,f.inner,f.outer,r,i-r),{fill:a.color,fillOpacity:a.opacity,zIndex:-1}))}return n},rangeSegments:function(){function p(e,t,n){return{from:e,to:t,color:n}}var e=this,t=e.options,n=t.ranges||[],r=n.length,i,s,o=t.rangePlaceholderColor,u=[],a,f=t.min,l=t.max,c,h;if(r){u.push(p(f,l,o));for(c=0;c<r;c++){i=rt(n[c],f,l),s=u.length;for(h=0;h<s;h++){a=u[h];if(a.from<=i.from&&i.from<=a.to){u.push(p(i.from,i.to,i.color)),a.from<=i.to&&i.to<=a.to&&u.push(p(i.to,a.to,o)),a.to=i.from;break}}}}return u},getRadius:function(){var e=this,t=e.options,n=t.rangeSize,r=t.rangeDistance,i=e.ring,s,o;return t.labels.position===W?(o=i.ir-r,s=o-n):(o=i.r,s=o-n,i.r-=n+r,i.ir-=n+r),{inner:s,outer:o}},getViewElements:function(e){var t=this,n=l.fn.getViewElements.call(t,e);return y(n,t.renderRanges(e)),y(n,t.renderTicks(e)),n}}),Q=l.extend({init:function(e){l.fn.init.call(this,e),this.render()},options:{margin:{},background:"",border:{color:M,width:0},minorTicks:{align:U}},reflow:function(e){var t=this,n=t.scale,r=t.pointer,i;n.reflow(e),i=n.box.clone(),r.scale=n,r.reflow(),i.wrap(r.box),t.box=i,t.fitScale(e),t.alignScale(e)},alignScale:function(e){var t=this,n=t.box.center(),r=e.center(),i=n.x-r.x,s=n.y-r.y,o=t.scale,u=t.pointer;o.ring.c.x-=i,o.ring.c.y-=s,o.reflow(e),u.reflow(),t.box=o.box.clone().wrap(u.box)},fitScale:function(e){var t=this,n=t.scale,i=n.ring,s=t.box,o=r.abs(t.getDiff(s,e)),u=N(o,D),a=N(-o,D),f,l,c,h,p=0;while(p<100){p++;if(u!=h){f=t.getPlotBox(u,e,i);if(0<=f&&f<=2)break}if(a!=h){c=t.getPlotBox(a,e,i);if(0<=c&&c<=2)break}f>0&&c>0?h=u*2:f<0&&c<0?h=a*2:h=N((u+a)/2||1,D),l=t.getPlotBox(h,e,i);if(0<=l&&l<=2)break;l>0?(a=h,c=l):(u=h,f=l)}},getPlotBox:function(e,t,n){var r=this,i=r.scale,s=r.pointer;return n=n.clone(),n.r+=e,n.ir+=e,i.ring=n,i.reflow(t),s.scale=i,s.reflow(),r.box=i.box.clone().wrap(s.box),r.getDiff(r.box,t)},getDiff:function(e,t){return r.min(t.width()-e.width(),t.height()-e.height())},render:function(){var e=this,t=e.options,n;n=e.scale=new K(t.scale),e.append(e.scale),e.pointer=new J(n,o({},t.pointer,{animation:{transitions:t.transitions}})),e.append(e.pointer)}}),G=c.extend({init:function(e){var t=this,n=t.options;n.majorUnit=w(t.options.min,t.options.max),e=o({},n,e),e=o({},e,{labels:{mirror:e.mirror}}),c.fn.init.call(t,0,1,e)},options:{min:0,max:50,minorUnit:1,majorTicks:{size:15,align:U,color:M,width:j,visible:!0},minorTicks:{size:10,align:U,color:M,width:j,visible:!0},line:{width:j},labels:{position:U,padding:2},mirror:!1,_alignLines:!1},renderRanges:function(e){var t=this,n=t.options,r=n.min,i=n.max,s=n.ranges||[],o=n.vertical,u=n.labels.mirror,a=[],l=s.length,c,h,p,d,v=n.rangeSize||n.minorTicks.size/2,m;if(l)for(d=0;d<l;d++)c=rt(s[d],r,i),m=t.getSlot(c.from,c.to),h=o?t.lineBox():m,p=o?m:t.lineBox(),o?h.x1-=v*(u?-1:1):p.y2+=v*(u?-1:1),a.push(e.createRect(new f(h.x1,p.y1,h.x2,p.y2),{fill:c.color,fillOpacity:c.opacity}));return a},getViewElements:function(e){var t=this,n=c.fn.getViewElements.call(t,e);return y(n,t.renderRanges(e)),n}}),Y=$.extend({init:function(e,t){var n=this;$.fn.init.call(n,e,t),n.options=o({size:n.pointerSize(),track:{visible:S(t.track)}},n.options)},options:{shape:O,track:{border:{width:1}},color:M,border:{width:1},opacity:1,margin:E(3),animation:{type:O},visible:!0},repaint:function(){var e=this,t=e.scale,r=e.options,i=e.element,s=i._animation;s&&s.abort(),r.animation.transitions===!1?(e.getViewElements(e._view),i.points=e.element.points,i.refresh(n.getElementById(r.id))):(r.animation=o({},r.animation,{endPosition:t.getSlot(t.options.min,r.value),reverse:t.options.reverse}),r.shape===L?s=i._animation=new g(i,r.animation):s=i._animation=new m(i,r.animation),s.setup(),s.play())},reflow:function(e){var t=this,n=t.options,r=t.scale,i=r.lineBox(),s=n.track.size||n.size,o=n.size/2,u=r.options.mirror,a=E(n.margin),l=r.options.vertical,c=l?a[u?"left":"right"]:a[u?"bottom":"top"],h,p,d;c=u?-c:c,l?(d=new f(i.x1+c,i.y1,i.x1+c,i.y2),u?d.x1-=s:d.x2+=s,n.shape!==O&&(p=new f(i.x2+c,i.y1-o,i.x2+c,i.y2+o),h=p)):(d=new f(i.x1,i.y1-c,i.x2,i.y1-c),u?d.y2+=s:d.y1-=s,n.shape!==O&&(p=new f(i.x1-o,i.y1-c,i.x2+o,i.y1-c),h=p)),t.trackBox=d,t.pointerRangeBox=p,t.box=h||d.clone().pad(n.border.width)},renderPointer:function(e){var t=this,n=t.scale,r=t.options,i=S(r.border)?{stroke:r.border.width?r.border.color||r.color:"",strokeWidth:r.border.width,dashType:r.border.dashType}:{},s,u=o({fill:r.color,fillOpacity:r.opacity,animation:o(r.animation,{startPosition:n.getSlot(n.options.min,r.value),size:r.size,vertical:n.options.vertical,reverse:n.options.reverse}),id:r.id,zIndex:2,align:!1},i),a=t.pointerShape(r.value);return r.shape===L?(u.animation.type=A,s=e.createPolyline(a,!0,u)):s=e.createRect(a,u),s},pointerShape:function(e){var t=this,n=t.options,r=t.scale,i=r.getSlot(e,r.options.min),s=n.size,o=t.pointerRangeBox,u=r.options.vertical,a=s/2,l,c=r.options.mirror?-1:1,h=r.options.reverse,p,d;return n.shape==L?u?(p=h?"y2":"y1",l=[new T(o.x1,i[p]-a),new T(o.x1-c*s,i[p]),new T(o.x1,i[p]+a)]):(p=h?"x1":"x2",l=[new T(i[p]-a,o.y2),new T(i[p],o.y2+c*s),new T(i[p]+a,o.y2)]):(d=t.trackBox,u?l=new f(d.x1,i.y1,d.x1+s,i.y2):l=new f(i.x1,d.y1,i.x2,d.y1+s)),l},pointerSize:function(e){var t=this,n=t.options,r=t.scale,i=r.options.majorTicks.size,s;return n.shape===L?s=i*.6:s=i*.3,N(s)},renderTrack:function(e){var t=this,n=t.options,r=n.track,i=r.border||{},s=t.trackBox.clone().pad(i.width||0);return e.createRect(s,{fill:r.color,fillOpacity:r.opacity,stroke:i.width?i.color||r.color:"",strokeWidth:i.width,dashType:i.dashType,align:!1})},getViewElements:function(e){var t=this,n=t.options,r=[];return t.element=t.renderPointer(e),r.push(t.element),n.track.visible&&(n.shape===O||n.shape==="")&&r.push(t.renderTrack(e)),t._view=e,y(r,$.fn.getViewElements.call(t,e)),r}}),Z=l.extend({init:function(e){l.fn.init.call(this,e),this.render()},options:{plotArea:{margin:{},background:"",border:{color:M,width:0}},pointer:{},scale:{}},reflow:function(e){var t=this,n=t.scale,r=t.pointer;n.reflow(e),r.reflow(e),t.box=t.getBox(e),t.alignElements(),t.shrinkElements()},shrinkElements:function(){var e=this,t=e.scale,n=e.pointer,i=t.box.clone(),s=n.box,o=t.options.vertical?"y":"x";i[o+1]+=r.max(i[o+1]-s[o+1],0),i[o+2]-=r.max(s[o+2]-i[o+2],0),t.reflow(i),n.reflow(e.box)},getBox:function(e){var t=this,n=t.scale,r=t.pointer,i=e.center(),s=r.box.clone().wrap(n.box),o;return n.options.vertical?(o=s.width()/2,s=new f(i.x-o,e.y1,i.x+o,e.y2)):(o=s.height()/2,s=new f(e.x1,i.y-o,e.x2,i.y+o)),s},alignElements:function(){var e=this,t=e.scale,n=e.pointer,r=t.box,i=n.box.clone().wrap(t.box),s=e.box,o;t.options.vertical?(o=s.center().x-i.center().x,t.reflow(new f(r.x1+o,s.y1,r.x2+o,s.y2))):(o=s.center().y-i.center().y,t.reflow(new f(s.x1,r.y1+o,s.x2,r.y2+o))),n.reflow(e.box)},render:function(){var e=this,t=e.options,n;n=e.scale=new G(t.scale),e.append(e.scale),e.pointer=new Y(n,o({},t.pointer,{animation:{transitions:t.transitions}})),e.append(e.pointer)},getViewElements:function(e){var t=this,n=t.options.plotArea,r=l.fn.getViewElements.call(t,e),i=n.border||{},s=[e.createRect(t.box,{fill:n.background,stroke:i.width?i.color:"",strokeWidth:i.width,dashType:i.dashType})];return y(s,r),s}}),et=s.extend({init:function(e,t){var n=this,r,i,a,f=u.ui.themes||{},l;s.fn.init.call(n,e),n.wrapper=n.element,n._originalOptions=o({},t),r=o({},n.options,t),a=r.theme,l=f[a]||f[a.toLowerCase()],i=a&&l?l.gauge:{},n.options=o({},i,r),n.element.addClass("k-gauge"),n.redraw()},options:{plotArea:{},theme:"default"},value:function(e){if(arguments.length===0)return this._pointers[0].value();this._pointers[0].value(e)},redraw:function(){var e=this,t=e.element,n=e._model=e._getModel(),r=u.ui.defaultView(),i;e._plotArea=n._plotArea,r&&(i=e._view=r.fromModel(n),t.css("position","relative"),e._viewElement=i.renderTo(t[0]))},svg:function(){var e=this._getModel(),t=u.SVGView.fromModel(e);return t.render()},_createModel:function(){var e=this,t=e.options,n=e._getSize();return new d(o({width:n.width,height:n.height,transitions:t.transitions},t.gaugeArea))},_getSize:function(){var e=this,t=e.element,n=t.width(),r=t.height();return n||(n=F),r||(r=B),{width:n,height:r}}}),tt=et.extend({init:function(e,t){var n=this;et.fn.init.call(n,e,t),i.notify(n,u.ui)},options:{name:"RadialGauge",transitions:!0,gaugeArea:{background:""}},_getModel:function(){var e=this,t=e.options,n=e._createModel(),r;return r=n._plotArea=new Q(t),e._pointers=[r.pointer],n.append(r),n.reflow(),n}}),nt=et.extend({init:function(e,t){var n=this;et.fn.init.call(n,e,t),i.notify(n,u.ui)},options:{name:"LinearGauge",transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}},_getModel:function(){var e=this,t=e.options,n=e._createModel(),r;return r=n._plotArea=new Z(t),e._pointers=[r.pointer],n.append(r),n.reflow(),n},_getSize:function(){var e=this,t=e.element,n=t.width(),r=t.height(),i=e.options.scale.vertical;return n||(n=i?I:F),r||(r=i?B:q),{width:n,height:r}}}),it=b(X,v),st=b(A,g),ot=b(O,m);u.ui.plugin(tt),u.ui.plugin(nt),o(u,{Gauge:et,RadialGaugePlotArea:Q,LinearGaugePlotArea:Z,RadialPointer:J,LinearPointer:Y,LinearScale:G,RadialScale:K,RadialPointerAnimationDecorator:it,ArrowPointerAnimationDecorator:st,BarIndicatorAnimationDecorator:ot})})(jQuery);