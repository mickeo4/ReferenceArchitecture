/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){var n=window.kendo,r=n.Class,i=n.ui.Widget,s=n.support.mobileOS,o=n.support.browser,u=e.extend,a=n.deepExtend,f=".kendoEditor",l=n.keys,c=r.extend({init:function(e){var t=this;t.options=e},getHtml:function(){var e=this.options;return n.template(e.template)({cssClass:e.cssClass,tooltip:e.title,initialValue:e.initialValue})}}),h={select:function(e){e.trigger("select",{})},editorWrapperTemplate:'<table cellspacing="4" cellpadding="0" class="k-widget k-editor k-header" role="presentation"><tbody><tr role="presentation"><td class="k-editor-toolbar-wrap" role="presentation"><ul class="k-editor-toolbar" role="toolbar"></ul></td></tr><tr><td class="k-editable-area"></td></tr></tbody></table>',buttonTemplate:'<li class="k-editor-button" role="presentation"><a href="" role="button" class="k-tool-icon #= cssClass #" unselectable="on" title="#= tooltip #">#= tooltip #</a></li>',colorPickerTemplate:'<li class="k-editor-colorpicker" role="presentation"><div class="k-widget k-colorpicker k-header #= cssClass #" role="combobox" title="#=tooltip#"><span class="k-tool-icon"><span class="k-selected-color"></span></span><span class="k-icon k-i-arrow-s"></span></div></li>',comboBoxTemplate:'<li class="k-editor-combobox"><select title="#= tooltip #" class="#= cssClass #"></select></li>',dropDownListTemplate:'<li class="k-editor-selectbox"><select title="#= tooltip #" class="#= cssClass #"></select></li>',separatorTemplate:'<li class="k-separator"></li>',focusable:".k-colorpicker,a.k-tool-icon:not(.k-state-disabled),.k-selectbox, .k-combobox .k-input",wrapTextarea:function(t){var n=t.width(),r=t.height(),i=h.editorWrapperTemplate,s=e(i).insertBefore(t).width(n).height(r),o=s.find(".k-editable-area");return t.appendTo(o).addClass("k-content k-raw-content").hide(),t.closest(".k-editor")},renderTools:function(t,r){var i={},s,o,a,f=t._nativeTools,l,c,p=e(t.element).closest(".k-editor").find(".k-editor-toolbar");if(r)for(a=0;a<r.length;a++){s=r[a],c=null,e.isPlainObject(s)?s.name&&t.tools[s.name]?(e.extend(t.tools[s.name].options,s),i[s.name]=t.tools[s.name],c=i[s.name].options):(c=u({cssClass:"k-i-custom",type:"button",tooltip:""},s),c.name&&(c.cssClass="k-"+(c.name=="custom"?"i-custom":c.name)),c.template||c.type=="button"&&(c.template=h.buttonTemplate)):t.tools[s]&&(i[s]=t.tools[s],c=i[s].options);if(!c)continue;l=c.template,l&&(l.getHtml?l=l.getHtml():(e.isFunction(l)||(l=n.template(l)),l=l(c)),l.indexOf("<li")!==0&&(l="<li class='k-editor-template'>"+l+"</li>"),o=e(l).appendTo(p),c.type=="button"&&c.exec&&o.find(".k-tool-icon").click(e.proxy(c.exec,t.element[0])))}for(a=0;a<f.length;a++)i[f[a]]||(i[f[a]]=t.tools[f[a]]);t.options.tools=i},decorateStyleToolItems:function(t){var r=t.data.closest(".k-editor").find(".k-style").data("kendoSelectBox");if(!r)return;var i=r.dataSource.view();r.list.find(".k-item").each(function(r,s){var o=e(s),u=o.text(),a=n.ui.editor.Dom.inlineStyle(t.data.data("kendoEditor").document,"span",{className:i[r].value});o.html('<span unselectable="on" style="display:block;'+a+'">'+u+"</span>")})},createContentElement:function(t,r){var i,s,o,u=n.support.isRtl(t)?"direction:rtl;":"";return t.hide(),i=e("<iframe />",{src:'javascript:""',frameBorder:"0"}).css("display","").addClass("k-content").insertBefore(t)[0],s=i.contentWindow||i,r.length>0&&e(i).one("load",t,h.decorateStyleToolItems),o=s.document||i.contentDocument,o.open(),o.write("<!DOCTYPE html><html><head><meta charset='utf-8' /><style>html,body{padding:0;margin:0;font-family:Verdana,Geneva,sans-serif;background:#fff;height:100%;min-height:100%;}html{font-size:100%}body{font-size:.75em;line-height:1.5;padding-top:1px;margin-top:-1px;word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;"+u+"}"+"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}"+"p{margin:0 0 1em;padding:0 .2em}.k-marker{display:none;}.k-paste-container{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}"+"ul,ol{padding-left:2.5em}"+"a{color:#00a}"+"code{font-size:1.23em}"+"</style>"+e.map(r,function(e){return"<link rel='stylesheet' href='"+e+"'>"}).join("")+"</head><body contenteditable='true'></body></html>"),o.close(),s},initializeContentElement:function(t){var n=!0;t.window=h.createContentElement(e(t.textarea),t.options.stylesheets),t.document=t.window.contentDocument||t.window.document,t.body=t.document.body,e(t.document).on("keydown"+f,function(e){if(e.keyCode===l.F10){setTimeout(function(){var e="tabIndex",n=t.wrapper,r=n.attr(e);n.attr(e,r||0).focus().find("li:has("+d+")").first().focus(),!r&&r!==0&&n.removeAttr(e)},100),e.preventDefault();return}var r=t.keyboard.toolFromShortcut(t.options.tools,e);if(r)return e.preventDefault(),/undo|redo/.test(r)||t.keyboard.endTyping(!0),t.exec(r),!1;if(t.keyboard.isTypingKey(e)&&t.pendingFormats.hasPending())if(n)n=!1;else{var i=t.getRange();t.pendingFormats.apply(i),t.selectRange(i)}t.keyboard.clearTimeout(),t.keyboard.keydown(e)}).on("keyup"+f,function(r){var i=[8,9,33,34,35,36,37,38,39,40,40,45,46];if(e.inArray(r.keyCode,i)>-1||r.keyCode==65&&r.ctrlKey&&!r.altKey&&!r.shiftKey)t.pendingFormats.clear(),p(t);if(t.keyboard.isTypingKey(r)){if(t.pendingFormats.hasPending()){var s=t.getRange();t.pendingFormats.apply(s),t.selectRange(s)}}else n=!0;t.keyboard.keyup(r)}).on("mousedown"+f,function(n){t.pendingFormats.clear();var r=e(n.target);!o.gecko&&n.which==2&&r.is("a[href]")&&window.open(r.attr("href"),"_new")}).on("mouseup"+f,function(){p(t)}),e(t.window).on("blur"+f,function(){var e=t.textarea.value,n=t.encodedValue();t.update(),n!=e&&t.trigger("change")}),e(t.body).on("cut"+f+" paste"+f,function(e){t.clipboard["on"+e.type](e)})},formatByName:function(t,n){for(var r=0;r<n.length;r++)if(e.inArray(t,n[r].tags)>=0)return n[r]},registerTool:function(e,t){var n=w.fn._tools;n[e]=t,n[e].options&&n[e].options.template&&(n[e].options.template.options.cssClass="k-"+e)},registerFormat:function(e,t){n.ui.Editor.fn.options.formats[e]=t},createDialog:function(t,r,i){var s=n.support.isRtl(r.wrapper),o=e(t).appendTo(document.body).kendoWindow(i);return s&&o.closest(".k-window").addClass("k-rtl"),o}},p=h.select,d=h.focusable,v=h.wrapTextarea,m=h.renderTools,g=h.initializeContentElement,y={bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertHtml:"Insert HTML",fontName:"Select font family",fontNameInherit:"(inherited font)",fontSize:"Select font size",fontSizeInherit:"(inherited size)",formatBlock:"Format",foreColor:"Color",backColor:"Background color",style:"Styles",emptyFolder:"Empty Folder",uploadFile:"Upload",orderBy:"Arrange by:",orderBySize:"Size",orderByName:"Name",invalidFileType:'The selected file "{0}" is not valid. Supported file types are {1}.',deleteFile:'Are you sure you want to delete "{0}"?',overwriteFile:'A file with name "{0}" already exists in the current directory. Do you want to overwrite it?',directoryNotFound:"A directory with this name was not found."},b=!s||s.ios&&s.flatVersion>=500||!s.ios&&typeof document.documentElement.contentEditable!="undefined",w=i.extend({init:function(t,r){function p(t){var n=e.grep(t.className.split(" "),function(e){return!/^k-(widget|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(e)});return n[0]?n[0].substring(n[0].lastIndexOf("-")+1):"custom"}function w(e,t){if(!t.key)return e;var n=e+" (";return t.ctrl&&(n+="Ctrl + "),t.shift&&(n+="Shift + "),t.alt&&(n+="Alt + "),n+=t.key+")",n}if(!b)return;var s=this,o,u,c=n.ui.editor;i.fn.init.call(s,t,r),s.tools=a({},n.ui.Editor.fn._tools),s.options=a({},s.options,r),t=e(t),t.closest("form").on("submit"+f,function(){s.update()});for(var h in s.tools)s.tools[h].name=h.toLowerCase();s.textarea=t.attr("autocomplete","off")[0],o=s.wrapper=v(t),s.textarea.id&&o.find(".k-editor-toolbar").attr("aria-controls",s.textarea.id),m(s,s.options.tools),g(s),s.keyboard=new c.Keyboard([new c.TypingHandler(s),new c.SystemHandler(s)]),s.clipboard=new c.Clipboard(this),s.pendingFormats=new c.PendingFormats(this),s.undoRedoStack=new c.UndoRedoStack,r&&r.value?u=r.value:u=t.val().replace(/[\r\n\v\f\t ]+/ig," "),s.value(u);var E=".k-editor-toolbar > li > *, .k-editor-toolbar > li select",S=".k-editor-button .k-tool-icon",x=S+":not(.k-state-disabled)",T=S+".k-state-disabled";o.find(".k-combobox .k-input").keydown(function(t){var n=e(this).closest(".k-combobox").data("kendoComboBox"),r=t.keyCode;r==l.RIGHT||r==l.LEFT?n.close():r==l.DOWN&&(n.dropDown.isOpened()||(t.stopImmediatePropagation(),n.open()))}),o.on("mouseenter"+f,x,function(){e(this).addClass("k-state-hover")}).on("mouseleave"+f,x,function(){e(this).removeClass("k-state-hover")}).on("mousedown"+f,S,!1).on("keydown"+f,d,function(t){var n=e(this).closest("li"),r="li:has("+d+")",i,o=t.keyCode;if(o==l.RIGHT)i=n.nextAll(r).first().find(d);else if(o==l.LEFT)i=n.prevAll(r).first().find(d);else if(o==l.ESC)i=s;else if(o==l.TAB&&!t.ctrlKey&&!t.altKey)if(t.shiftKey){i=n.prevAll(r).first().find(d);if(!i.length)return;t.preventDefault()}else t.preventDefault(),i=n.nextAll(r).first().find(d),i.length||(i=s);i&&i.focus()}).on("click"+f,x,function(e){e.preventDefault(),e.stopPropagation(),s.exec(p(this))}).on("click"+f,T,function(e){e.preventDefault()}).find(E).each(function(){var t=p(this),n=s.options,r=n.tools[t],i=n.messages[t],o=e(this);if(!r)return;if(t=="fontSize"||t=="fontName"){var u=n.messages[t+"Inherit"]||y[t+"Inherit"];o.find("input").val(u).end().find("span.k-input").text(u).end()}r.initialize(o,{title:w(i,r),editor:s})}),s.bind("select",function(){var t=s.getRange(),n=c.RangeUtils.textNodes(t);n.length||(n=[t.startContainer]),o.find(E).each(function(){var t=s.options.tools[p(this)];t&&t.update(e(this),n,s.pendingFormats)})}),s._DOMNodeInsertedHandler=function(e){s._DOMNodeInserted(e)},s._endTypingHandler=function(){s._endTyping()},e(document).on("DOMNodeInserted",s._DOMNodeInsertedHandler).on("mousedown",s._endTypingHandler),n.notify(s)},_endTyping:function(){var e=this;try{e.keyboard.isTypingInProgress()&&e.keyboard.endTyping(!0),e.selectionRestorePoint||(e.selectionRestorePoint=new n.ui.editor.RestorePoint(e.getRange()))}catch(t){}},_DOMNodeInserted:function(t){var n=this,r=n.wrapper;if(e.contains(t.target,r[0])||r[0]==t.target)n.textarea.value=n.value(),r.find("iframe").remove(),g(n),n.value(n.textarea.value)},events:["select","change","execute","error","paste","keydown","keyup"],options:{name:"Editor",messages:y,formats:{},encoded:!0,stylesheets:[],dialogOptions:{modal:!0,resizable:!1,draggable:!0,animation:!1},fontName:[{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:"'Courier New',Courier,monospace"},{text:"Georgia",value:"Georgia,serif"},{text:"Impact",value:"Impact,Charcoal,sans-serif"},{text:"Lucida Console",value:"'Lucida Console',Monaco,monospace"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:"'Times New Roman',Times,serif"},{text:"Trebuchet MS",value:"'Trebuchet MS',Helvetica,sans-serif"},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}],fontSize:[{text:"1 (8pt)",value:"xx-small"},{text:"2 (10pt)",value:"x-small"},{text:"3 (12pt)",value:"small"},{text:"4 (14pt)",value:"medium"},{text:"5 (18pt)",value:"large"},{text:"6 (24pt)",value:"x-large"},{text:"7 (36pt)",value:"xx-large"}],formatBlock:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}],tools:["bold","italic","underline","strikethrough","fontName","fontSize","foreColor","backColor","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","formatBlock","createLink","unlink","insertImage"]},destroy:function(){var t=this;i.fn.destroy.call(t),e(t.window).add(t.document).add(t.wrapper).add(t.element.closest("form")).off(f),e(document).off("DOMNodeInserted",t._DOMNodeInsertedHandler).off("mousedown",t._endTypingHandler),n.destroy(t.wrapper)},_nativeTools:["insertLineBreak","insertParagraph","redo","undo","insertHtml"],_tools:{undo:{options:{key:"Z",ctrl:!0}},redo:{options:{key:"Y",ctrl:!0}}},tools:{},value:function(r){var i=this.body,s=n.ui.editor.Dom,u=n.ui.editor.Serializer.domToXhtml(i);if(r===t)return u;if(r==u)return;this.pendingFormats.clear(),r=(r||"").replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->").replace(/<script([^>]*)>(.*)?<\/script>/ig,"<telerik:script $1>$2</telerik:script>").replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/ig,"$1"),o.msie||(r=r.replace(/<p([^>]*)>(\s*)?<\/p>/ig,'<p $1><br _moz_dirty="" /></p>'));if(o.msie&&parseInt(o.version,10)<9){r="<br/>"+r;var a="originalsrc",f="originalhref";r=r.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,f+'="$1"'),r=r.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,a+'="$1"'),i.innerHTML=r,s.remove(i.firstChild),e(i).find("telerik\\:script,script,link,img,a").each(function(){var e=this;e[f]&&(e.setAttribute("href",e[f]),e.removeAttribute(f)),e[a]&&(e.setAttribute("src",e[a]),e.removeAttribute(a))})}else i.innerHTML=r,o.msie&&(s.normalize(i),setTimeout(function(){var e=i.getElementsByTagName("ol"),t,n,r;for(t=0;t<e.length;t++)n=e[t],r=n.getAttribute("start"),n.setAttribute("start",1),r?n.setAttribute("start",r):n.removeAttribute(r)},1));this.selectionRestorePoint=null,this.update()},focus:function(){this.window.focus()},update:function(e){this.textarea.value=e||this.options.encoded?this.encodedValue():this.value()},encodedValue:function(){return n.ui.editor.Dom.encode(this.value())},createRange:function(e){return n.ui.editor.RangeUtils.createRange(e||this.document)},getSelection:function(){return n.ui.editor.SelectionUtils.selectionFromDocument(this.document)},selectRange:function(e){this.focus();var t=this.getSelection();t.removeAllRanges(),t.addRange(e)},getRange:function(){var e=this.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):this.createRange(),n=this.document;return t.startContainer==n&&t.endContainer==n&&!t.startOffset&&!t.endOffset&&(t.setStart(this.body,0),t.collapse(!0)),t},selectedHtml:function(){return n.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents())},paste:function(e){this.clipboard.paste(e)},exec:function(t,n){var r=this,i,s,o,a="",f;t=t.toLowerCase(),r.keyboard.isTypingInProgress()||(r.focus(),i=r.getRange(),s=r.document.body);for(o in r.options.tools)if(o.toLowerCase()==t){a=r.options.tools[o];break}if(a){i=r.getRange();if(!/undo|redo/i.test(t)&&a.willDelayExecution(i)){f=e.extend({},a),e.extend(f.options,{params:n}),r.pendingFormats.toggle(f),p(r);return}var l=a.command?a.command(u({range:i},n)):null;r.trigger("execute",{name:t,command:l});if(/undo|redo/i.test(t))r.undoRedoStack[t]();else if(l){l.managesUndoRedo||r.undoRedoStack.push(l),l.editor=r,l.exec();if(l.async){l.change=e.proxy(function(){p(r)},r);return}}p(r)}}});n.ui.plugin(w);var E=r.extend({init:function(e){this.options=e},initialize:function(e,t){e.attr({unselectable:"on",title:t.title})},command:function(e){return new this.options.command(e)},update:function(){},willDelayExecution:function(){return!1}});E.exec=function(e,t,n){e.exec(t,{value:n})};var S=E.extend({init:function(e){E.fn.init.call(this,e)},command:function(e){var t=this;return new n.ui.editor.FormatCommand(u(e,{formatter:t.options.formatter}))},update:function(e,t,n){var r=n.isPending(this.name),i=this.options.finder.isFormatted(t),s=r?!i:i;e.toggleClass("k-state-active",s),e.attr("aria-pressed",s)}});h.registerTool("separator",new E({template:new c({template:h.separatorTemplate})})),u(n.ui,{editor:{ToolTemplate:c,EditorUtils:h,Tool:E,FormatTool:S}})})(jQuery),function(e){function c(e){var t={},n,r;for(n=0,r=e.length;n<r;n++)t[e[n]]=!0;return t}var t=window.kendo,n=e.map,r=e.extend,i=t.support.browser,s="style",o="float",u="cssFloat",a="styleFloat",f="class",l="k-marker",h=c("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(",")),p="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,pre,script,table,tbody,td,tfoot,th,thead,tr,ul".split(","),d=c(p),v="span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var".split(","),m=c(v),g=c("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(",")),y=function(e){e.nodeType==1&&e.normalize()};i.msie&&parseInt(i.version,10)>=8&&(y=function(e){if(e.nodeType==1&&e.firstChild){var t=e.firstChild,n=t;for(;;){n=n.nextSibling;if(!n)break;n.nodeType==3&&t.nodeType==3&&(n.nodeValue=t.nodeValue+n.nodeValue,k.remove(t)),t=n}}});var b=/^\s+$/,w=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i,E=/&/g,S=/</g,x=/>/g,T=/\u00a0/g,N=/\ufeff/g,C="color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height".split(","),k={findNodeIndex:function(e){var t=0;for(;;){e=e.previousSibling;if(!e)break;t++}return t},isDataNode:function(e){return e&&e.nodeValue!==null&&e.data!==null},isAncestorOf:function(t,n){try{return!k.isDataNode(t)&&(e.contains(t,k.isDataNode(n)?n.parentNode:n)||n.parentNode==t)}catch(r){return!1}},isAncestorOrSelf:function(e,t){return k.isAncestorOf(e,t)||e==t},findClosestAncestor:function(e,t){if(k.isAncestorOf(e,t))while(t&&t.parentNode!=e)t=t.parentNode;return t},getNodeLength:function(e){return k.isDataNode(e)?e.length:e.childNodes.length},splitDataNode:function(e,t){var n=e.cloneNode(!1),r="",i=e;while(i.nextSibling&&i.nextSibling.nodeType==3&&i.nextSibling.nodeValue)r+=i.nextSibling.nodeValue,i=i.nextSibling;e.deleteData(t,e.length),n.deleteData(0,t),n.nodeValue+=r,k.insertAfter(n,e)},attrEquals:function(t,n){for(var r in n){var i=t[r];r==o&&(i=t[e.support.cssFloat?u:a]);if(typeof i=="object"){if(!k.attrEquals(i,n[r]))return!1}else if(i!=n[r])return!1}return!0},blockParentOrBody:function(e){return k.parentOfType(e,p)||e.ownerDocument.body},blockParents:function(t){var n=[],r,i;for(r=0,i=t.length;r<i;r++){var s=k.parentOfType(t[r],k.blockElements);s&&e.inArray(s,n)<0&&n.push(s)}return n},windowFromDocument:function(e){return e.defaultView||e.parentWindow},normalize:y,blockElements:p,inlineElements:v,empty:h,fillAttrs:g,toHex:function(e){var t=w.exec(e);return t?"#"+n(t.slice(1),function(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}).join(""):e},encode:function(e){return e.replace(E,"&amp;").replace(S,"&lt;").replace(x,"&gt;").replace(T,"&nbsp;")},name:function(e){return e.nodeName.toLowerCase()},significantChildNodes:function(t){return e.grep(t.childNodes,function(e){return e.nodeType!=3||!k.isWhitespace(e)})},lastTextNode:function(e){var t=null;if(e.nodeType==3)return e;for(var n=e.lastChild;n;n=n.previousSibling){t=k.lastTextNode(n);if(t)return t}return t},is:function(e,t){return k.name(e)==t},isMarker:function(e){return e.className==l},isWhitespace:function(e){return b.test(e.nodeValue)},isBlock:function(e){return d[k.name(e)]},isEmpty:function(e){return h[k.name(e)]},isInline:function(e){return m[k.name(e)]},scrollTo:function(t){var n=t.ownerDocument.body,r=e(k.isDataNode(t)?t.parentNode:t),i=k.windowFromDocument(t.ownerDocument).innerHeight,s,o;k.name(r[0])=="br"&&(r=r.parent()),s=r.offset().top,o=r[0].offsetHeight,o+s>n.scrollTop+i&&(n.scrollTop=o+s-i)},insertAt:function(e,t,n){e.insertBefore(t,e.childNodes[n]||null)},insertBefore:function(e,t){return t.parentNode?t.parentNode.insertBefore(e,t):t},insertAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling)},remove:function(e){e.parentNode.removeChild(e)},trim:function(e){for(var t=e.childNodes.length-1;t>=0;t--){var n=e.childNodes[t];k.isDataNode(n)?(n.nodeValue.replace(N,"").length||k.remove(n),k.isWhitespace(n)&&k.insertBefore(n,e)):n.className!=l&&(k.trim(n),!n.childNodes.length&&!k.isEmpty(n)&&k.remove(n))}return e},parentOfType:function(e,t){do e=e.parentNode;while(e&&!k.ofType(e,t));return e},ofType:function(t,n){return e.inArray(k.name(t),n)>=0},changeTag:function(e,t){var n=k.create(e.ownerDocument,t),r=e.attributes,i,o,u,a,l;for(i=0,o=r.length;i<o;i++)l=r[i],l.specified&&(u=l.nodeName,a=l.nodeValue,u==f?n.className=a:u==s?n.style.cssText=e.style.cssText:n.setAttribute(u,a));while(e.firstChild)n.appendChild(e.firstChild);return k.insertBefore(n,e),k.remove(e),n},wrap:function(e,t){return k.insertBefore(t,e),t.appendChild(e),t},unwrap:function(e){var t=e.parentNode;while(e.firstChild)t.insertBefore(e.firstChild,e);t.removeChild(e)},create:function(e,t,n){return k.attr(e.createElement(t),n)},attr:function(e,t){return t=r({},t),t&&s in t&&(k.style(e,t.style),delete t.style),r(e,t)},style:function(t,n){e(t).css(n||{})},unstyle:function(t,n){for(var r in n)r==o&&(r=e.support.cssFloat?u:a),t.style[r]="";t.style.cssText===""&&t.removeAttribute(s)},inlineStyle:function(t,r,s){var o=e(k.create(t,r,s)),u;return t.body.appendChild(o[0]),u=n(C,function(e){return i.msie&&e=="line-height"&&o.css(e)=="1px"?"line-height:1.5":e+":"+o.css(e)}).join(";"),o.remove(),u},removeClass:function(t,n){var r=" "+t.className+" ",i=n.split(" "),s,o;for(s=0,o=i.length;s<o;s++)r=r.replace(" "+i[s]+" "," ");r=e.trim(r),r.length?t.className=r:t.removeAttribute(f)},commonAncestor:function(){var e=arguments.length,t=[],n=Infinity,r=null,i,s,o,u,a;if(!e)return null;if(e==1)return arguments[0];for(i=0;i<e;i++){s=[],o=arguments[i];while(o)s.push(o),o=o.parentNode;t.push(s.reverse()),n=Math.min(n,s.length)}if(e==1)return t[0][0];for(i=0;i<n;i++){u=t[0][i];for(a=1;a<e;a++)if(u!=t[a][i])return r;r=u}return r}};t.ui.editor.Dom=k}(jQuery),function(e,t){var n=window.kendo,r=n.ui.editor,i=r.Dom,s=e.extend,o="xx-small,x-small,small,medium,large,x-large,xx-large".split(","),u=/"/g,a=/<br[^>]*>/i,f=/<p><\/p>/i,l={domToXhtml:function(n){function l(n){var s=[],o=n.attributes,a,f,l,c=e.trim;if(i.is(n,"img")){var h=n.style.width,p=n.style.height,d=e(n);h&&(d.attr("width",parseInt(h,10)),i.unstyle(n,{width:t})),p&&(d.attr("height",parseInt(p,10)),i.unstyle(n,{height:t}))}for(f=0,l=o.length;f<l;f++){a=o[f];var v=a.nodeName;(a.specified||v=="value"&&!n.value||v=="type"&&a.nodeValue=="text")&&v.indexOf("_moz")<0&&v!="complete"&&v!="altHtml"&&s.push(a)}if(!s.length)return;s.sort(function(e,t){return e.nodeName>t.nodeName?1:e.nodeName<t.nodeName?-1:0});for(f=0,l=s.length;f<l;f++){a=s[f];var m=a.nodeName,g=a.nodeValue;r.push(" "),r.push(m),r.push('="');if(m=="style"){var y=c(g||n.style.cssText).split(";");for(var b=0,w=y.length;b<w;b++){var E=y[b];if(E.length){var S=E.split(":"),x=c(S[0].toLowerCase()),T=c(S[1]);if(x=="font-size-adjust"||x=="font-stretch")continue;x.indexOf("color")>=0&&(T=i.toHex(T)),x.indexOf("font")>=0&&(T=T.replace(u,"'")),r.push(x),r.push(":"),r.push(T),r.push(";")}}}else m=="src"||m=="href"?r.push(n.getAttribute(m,2)):r.push(i.fillAttrs[m]?m:g);r.push('"')}}function c(e,t){for(var n=e.firstChild;n;n=n.nextSibling)h(n,t)}function h(t,n){var o=t.nodeType,u,a,f,h,p;if(o==1){u=i.name(t);if(!u||t.attributes._moz_dirty&&i.is(t,"br")||t.className=="k-marker")return;a=s[u];if(a){a.start(t),c(t),a.end(t);return}r.push("<"),r.push(u),l(t),i.empty[u]?r.push(" />"):(r.push(">"),c(t,n||i.is(t,"pre")),r.push("</"),r.push(u),r.push(">"))}else if(o==3){h=t.nodeValue;if(!n&&e.support.leadingWhitespace){f=t.parentNode,p=t.previousSibling,p||(p=(i.isInline(f)?f:t).previousSibling);if(!p||p.innerHTML===""||i.isBlock(p))h=h.replace(/^[\r\n\v\f\t ]+/,"");h=h.replace(/ +/," ")}r.push(i.encode(h))}else o==4?(r.push("<![CDATA["),r.push(t.data),r.push("]]>")):o==8&&(t.data.indexOf("[CDATA[")<0?(r.push("<!--"),r.push(t.data),r.push("-->")):(r.push("<!"),r.push(t.data),r.push(">")))}var r=[],s={"telerik:script":{start:function(e){r.push("<script"),l(e),r.push(">")},end:function(){r.push("</script>")}},b:{start:function(){r.push("<strong>")},end:function(){r.push("</strong>")}},i:{start:function(){r.push("<em>")},end:function(){r.push("</em>")}},u:{start:function(){r.push('<span style="text-decoration:underline;">')},end:function(){r.push("</span>")}},iframe:{start:function(e){r.push("<iframe"),l(e),r.push(">")},end:function(){r.push("</iframe>")}},font:{start:function(e){r.push('<span style="');var t=e.getAttribute("color"),n=o[e.getAttribute("size")],s=e.getAttribute("face");t&&(r.push("color:"),r.push(i.toHex(t)),r.push(";")),s&&(r.push("font-face:"),r.push(s),r.push(";")),n&&(r.push("font-size:"),r.push(n),r.push(";")),r.push('">')},end:function(e){r.push("</span>")}}};return c(n),r=r.join(""),r.replace(a,"").replace(f,"")===""?"":r}};s(r,{Serializer:l})}(jQuery),function(e){function d(e,t,n,r){if(e==t)return r-n;var i=t;while(i&&i.parentNode!=e)i=i.parentNode;if(i)return u(i)-n;i=e;while(i&&i.parentNode!=t)i=i.parentNode;if(i)return r-u(i)-1;var s=o.commonAncestor(e,t),a=e;while(a&&a.parentNode!=s)a=a.parentNode;a||(a=s);var f=t;while(f&&f.parentNode!=s)f=f.parentNode;return f||(f=s),a==f?0:u(f)-u(a)}function v(e,t){function n(e){try{return d(e.startContainer,e.endContainer,e.startOffset,e.endOffset)<0}catch(t){return!0}}n(e)&&(t?(e.commonAncestorContainer=e.endContainer=e.startContainer,e.endOffset=e.startOffset):(e.commonAncestorContainer=e.startContainer=e.endContainer,e.startOffset=e.endOffset),e.collapsed=!0)}function m(e){e.collapsed=e.startContainer==e.endContainer&&e.startOffset==e.endOffset;var t=e.startContainer;while(t&&t!=e.endContainer&&!o.isAncestorOf(t,e.endContainer))t=t.parentNode;e.commonAncestorContainer=t}function b(e,t,n){var r=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"],s=0,u=a(r)?r:r.childNodes[i]||null,f=a(r)?r.parentNode:r;if(r.nodeType==3||r.nodeType==4)s=i;var l=f.insertBefore(o.create(t.ownerDocument,"a"),u),c=t.ownerDocument.body.createTextRange();c.moveToElementText(l),o.remove(l),c[n?"moveStart":"moveEnd"]("character",s),c.collapse(!1),e.setEndPoint(n?"StartToStart":"EndToStart",c)}function w(e,t,n){var r=o.create(t.ownerDocument,"a"),i=e.duplicate();i.collapse(n);var s=i.parentElement();do s.insertBefore(r,r.previousSibling),i.moveToElementText(r);while(i.compareEndPoints(n?"StartToStart":"StartToEnd",e)>0&&r.previousSibling);i.setEndPoint(n?"EndToStart":"EndToEnd",e);var u=r.nextSibling;if(!u){u=r.previousSibling,u&&a(u)?(t.setEnd(u,u.nodeValue.length),o.remove(r)):(t.selectNodeContents(s),o.remove(r),t.endOffset-=1);return}o.remove(r),a(u)?t[n?"setStart":"setEnd"](u,i.text.length):t[n?"setStartBefore":"setEndBefore"](u)}var t=window.kendo,n=t.Class,r=e.extend,i=t.ui.editor,s=t.support.browser,o=i.Dom,u=o.findNodeIndex,a=o.isDataNode,f=o.findClosestAncestor,l=o.getNodeLength,c=o.normalize,h={selectionFromWindow:function(e){return s.msie&&s.version<9?new y(e.document):e.getSelection()},selectionFromRange:function(e){var t=N.documentFromRange(e);return h.selectionFromDocument(t)},selectionFromDocument:function(e){return h.selectionFromWindow(o.windowFromDocument(e))}},p=n.extend({init:function(t){e.extend(this,{ownerDocument:t,startContainer:t,endContainer:t,commonAncestorContainer:t,startOffset:0,endOffset:0,collapsed:!0})},setStart:function(e,t){this.startContainer=e,this.startOffset=t,m(this),v(this,!0)},setEnd:function(e,t){this.endContainer=e,this.endOffset=t,m(this),v(this,!1)},setStartBefore:function(e){this.setStart(e.parentNode,u(e))},setStartAfter:function(e){this.setStart(e.parentNode,u(e)+1)},setEndBefore:function(e){this.setEnd(e.parentNode,u(e))},setEndAfter:function(e){this.setEnd(e.parentNode,u(e)+1)},selectNode:function(e){this.setStartBefore(e),this.setEndAfter(e)},selectNodeContents:function(e){this.setStart(e,0),this.setEnd(e,e[e.nodeType===1?"childNodes":"nodeValue"].length)},collapse:function(e){var t=this;e?t.setEnd(t.startContainer,t.startOffset):t.setStart(t.endContainer,t.endOffset)},deleteContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(f(e.commonAncestorContainer,e.startContainer)),e.collapse(!0),function n(e){while(e.next())e.hasPartialSubtree()?n(e.getSubtreeIterator()):e.remove()}(new g(t))},cloneContents:function(){var e=N.documentFromRange(this);return function t(n){var r,i=e.createDocumentFragment();while(r=n.next())r=r.cloneNode(!n.hasPartialSubtree()),n.hasPartialSubtree()&&r.appendChild(t(n.getSubtreeIterator())),i.appendChild(r);return i}(new g(this))},extractContents:function(){var e=this,t=e.cloneRange();e.startContainer!=e.commonAncestorContainer&&e.setStartAfter(f(e.commonAncestorContainer,e.startContainer)),e.collapse(!0);var n=N.documentFromRange(e);return function r(t){var i,s=n.createDocumentFragment();while(i=t.next())t.hasPartialSubtree()?(i=i.cloneNode(!1),i.appendChild(r(t.getSubtreeIterator()))):t.remove(e.originalRange),s.appendChild(i);return s}(new g(t))},insertNode:function(e){var t=this;a(t.startContainer)?(t.startOffset!=t.startContainer.nodeValue.length&&o.splitDataNode(t.startContainer,t.startOffset),o.insertAfter(e,t.startContainer)):o.insertAt(t.startContainer,e,t.startOffset),t.setStart(t.startContainer,t.startOffset)},cloneRange:function(){return e.extend(new p(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var e=this.startContainer.nodeName,t=this.endContainer.nodeName;return[e=="#text"?this.startContainer.nodeValue:e,"(",this.startOffset,") : ",t=="#text"?this.endContainer.nodeValue:t,"(",this.endOffset,")"].join("")}}),g=n.extend({init:function(t){e.extend(this,{range:t,_current:null,_next:null,_end:null});if(t.collapsed)return;var n=t.commonAncestorContainer;this._next=t.startContainer==n&&!a(t.startContainer)?t.startContainer.childNodes[t.startOffset]:f(n,t.startContainer),this._end=t.endContainer==n&&!a(t.endContainer)?t.endContainer.childNodes[t.endOffset]:f(n,t.endContainer).nextSibling},hasNext:function(){return!!this._next},next:function(){var e=this,t=e._current=e._next;return e._next=e._current&&e._current.nextSibling!=e._end?e._current.nextSibling:null,a(e._current)&&(e.range.endContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(e.range.endOffset,t.length-e.range.endOffset)),e.range.startContainer==e._current&&(t=t.cloneNode(!0),t.deleteData(0,e.range.startOffset))),t},traverse:function(e){function r(){return t._current=t._next,t._next=t._current&&t._current.nextSibling!=t._end?t._current.nextSibling:null,t._current}var t=this,n;while(n=r())t.hasPartialSubtree()?t.getSubtreeIterator().traverse(e):e(n);return n},remove:function(e){var t=this,n=t.range.startContainer==t._current,r=t.range.endContainer==t._current,i,s,f;if(a(t._current)&&(n||r))i=n?t.range.startOffset:0,s=r?t.range.endOffset:t._current.length,f=s-i,e&&(n||r)&&(t._current==e.startContainer&&i<=e.startOffset&&(e.startOffset-=f),t._current==e.endContainer&&s<=e.endOffset&&(e.endOffset-=f)),t._current.deleteData(i,f);else{var l=t._current.parentNode;if(e&&(t.range.startContainer==l||t.range.endContainer==l)){var c=u(t._current);l==e.startContainer&&c<=e.startOffset&&(e.startOffset-=1),l==e.endContainer&&c<e.endOffset&&(e.endOffset-=1)}o.remove(t._current)}},hasPartialSubtree:function(){return!a(this._current)&&(o.isAncestorOrSelf(this._current,this.range.startContainer)||o.isAncestorOrSelf(this._current,this.range.endContainer))},getSubtreeIterator:function(){var e=this,t=e.range.cloneRange();return t.selectNodeContents(e._current),o.isAncestorOrSelf(e._current,e.range.startContainer)&&t.setStart(e.range.startContainer,e.range.startOffset),o.isAncestorOrSelf(e._current,e.range.endContainer)&&t.setEnd(e.range.endContainer,e.range.endOffset),new g(t)}}),y=n.extend({init:function(e){this.ownerDocument=e,this.rangeCount=1},addRange:function(e){var t=this.ownerDocument.body.createTextRange();b(t,e,!1),b(t,e,!0),t.select()},removeAllRanges:function(){this.ownerDocument.selection
.empty()},getRangeAt:function(){var e,t=new p(this.ownerDocument),n=this.ownerDocument.selection,r;try{e=n.createRange(),r=e.item?e.item(0):e.parentElement();if(r.ownerDocument!=this.ownerDocument)return t}catch(i){return t}if(n.type=="Control")t.selectNode(e.item(0));else{w(e,t,!0),w(e,t,!1),t.startContainer.nodeType==9&&t.setStart(t.endContainer,t.startOffset),t.endContainer.nodeType==9&&t.setEnd(t.startContainer,t.endOffset),e.compareEndPoints("StartToEnd",e)===0&&t.collapse(!1);var s=t.startContainer,o=t.endContainer,f=this.ownerDocument.body;if(!t.collapsed&&t.startOffset===0&&t.endOffset==l(t.endContainer)&&(s!=o||!a(s)||s.parentNode!=f)){var c=!1,h=!1;while(u(s)===0&&s==s.parentNode.firstChild&&s!=f)s=s.parentNode,c=!0;while(u(o)==l(o.parentNode)-1&&o==o.parentNode.lastChild&&o!=f)o=o.parentNode,h=!0;s==f&&o==f&&c&&h&&(t.setStart(s,0),t.setEnd(o,l(f)))}}return t}}),E=n.extend({init:function(e){this.enumerate=function(){function n(e){if(o.is(e,"img")||e.nodeType==3&&!o.isWhitespace(e))t.push(e);else{e=e.firstChild;while(e)n(e),e=e.nextSibling}}var t=[];return(new g(e)).traverse(n),t}}}),S=n.extend({init:function(e){var t=this;t.range=e,t.rootNode=N.documentFromRange(e),t.body=t.rootNode.body,t.html=t.body.innerHTML,t.startContainer=t.nodeToPath(e.startContainer),t.endContainer=t.nodeToPath(e.endContainer),t.startOffset=t.offset(e.startContainer,e.startOffset),t.endOffset=t.offset(e.endContainer,e.endOffset)},index:function(e){var t=0,n=e.nodeType;while(e=e.previousSibling){var r=e.nodeType;(r!=3||n!=r)&&t++,n=r}return t},offset:function(e,t){if(e.nodeType==3)while((e=e.previousSibling)&&e.nodeType==3)t+=e.nodeValue.length;return t},nodeToPath:function(e){var t=[];while(e!=this.rootNode)t.push(this.index(e)),e=e.parentNode;return t},toRangePoint:function(e,t,n,r){var i=this.rootNode,s=n.length,o=r;while(s--)i=i.childNodes[n[s]];while(i.nodeType==3&&i.nodeValue.length<o)o-=i.nodeValue.length,i=i.nextSibling;e[t?"setStart":"setEnd"](i,o)},toRange:function(){var e=this,t=e.range.cloneRange();return e.toRangePoint(t,!0,e.startContainer,e.startOffset),e.toRangePoint(t,!1,e.endContainer,e.endOffset),t}}),x=n.extend({init:function(){this.caret=null},addCaret:function(e){var t=this;return t.caret=o.create(N.documentFromRange(e),"span",{className:"k-marker"}),e.insertNode(t.caret),e.selectNode(t.caret),t.caret},removeCaret:function(e){var t=this,n=t.caret.previousSibling,r=0;n&&(r=a(n)?n.nodeValue.length:u(n));var i=t.caret.parentNode,f=n?u(n):0;o.remove(t.caret),c(i);var l=i.childNodes[f];if(a(l))e.setStart(l,r);else if(l){var h=o.lastTextNode(l);h?e.setStart(h,h.nodeValue.length):e[n?"setStartAfter":"setStartBefore"](l)}else!s.msie&&!i.innerHTML&&(i.innerHTML='<br _moz_dirty="" />'),e.selectNodeContents(i);e.collapse(!0)},add:function(e,t){var n=this;t&&e.collapsed&&(n.addCaret(e),e=N.expand(e));var r=e.cloneRange();return r.collapse(!1),n.end=o.create(N.documentFromRange(e),"span",{className:"k-marker"}),r.insertNode(n.end),r=e.cloneRange(),r.collapse(!0),n.start=n.end.cloneNode(!0),r.insertNode(n.start),e.setStartBefore(n.start),e.setEndAfter(n.end),c(e.commonAncestorContainer),e},remove:function(e){var t=this,n=t.start,r=t.end,i,s,f;c(e.commonAncestorContainer);while(!n.nextSibling&&n.parentNode)n=n.parentNode;while(!r.previousSibling&&r.parentNode)r=r.parentNode;i=n.previousSibling&&n.previousSibling.nodeType==3&&n.nextSibling&&n.nextSibling.nodeType==3,s=r.previousSibling&&r.previousSibling.nodeType==3&&r.nextSibling&&r.nextSibling.nodeType==3,f=i&&s,n=n.nextSibling,r=r.previousSibling;var l=!1,h=!1;n==t.end&&(h=!!t.start.previousSibling,n=r=t.start.previousSibling||t.end.nextSibling,l=!0),o.remove(t.start),o.remove(t.end);if(!n||!r){e.selectNodeContents(e.commonAncestorContainer),e.collapse(!0);return}var p=l?a(n)?n.nodeValue.length:n.childNodes.length:0,d=a(r)?r.nodeValue.length:r.childNodes.length;if(n.nodeType==3)while(n.previousSibling&&n.previousSibling.nodeType==3)n=n.previousSibling,p+=n.nodeValue.length;if(r.nodeType==3)while(r.previousSibling&&r.previousSibling.nodeType==3)r=r.previousSibling,d+=r.nodeValue.length;var v=u(n),m=n.parentNode,g=u(r),y=r.parentNode;for(var b=n;b.previousSibling;b=b.previousSibling)b.nodeType==3&&b.previousSibling.nodeType==3&&v--;for(var w=r;w.previousSibling;w=w.previousSibling)w.nodeType==3&&w.previousSibling.nodeType==3&&g--;c(m),n.nodeType==3&&(n=m.childNodes[v]),c(y),r.nodeType==3&&(r=y.childNodes[g]),l?(n.nodeType==3?e.setStart(n,p):e[h?"setStartAfter":"setStartBefore"](n),e.collapse(!0)):(n.nodeType==3?e.setStart(n,p):e.setStartBefore(n),r.nodeType==3?e.setEnd(r,d):e.setEndAfter(r)),t.caret&&t.removeCaret(e)}}),T=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/,N={nodes:function(e){var t=N.textNodes(e);return t.length||(e.selectNodeContents(e.commonAncestorContainer),t=N.textNodes(e),t.length||(t=o.significantChildNodes(e.commonAncestorContainer))),t},textNodes:function(e){return(new E(e)).enumerate()},documentFromRange:function(e){var t=e.startContainer;return t.nodeType==9?t:t.ownerDocument},createRange:function(e){return s.msie&&s.version<9?new p(e):e.createRange()},selectRange:function(e){var t=N.image(e);t&&(e.setStartAfter(t),e.setEndAfter(t));var n=h.selectionFromRange(e);n.removeAllRanges(),n.addRange(e)},split:function(e,t,n){function r(r){var i=e.cloneRange();i.collapse(r),i[r?"setStartBefore":"setEndAfter"](t);var s=i.extractContents();n&&(s=o.trim(s)),o[r?"insertBefore":"insertAfter"](s,t)}r(!0),r(!1)},getMarkers:function(e){var t=[];return(new g(e)).traverse(function(e){e.className=="k-marker"&&t.push(e)}),t},image:function(e){var t=[];(new g(e)).traverse(function(e){o.is(e,"img")&&t.push(e)});if(t.length==1)return t[0]},expand:function(e){var t=e.cloneRange(),n=t.startContainer.childNodes[t.startOffset===0?0:t.startOffset-1],r=t.endContainer.childNodes[t.endOffset];if(!a(n)||!a(r))return t;var i=n.nodeValue,s=r.nodeValue;if(!i||!s)return t;var o=i.split("").reverse().join("").search(T),u=s.search(T);return!o||!u?t:(u=u==-1?s.length:u,o=o==-1?0:i.length-o,t.setStart(n,o),t.setEnd(r,u),t)},isExpandable:function(e){var t=e.startContainer,n=N.documentFromRange(e);if(t==n||t==n.body)return!1;var r=e.cloneRange(),i=t.nodeValue;if(!i)return!1;var s=i.substring(0,r.startOffset),o=i.substring(r.startOffset),u=0,a=0;return s&&(u=s.split("").reverse().join("").search(T)),o&&(a=o.search(T)),u&&a}};r(i,{SelectionUtils:h,W3CRange:p,RangeIterator:g,W3CSelection:y,RangeEnumerator:E,RestorePoint:S,Marker:x,RangeUtils:N})}(jQuery),function(e){var t=window.kendo,n=t.Class,r=t.ui.editor,i=r.EditorUtils,s=i.registerTool,o=r.Dom,u=r.RangeUtils,a=u.selectRange,f=r.Tool,l=r.ToolTemplate,c=r.RestorePoint,h=r.Marker,p=e.extend,d=n.extend({init:function(e){var t=this;t.options=e,t.restorePoint=new c(e.range),t.marker=new h,t.formatter=e.formatter},getRange:function(){return this.restorePoint.toRange()},lockRange:function(e){return this.marker.add(this.getRange(),e)},releaseRange:function(e){this.marker.remove(e),a(e)},undo:function(){var e=this.restorePoint;e.body.innerHTML=e.html,a(e.toRange())},redo:function(){this.exec()},exec:function(){var e=this,t=e.lockRange(!0);e.formatter.editor=e.editor,e.formatter.toggle(t),e.releaseRange(t)}}),v=n.extend({init:function(e,t){this.body=e.body,this.startRestorePoint=e,this.endRestorePoint=t},redo:function(){this.body.innerHTML=this.endRestorePoint.html,a(this.endRestorePoint.toRange())},undo:function(){this.body.innerHTML=this.startRestorePoint.html,a(this.startRestorePoint.toRange())}}),m=d.extend({init:function(e){d.fn.init.call(this,e),this.managesUndoRedo=!0},exec:function(){var e=this.editor,t=e.getRange(),n=new c(t);e.clipboard.paste(this.options.value||""),e.undoRedoStack.push(new v(n,new c(e.getRange()))),e.focus()}}),g=f.extend({initialize:function(e,t){var n=t.editor;new r.SelectBox(e,{dataSource:n.options.insertHtml||[],dataTextField:"text",dataValueField:"value",change:function(e){f.exec(n,"insertHtml",this.value())},title:n.options.messages.insertHtml,highlightFirst:!1})},command:function(e){return new m(e)},update:function(e,t){var n=e.data("kendoSelectBox")||e.find("select").data("kendoSelectBox");n.close(),n.value(n.options.title)}}),y=n.extend({init:function(){this.stack=[],this.currentCommandIndex=-1},push:function(e){var t=this;t.stack=t.stack.slice(0,t.currentCommandIndex+1),t.currentCommandIndex=t.stack.push(e)-1},undo:function(){this.canUndo()&&this.stack[this.currentCommandIndex--].undo()},redo:function(){this.canRedo()&&this.stack[++this.currentCommandIndex].redo()},canUndo:function(){return this.currentCommandIndex>=0},canRedo:function(){return this.currentCommandIndex!=this.stack.length-1}}),b=n.extend({init:function(e){this.editor=e},keydown:function(t){var n=this,r=n.editor,i=r.keyboard,s=i.isTypingKey(t),o=p(e.Event(),t);n.editor.trigger("keydown",o),o.isDefaultPrevented()&&t.preventDefault();if(!o.isDefaultPrevented()&&s&&!i.isTypingInProgress()){var u=r.getRange();return n.startRestorePoint=new c(u),i.startTyping(function(){r.selectionRestorePoint=n.endRestorePoint=new c(r.getRange()),r.undoRedoStack.push(new v(n.startRestorePoint,n.endRestorePoint))}),!0}return!1},keyup:function(e){var t=this.editor.keyboard;return this.editor.trigger("keyup",e),t.isTypingInProgress()?(t.endTyping(),!0):!1}}),w=n.extend({init:function(e){this.editor=e,this.systemCommandIsInProgress=!1},createUndoCommand:function(){var e=this;e.endRestorePoint=new c(e.editor.getRange()),e.editor.undoRedoStack.push(new v(e.startRestorePoint,e.endRestorePoint)),e.startRestorePoint=e.endRestorePoint},changed:function(){return this.startRestorePoint?this.startRestorePoint.html!=this.editor.body.innerHTML:!1},keydown:function(e){var t=this,n=t.editor,r=n.keyboard;return r.isModifierKey(e)?(r.isTypingInProgress()&&r.endTyping(!0),t.startRestorePoint=new c(n.getRange()),!0):r.isSystem(e)?(t.systemCommandIsInProgress=!0,t.changed()&&(t.systemCommandIsInProgress=!1,t.createUndoCommand()),!0):!1},keyup:function(e){var t=this;return t.systemCommandIsInProgress&&t.changed()?(t.systemCommandIsInProgress=!1,t.createUndoCommand(e),!0):!1}}),E=n.extend({init:function(e){this.handlers=e,this.typingInProgress=!1},isCharacter:function(e){return e>=48&&e<=90||e>=96&&e<=111||e>=186&&e<=192||e>=219&&e<=222},toolFromShortcut:function(t,n){var r=String.fromCharCode(n.keyCode),i,s;for(i in t){s=e.extend({ctrl:!1,alt:!1,shift:!1},t[i].options);if((s.key==r||s.key==n.keyCode)&&s.ctrl==n.ctrlKey&&s.alt==n.altKey&&s.shift==n.shiftKey)return i}},isTypingKey:function(e){var t=e.keyCode;return this.isCharacter(t)&&!e.ctrlKey&&!e.altKey||t==32||t==13||t==8||t==46&&!e.shiftKey&&!e.ctrlKey&&!e.altKey},isModifierKey:function(e){var t=e.keyCode;return t==17&&!e.shiftKey&&!e.altKey||t==16&&!e.ctrlKey&&!e.altKey||t==18&&!e.ctrlKey&&!e.shiftKey},isSystem:function(e){return e.keyCode==46&&e.ctrlKey&&!e.altKey&&!e.shiftKey},startTyping:function(e){this.onEndTyping=e,this.typingInProgress=!0},stopTyping:function(){this.typingInProgress=!1,this.onEndTyping&&this.onEndTyping()},endTyping:function(t){var n=this;n.clearTimeout(),t?n.stopTyping():n.timeout=window.setTimeout(e.proxy(n.stopTyping,n),1e3)},isTypingInProgress:function(){return this.typingInProgress},clearTimeout:function(){window.clearTimeout(this.timeout)},notify:function(e,t){var n,r=this.handlers;for(n=0;n<r.length;n++)if(r[n][t](e))break},keydown:function(e){this.notify(e,"keydown")},keyup:function(e){this.notify(e,"keyup")}}),S=n.extend({init:function(e){this.editor=e,this.cleaners=[new x]},htmlToFragment:function(e){var t=this.editor,n=t.document,r=o.create(n,"div"),i=n.createDocumentFragment();r.innerHTML=e;while(r.firstChild)i.appendChild(r.firstChild);return i},isBlock:function(e){return/<(div|p|ul|ol|table|h[1-6])/i.test(e)},oncut:function(e){var t=this.editor,n=new c(t.getRange());setTimeout(function(){t.undoRedoStack.push(new v(n,new c(t.getRange())))})},onpaste:function(t){var n=this.editor,i=n.getRange(),s="﻿",u=new c(i),f=o.create(n.document,"div",{className:"k-paste-container",innerHTML:s});n.body.appendChild(f);if(n.body.createTextRange){t.preventDefault();var l=n.createRange();l.selectNodeContents(f),n.selectRange(l);var h=n.body.createTextRange();h.moveToElementText(f),e(n.body).unbind("paste"),h.execCommand("Paste"),e(n.body).bind("paste",e.proxy(arguments.callee,this))}else{var p=n.createRange();p.selectNodeContents(f),a(p)}setTimeout(function(){var e,t={html:""};a(i),o.remove(f),f.lastChild&&o.is(f.lastChild,"br")&&o.remove(f.lastChild),e=f.innerHTML,e!=s&&(t.html=e),n.trigger("paste",t),n.clipboard.paste(t.html,!0),n.undoRedoStack.push(new v(u,new c(n.getRange()))),r.EditorUtils.select(n)})},splittableParent:function(e,t){var n,r;if(e)return o.parentOfType(t,["p","ul","ol"])||t.parentNode;n=t.parentNode,r=t.ownerDocument.body;if(o.isInline(n))while(n.parentNode!=r&&!o.isBlock(n.parentNode))n=n.parentNode;return n},paste:function(e,t){var n=this.editor,r,i;for(r=0,i=this.cleaners.length;r<i;r++)this.cleaners[r].applicable(e)&&(e=this.cleaners[r].clean(e));t&&(e=e.replace(/(<br>(\s|&nbsp;)*)+(<\/?(div|p|li|col|t))/ig,"$3"),e=e.replace(/<(a|span)[^>]*><\/\1>/ig,"")),e=e.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var s=this.isBlock(e),f=n.getRange();f.deleteContents(),f.startContainer==n.document&&f.selectNodeContents(n.body);var l=new h,c=l.addCaret(f),p=this.splittableParent(s,c),d=!1;!/body|td/.test(o.name(p))&&(s||o.isInline(p))&&(f.selectNode(c),u.split(f,p,!0),d=!0);var v=this.htmlToFragment(e);if(v.firstChild&&v.firstChild.className==="k-paste-container"){var m=[];for(r=0,i=v.childNodes.length;r<i;r++)m.push(v.childNodes[r].innerHTML);v=this.htmlToFragment(m.join("<br />"))}f.insertNode(v),p=this.splittableParent(s,c);if(d){while(c.parentNode!=p)o.unwrap(c.parentNode);o.unwrap(c.parentNode)}o.normalize(f.commonAncestorContainer),c.style.display="inline",o.scrollTo(c),l.removeCaret(f),a(f)}}),x=n.extend({init:function(){this.replacements=[/<\?xml[^>]*>/gi,"",/<!--(.|\n)*?-->/g,"",/&quot;/g,"'",/(?:<br>&nbsp;[\s\r\n]+|<br>)*(<\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\s\r\n]+|<br>)*/g,"$1",/<br><br>/g,"<BR><BR>",/<br>/g," ",/<table([^>]*)>(\s|&nbsp;)+<t/gi,"<table$1><t",/<tr[^>]*>(\s|&nbsp;)*<\/tr>/gi,"",/<tbody[^>]*>(\s|&nbsp;)*<\/tbody>/gi,"",/<table[^>]*>(\s|&nbsp;)*<\/table>/gi,"",/<BR><BR>/g,"<br>",/^\s*(&nbsp;)+/gi,"",/(&nbsp;|<br[^>]*>)+\s*$/gi,"",/mso-[^;"]*;?/ig,"",/<(\/?)b(\s[^>]*)?>/ig,"<$1strong$2>",/<(\/?)i(\s[^>]*)?>/ig,"<$1em$2>",/<\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig,"",/style=(["|'])\s*\1/g,""]},applicable:function(e){return/class="?Mso|style="[^"]*mso-/i.test(e)},listType:function(e){if(/^[\u2022\u00b7\u00a7\u00d8o]\u00a0+/.test(e))return"ul";if(/^\s*\w+[\.\)]\u00a0{2,}/.test(e))return"ol"},lists:function(t){var n=o.create(document,"div",{innerHTML:t}),r=e(o.blockElements.join(","),n),i=-1,s,u={ul:{},ol:{}},a=n;for(var f=0;f<r.length;f++){var l=r[f];t=l.innerHTML.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," ");var c=this.listType(t);if(!c||o.name(l)!="p"){l.innerHTML?(u={ul:{},ol:{}},a=n,i=-1):o.remove(l);continue}var h=parseFloat(l.style.marginLeft||0),p=u[c][h];if(h>i||!p)p=o.create(document,c),a==n?o.insertBefore(p,l):a.appendChild(p),u[c][h]=p;if(s!=c)for(var d in u)for(var v in u[d])e.contains(p,u[d][v])&&delete u[d][v];o.remove(l.firstChild),a=o.create(document,"li",{innerHTML:l.innerHTML}),p.appendChild(a),o.remove(l),i=h,s=c}return n.innerHTML},stripEmptyAnchors:function(e){return e.replace(/<a([^>]*)>\s*<\/a>/ig,function(e,t){return!t||t.indexOf("href")<0?"":e})},clean:function(e){var t=this,n=t.replacements,r,i;for(r=0,i=n.length;r<i;r+=2)e=e.replace(n[r],n[r+1]);return e=t.stripEmptyAnchors(e),e=t.lists(e),e=e.replace(/\s+class="?[^"\s>]*"?/ig,""),e}});p(r,{Command:d,GenericCommand:v,InsertHtmlCommand:m,InsertHtmlTool:g,UndoRedoStack:y,TypingHandler:b,SystemHandler:w,Keyboard:E,Clipboard:S,MSWordFormatCleaner:x}),s("insertHtml",new g({template:new l({template:i.dropDownListTemplate,title:"Insert HTML",initialValue:"Insert HTML"})}))}(jQuery),function(e){function b(e){return e.collapsed&&!l.isExpandable(e)}var t=window.kendo,n=t.Class,r=t.ui.editor,i=t.ui.Editor.fn.options.formats,s=r.EditorUtils,o=r.Tool,u=r.ToolTemplate,a=r.FormatTool,f=r.Dom,l=r.RangeUtils,c=e.extend,h=r.EditorUtils.registerTool,p=r.EditorUtils.registerFormat,d="k-marker",v=n.extend({init:function(e){this.format=e},numberOfSiblings:function(e){var t=0,n=0,r=0,i=e.parentNode,s;for(s=i.firstChild;s;s=s.nextSibling)s!=e&&(s.className==d?r++:s.nodeType==3?t++:n++);return r>1&&i.firstChild.className==d&&i.lastChild.className==d?0:n+t},findSuitable:function(e,t){return!t&&this.numberOfSiblings(e)>0?null:f.parentOfType(e,this.format[0].tags)},findFormat:function(e){var t=this.format,n=f.attrEquals,r,i,s,o,u;for(r=0,i=t.length;r<i;r++){s=e,o=t[r].tags,u=t[r].attr;if(s&&f.ofType(s,o)&&n(s,u))return s;while(s){s=f.parentOfType(s,o);if(s&&n(s,u))return s}}return null},isFormatted:function(e){var t,n;for(t=0,n=e.length;t<n;t++)if(this.findFormat(e[t]))return!0;return!1}}),m=n.extend({init:function(e,t){var n=this;n.finder=new v(e),n.attributes=c({},e[0].attr,t),n.tag=e[0].tags[0]},wrap:function(e){return f.wrap(e,f.create(e.ownerDocument,this.tag,this.attributes))},activate:function(e,t){var n=this;n.finder.isFormatted(t)?(n.split(e),n.remove(t)):n.apply(t)},toggle:function(e){var t=l.textNodes(e);t.length>0&&this.activate(e,t)},apply:function(e){var t=this,n=[],r,i,s,o;for(r=0,i=e.length;r<i;r++)s=e[r],o=t.finder.findSuitable(s),o?f.attr(o,t.attributes):o=t.wrap(s),n.push(o);t.consolidate(n)},remove:function(e){var t=this,n,r,i;for(n=0,r=e.length;n<r;n++)i=t.finder.findFormat(e[n]),i&&(t.attributes&&t.attributes.style?(f.unstyle(i,t.attributes.style),i.style.cssText||f.unwrap(i)):f.unwrap(i))},split:function(e){var t=l.textNodes(e),n=t.length,r,i;if(n>0)for(r=0;r<n;r++)i=this.finder.findFormat(t[r]),i&&l.split(e,i,!0)},consolidate:function(e){var t,n;while(e.length>1){t=e.pop(),n=e[e.length-1],t.previousSibling&&t.previousSibling.className==d&&n.appendChild(t.previousSibling);if(t.tagName==n.tagName&&t.previousSibling==n&&t.style.cssText==n.style.cssText){while(t.firstChild)n.appendChild(t.firstChild);f.remove(t)}}}}),g=v.extend({init:function(e,t){var n=this;n.format=e,n.greedyProperty=t,v.fn.init.call(n,e)},getInlineCssValue:function(t){var n=t.attributes,r=e.trim,i,s,o,u,a,l,c,h,p,d,v,m;if(!n)return;for(i=0,s=n.length;i<s;i++){o=n[i],u=o.nodeName,a=o.nodeValue;if(o.specified&&u=="style"){l=r(a||t.style.cssText).split(";");for(h=0,p=l.length;h<p;h++){c=l[h];if(c.length){d=c.split(":"),v=r(d[0].toLowerCase()),m=r(d[1]);if(v!=this.greedyProperty)continue;return v.indexOf("color")>=0?f.toHex(m):m}}}}},getFormatInner:function(t){var n=e(f.isDataNode(t)?t.parentNode:t),r=n.parents().andSelf(),i,s,o;for(i=0,s=r.length;i<s;i++){o=this.greedyProperty=="className"?r[i].className:this.getInlineCssValue(r[i]);if(o)return o}return"inherit"},getFormat:function(e){var t=this.getFormatInner(e[0]),n,r;for(n=1,r=e.length;n<r;n++)if(t!=this.getFormatInner(e[n]))return"";return t},isFormatted:function(e){return this.getFormat(e)!==""}}),y=m.extend({init:function(e,t,n){var r=this;m.fn.init.call(r,e,t),r.greedyProperty=n,r.values=t,r.finder=new g(e,n)},activate:function(e,t){var n=this,r,i=n.greedyProperty,s="apply";n.split(e),i&&(r=i.replace(/-([a-z])/,function(e,t){return t.toUpperCase()}),n.values.style[r]=="inherit"&&(s="remove")),n[s](t)}}),w=a.extend({init:function(e){a.fn.init.call(this,c(e,{finder:new v(e.format),formatter:function(){return new m(e.format)}})),this.willDelayExecution=b}}),E=o.extend({init:function(e){var n=this;o.fn.init.call(n,e),n.type=t.support.browser.msie||t.support.touch?"kendoDropDownList":"kendoComboBox",n.format=[{tags:["span"]}],n.finder=new g(n.format,e.cssAttr)},command:function(e){var t=this.options,n=this.format,i={};return new r.FormatCommand(c(e,{formatter:function(){return i[t.domAttr]=e.value,new y(n,{style:i},t.cssAttr)}}))},willDelayExecution:b,update:function(e,t,n){var r=this,i=e.data(r.type),s=n.getPending(r.name),o=s&&s.params?s.params.value:r.finder.getFormat(t);i.close(),i.value(o)},initialize:function(e,t){var n=t.editor,r=this.options,i=r.name,s,u=[];r.defaultValue&&(u=[{text:n.options.messages[r.defaultValue[0].text],value:r.defaultValue[0].value}]),s=u.concat(r.items?r.items:n.options[i]),e[this.type]({dataTextField:"text",dataValueField:"value",dataSource:s,change:function(){o.exec(n,i,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+i).find("*").andSelf().attr("unselectable","on"),e.data(this.type).value("inherit")}}),S=o.extend({init:function(e){o.fn.init.call(this,e),this.options=e,this.format=[{tags:["span"]}]},update:function(e){e.data("kendoColorPicker").close()},command:function(e){var t=this.options,n=this.format,i={};return new r.FormatCommand(c(e,{formatter:function(){return i[t.domAttr]=e.value,new y(n,{style:i},t.cssAttr)}}))},willDelayExecution:b,initialize:function(e,n){var i=n.editor,s=this.name;e.attr("title",n.title),new r.ColorPicker(e,{value:"#000000",ariaId:i.element[0].id?t.format("{0}_{1}_cp",i.element[0].id,s):"",change:function(e){o.exec(i,s,e.value)}})}}),x=o.extend({init:function(e){var t=this;o.fn.init.call(t,e),t.format=[{tags:["span"]}],t.finder=new g(t.format,"className")},command:function(e){var t=this.format;return new r.FormatCommand(c(e,{formatter:function(){return new y(t,{className:e.value})}}))},update:function(e,t){var n=e.data("kendoSelectBox");n.close(),n.value(this.finder.getFormat(t))},initialize:function(e,t){var n=t.editor;new r.SelectBox(e,{dataTextField:"text",dataValueField:"value",dataSource:n.options.style,title:n.options.messages.style,change:function(){o.exec(n,"style",this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+this.name).find("*").andSelf().attr("unselectable","on")}});c(r,{InlineFormatFinder:v,InlineFormatter:m,GreedyInlineFormatFinder:g,GreedyInlineFormatter:y,InlineFormatTool:w,FontTool:E,ColorTool:S,StyleTool:x}),h("style",new r.StyleTool({template:new u({template:s.dropDownListTemplate,title:"Styles"})})),p("bold",[{tags:["strong"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}]),h("bold",new w({key:"B",ctrl:!0,format:i.bold,template:new u({template:s.buttonTemplate,title:"Bold"})})),p("italic",[{tags:["em"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}]),h("italic",new w({key:"I",ctrl:!0,format:i.italic,template:new u({template:s.buttonTemplate,title:"Italic"})})),p("underline",[{tags:["span"],attr:{style:{textDecoration:"underline"}}}]),h("underline",new w({key:"U",ctrl:!0,format:i.underline,template:new u({template:s.buttonTemplate,title:"Underline"})})),p("strikethrough",[{tags:["del"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}]),h("strikethrough",new w({format:i.strikethrough,template:new u({template:s.buttonTemplate,title:"Strikethrough"})})),p("superscript",[{tags:["sup"]}]),h("superscript",new w({format:i.superscript,template:new u({template:s.buttonTemplate,title:"Superscript"})})),p("subscript",[{tags:["sub"]}]),h("subscript",new w({format:i.subscript,template:new u({template:s.buttonTemplate,title:"Subscript"})})),h("foreColor",new S({cssAttr:"color",domAttr:"color",name:"foreColor",template:new u({template:s.colorPickerTemplate,title:"Color"})})),h("backColor",new S({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor",template:new u({template:s.colorPickerTemplate,title:"Background Color"})})),h("fontName",new E({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName",defaultValue:[{text:"fontNameInherit",value:"inherit"}],template:new u({template:s.comboBoxTemplate,title:"Font Name"})})),h("fontSize",new E({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize",defaultValue:[{text:"fontSizeInherit",value:"inherit"}],template:new u({template:s.comboBoxTemplate,title:"Font Size"})}))}(jQuery),function(e){var t=window.kendo,n=t.Class,r=e.extend,i=t.ui.editor,s=t.ui.Editor.fn.options.formats,o=i.Dom,u=i.Command,a=i.Tool,f=i.ToolTemplate,l=i.FormatTool,c=i.EditorUtils,h=c.registerTool,p=c.registerFormat,d=i.RangeUtils,v=n.extend({init:function(e){this.format=e},contains:function(e,t){var n,r,i;for(n=0,r=t.length;n<r;n++){i=t[n];if(!i||!o.isAncestorOrSelf(e,i))return!1}return!0},findSuitable:function(t){var n=this.format,r=[],i,s,u;for(i=0,s=t.length;i<s;i++){u=o.ofType(t[i],n[0].tags)?t[i]:o.parentOfType(t[i],n[0].tags);if(!u)return[];e.inArray(u,r)<0&&r.push(u)}for(i=0,s=r.length;i<s;i++)if(this.contains(r[i],r))return[r[i]];return r},findFormat:function(e){var t=this.format,n,r,i,s,u;for(n=0,r=t.length;n<r;n++){i=e,s=t[n].tags,u=t[n].attr;while(i){if(o.ofType(i,s)&&o.attrEquals(i,u))return i;i=i.parentNode}}return null},getFormat:function(e){var t=this,n=function(e){return t.findFormat(o.isDataNode(e)?e.parentNode:e)},r=n(e[0]),i,s;if(!r)return"";for(i=1,s=e.length;i<s;i++)if(r!=n(e[i]))return"";return r.nodeName.toLowerCase()},isFormatted:function(e){for(var t=0,n=e.length;t<n;t++)if(!this.findFormat(e[t]))return!1;return!0}}),m=n.extend({init:function(e,t){this.format=e,this.values=t,this.finder=new v(e)},wrap:function(e,t,n){var r=n.length==1?o.blockParentOrBody(n[0]):o.commonAncestor.apply(null,n);o.isInline(r)&&(r=o.blockParentOrBody(r));var i=o.significantChildNodes(r),s=o.findNodeIndex(i[0]),u=o.create(r.ownerDocument,e,t),a,f;for(a=0;a<i.length;a++){f=i[a];if(o.isBlock(f)){o.attr(f,t),u.childNodes.length&&(o.insertBefore(u,f),u=u.cloneNode(!1)),s=o.findNodeIndex(f)+1;continue}u.appendChild(f)}u.firstChild&&o.insertAt(r,u,s)},apply:function(e){var t=this,n=o.is(e[0],"img")?[e[0]]:t.finder.findSuitable(e),i=n.length?c.formatByName(o.name(n[0]),t.format):t.format[0],s=i.tags[0],u=r({},i.attr,t.values),a,f;if(n.length)for(a=0,f=n.length;a<f;a++)o.attr(n[a],u);else t.wrap(s,u,e)},remove:function(e){var t,n,r,i;for(t=0,n=e.length;t<n;t++)r=this.finder.findFormat(e[t]),r&&(o.ofType(r,["p","img","li"])?(i=c.formatByName(o.name(r),this.format),i.attr.style&&o.unstyle(r,i.attr.style),i.attr.className&&o.removeClass(r,i.attr.className)):o.unwrap(r))},toggle:function(e){var t=this,n=d.nodes(e);t.finder.isFormatted(n)?t.remove(n):t.apply(n)}}),g=n.extend({init:function(e,t){var n=this;n.format=e,n.values=t,n.finder=new v(e)},apply:function(e){var t=this.format,n=o.blockParents(e),r=t[0].tags[0],s,u,a,f,l;if(n.length)for(s=0,u=n.length;s<u;s++)o.is(n[s],"li")?(a=n[s].parentNode,f=new i.ListFormatter(a.nodeName.toLowerCase(),r),l=this.editor.createRange(),l.selectNode(n[s]),f.toggle(l)):o.changeTag(n[s],r);else(new m(t,this.values)).apply(e)},toggle:function(e){var t=d.textNodes(e);t.length||(e.selectNodeContents(e.commonAncestorContainer),t=d.textNodes(e),t.length||(t=o.significantChildNodes(e.commonAncestorContainer))),this.apply(t)}}),y=u.extend({init:function(e){e.formatter=e.formatter(),u.fn.init.call(this,e)}}),b=l.extend({init:function(e){l.fn.init.call(this,r(e,{finder:new v(e.format),formatter:function(){return new m(e.format)}}))}}),w=a.extend({init:function(e){a.fn.init.call(this,e),this.finder=new v([{tags:o.blockElements}])},command:function(e){return new y(r(e,{formatter:function(){return new g([{tags:[e.value]}],{})}}))},update:function(e,t){var n;e.is("select")?n=e.data("kendoSelectBox"):n=e.find("select").data("kendoSelectBox"),n.close(),n.value(this.finder.getFormat(t))},initialize:function(e,t){var n=t.editor,r="formatBlock";new i.SelectBox(e,{dataTextField:"text",dataValueField:"value",dataSource:this.options.items?this.options.items:n.options.formatBlock,title:n.options.messages.formatBlock,change:function(e){a.exec(n,r,this.value())},highlightFirst:!1}),e.closest(".k-widget").removeClass("k-"+r).find("*").andSelf().attr("unselectable","on")}});r(i,{BlockFormatFinder:v,BlockFormatter:m,GreedyBlockFormatter:g,FormatCommand:y,BlockFormatTool:b,FormatBlockTool:w}),h("formatBlock",new w({template:new f({template:c.dropDownListTemplate})})),p("justifyLeft",[{tags:o.blockElements,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left"}}}]),h("justifyLeft",new b({format:s.justifyLeft,template:new f({template:c.buttonTemplate,title:"Justify Left"})})),p("justifyCenter",[{tags:o.blockElements,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}}]),h("justifyCenter",new b({format:s.justifyCenter,template:new f({template:c.buttonTemplate,title:"Justify Center"})})),p("justifyRight",[{tags:o.blockElements,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right"}}}]),h("justifyRight",new b({format:s.justifyRight,template:new f({template:c.buttonTemplate,title:"Justify Right"})})),p("justifyFull",[{tags:o.blockElements,attr:{style:{textAlign:"justify"}}}]),h("justifyFull",new b({format:s.justifyFull,template:new f({template:c.buttonTemplate,title:"Justify Full"})}))}(jQuery),function(e){var t=window.kendo,n=e.extend,r=t.ui.editor,i=r.Dom,s=r.Command,o=r.Tool,u=r.BlockFormatter,a=i.normalize,f=r.RangeUtils,l=r.EditorUtils.registerTool,c=s.extend({init:function(e){this.options=e,s.fn.init.call(this,e)},exec:function(){function E(e){e.firstChild&&i.is(e.firstChild,"br")&&i.remove(e.firstChild),i.isDataNode(e)&&!e.nodeValue&&(e=e.parentNode);if(e&&!i.is(e,"img")){while(e.firstChild&&e.firstChild.nodeType==1)e=e.firstChild;e.innerHTML===""&&(e.innerHTML=c)}}var e=this.getRange(),n=f.documentFromRange(e),r,s,o,l,c=t.support.browser.msie?"":'<br _moz_dirty="" />',h,p,d,v,m,g="p,h1,h2,h3,h4,h5,h6".split(","),y=i.parentOfType(e.startContainer,g),b=i.parentOfType(e.endContainer,g),w=y&&!b||!y&&b;e.deleteContents(),p=i.create(n,"a"),e.insertNode(p),p.parentNode||(l=e.commonAncestorContainer,l.innerHTML="",l.appendChild(p)),a(p.parentNode),d=i.parentOfType(p,["li"]),v=i.parentOfType(p,"h1,h2,h3,h4,h5,h6".split(",")),d?(m=e.cloneRange(),m.selectNode(d),f.textNodes(m).length||(h=i.create(n,"p"),d.nextSibling&&f.split(m,d.parentNode),i.insertAfter(h,d.parentNode),i.remove(d.parentNode.childNodes.length==1?d.parentNode:d),h.innerHTML=c,o=h)):v&&!p.nextSibling&&(h=i.create(n,"p"),i.insertAfter(h,v),h.innerHTML=c,i.remove(p),o=h),o||(!d&&!v&&(new u([{tags:["p"]}])).apply([p]),e.selectNode(p),r=i.parentOfType(p,[d?"li":v?i.name(v):"p"]),f.split(e,r,w),s=r.previousSibling,i.is(s,"li")&&s.firstChild&&!i.is(s.firstChild,"br")&&(s=s.firstChild),o=r.nextSibling,i.is(o,"li")&&o.firstChild&&!i.is(o.firstChild,"br")&&(o=o.firstChild),i.remove(r),E(s),E(o),a(s)),a(o);if(i.is(o,"img"))e.setStartBefore(o);else{e.selectNodeContents(o);var S=f.textNodes(e)[0];S&&e.selectNodeContents(S)}e.collapse(!0),i.scrollTo(o),f.selectRange(e)}}),h=s.extend({init:function(e){this.options=e,s.fn.init.call(this,e)},exec:function(){var e=this.getRange();e.deleteContents();var n=i.create(f.documentFromRange(e),"br");e.insertNode(n),a(n.parentNode);if(!t.support.browser.msie&&(!n.nextSibling||i.isWhitespace(n.nextSibling))){var r=n.cloneNode(!0);r.setAttribute("_moz_dirty",""),i.insertAfter(r,n)}e.setStartAfter(n),e.collapse(!0),i.scrollTo(n.nextSibling),f.selectRange(e)}});n(r,{ParagraphCommand:c,NewLineCommand:h}),l("insertLineBreak",new o({key:13,shift:!0,command:h})),l("insertParagraph",new o({key:13,command:c}))}(jQuery),function(e){var t=window.kendo,n=t.Class,r=e.extend,i=t.ui.editor,s=i.Dom,o=i.RangeUtils,u=i.EditorUtils,a=i.Command,f=i.ToolTemplate,l=i.FormatTool,c=i.BlockFormatFinder,h=o.textNodes,p=i.EditorUtils.registerTool,d=c.extend({init:function(e){this.tag=e;var t=this.tags=[e=="ul"?"ol":"ul",e];c.fn.init.call(this,[{tags:t}])},isFormatted:function(e){var t=[],n;for(var r=0;r<e.length;r++)(n=this.findFormat(e[r]))&&s.name(n)==this.tag&&t.push(n);if(t.length<1)return!1;if(t.length!=e.length)return!1;for(r=0;r<t.length;r++){if(t[r].parentNode!=n.parentNode)break;if(t[r]!=n)return!1}return!0},findSuitable:function(e){var t=s.parentOfType(e[0],this.tags);return t&&s.name(t)==this.tag?t:null}}),v=n.extend({init:function(e,t){var n=this;n.finder=new d(e),n.tag=e,n.unwrapTag=t},wrap:function(e,t){var n=s.create(e.ownerDocument,"li"),r,i;for(r=0;r<t.length;r++){i=t[r];if(s.is(i,"li")){e.appendChild(i);continue}if(s.is(i,"ul")||s.is(i,"ol")){while(i.firstChild)e.appendChild(i.firstChild);continue}if(s.is(i,"td")){while(i.firstChild)n.appendChild(i.firstChild);e.appendChild(n),i.appendChild(e),e=e.cloneNode(!1),n=n.cloneNode(!1);continue}n.appendChild(i),s.isBlock(i)&&(e.appendChild(n),s.unwrap(i),n=n.cloneNode(!1))}n.firstChild&&e.appendChild(n)},containsAny:function(e,t){for(var n=0;n<t.length;n++)if(s.isAncestorOrSelf(e,t[n]))return!0;return!1},suitable:function(e,t){if(e.className=="k-marker"
){var n=e.nextSibling;if(n&&s.isBlock(n))return!1;n=e.previousSibling;if(n&&s.isBlock(n))return!1}return this.containsAny(e,t)||s.isInline(e)||e.nodeType==3},split:function(t){var n=h(t),r,i;if(n.length){r=s.parentOfType(n[0],["li"]),i=s.parentOfType(n[n.length-1],["li"]),t.setStartBefore(r),t.setEndAfter(i);for(var u=0,a=n.length;u<a;u++){var f=this.finder.findFormat(n[u]);if(f){var l=e(f).parents("ul,ol");l[0]?o.split(t,l.last()[0],!0):o.split(t,f,!0)}}}},merge:function(e,t){var n=t.previousSibling,r;while(n&&(n.className=="k-marker"||n.nodeType==3&&s.isWhitespace(n)))n=n.previousSibling;if(n&&s.name(n)==e){while(t.firstChild)n.appendChild(t.firstChild);s.remove(t),t=n}r=t.nextSibling;while(r&&(r.className=="k-marker"||r.nodeType==3&&s.isWhitespace(r)))r=r.nextSibling;if(r&&s.name(r)==e){while(t.lastChild)r.insertBefore(t.lastChild,r.firstChild);s.remove(t)}},applyOnSection:function(t,n){function f(){o.push(this)}var r=this.tag,i;n.length==1?i=s.parentOfType(n[0],["ul","ol"]):i=s.commonAncestor.apply(null,n),i||(i=s.parentOfType(n[0],["td"])||n[0].ownerDocument.body),s.isInline(i)&&(i=s.blockParentOrBody(i));var o=[],u=this.finder.findSuitable(n);u||(u=(new d(r=="ul"?"ol":"ul")).findSuitable(n));var a=s.significantChildNodes(i);a.length||(a=n),/table|tbody/.test(s.name(i))&&(a=e.map(n,function(e){return s.parentOfType(e,["td"])}));for(var l=0;l<a.length;l++){var c=a[l],h=s.name(c);this.suitable(c,n)&&(!u||!s.isAncestorOrSelf(u,c))&&(!u||h!="ul"&&h!="ol"?o.push(c):(e.each(c.childNodes,f),s.remove(c)))}o.length==a.length&&i!=n[0].ownerDocument.body&&!/table|tbody|tr|td/.test(s.name(i))&&(o=[i]),u||(u=s.create(i.ownerDocument,r),s.insertBefore(u,o[0])),this.wrap(u,o),s.is(u,r)||s.changeTag(u,r),this.merge(r,u)},apply:function(e){var t=0,n=[],r,i,o;do o=s.parentOfType(e[t],["td","body"]),!r||o!=r?(r&&n.push({section:r,nodes:i}),i=[e[t]],r=o):i.push(e[t]),t++;while(t<e.length);n.push({section:r,nodes:i});for(t=0;t<n.length;t++)this.applyOnSection(n[t].section,n[t].nodes)},unwrap:function(t){var n=t.ownerDocument.createDocumentFragment(),r=this.unwrapTag,i,o,u,a;for(o=t.firstChild;o;o=o.nextSibling){u=s.create(t.ownerDocument,r||"p");while(o.firstChild)a=o.firstChild,s.isBlock(a)?(u.firstChild&&(n.appendChild(u),u=s.create(t.ownerDocument,r||"p")),n.appendChild(a)):u.appendChild(a);u.firstChild&&n.appendChild(u)}i=e(t).parents("ul,ol"),i[0]?(s.insertAfter(n,i.last()[0]),i.last().remove()):s.insertAfter(n,t),s.remove(t)},remove:function(e){var t;for(var n=0,r=e.length;n<r;n++)t=this.finder.findFormat(e[n]),t&&this.unwrap(t)},toggle:function(e){var t=this,n=h(e),r=e.commonAncestorContainer;if(!n.length){e.selectNodeContents(r),n=h(e);if(!n.length){var i=r.ownerDocument.createTextNode("");e.startContainer.appendChild(i),n=[i],e.selectNode(i.parentNode)}}t.finder.isFormatted(n)?(t.split(e),t.remove(n)):t.apply(n)}}),m=a.extend({init:function(e){e.formatter=new v(e.tag),a.fn.init.call(this,e)}}),g=l.extend({init:function(e){this.options=e,l.fn.init.call(this,r(e,{finder:new d(e.tag)}))},command:function(e){return new m(r(e,{tag:this.options.tag}))}});r(i,{ListFormatFinder:d,ListFormatter:v,ListCommand:m,ListTool:g}),p("insertUnorderedList",new g({tag:"ul",template:new f({template:u.buttonTemplate,title:"Remove Link"})})),p("insertOrderedList",new g({tag:"ol",template:new f({template:u.buttonTemplate,title:"Remove Link"})}))}(jQuery),function(e,t){var n=window.kendo,r=n.Class,i=e.extend,s=n.ui.editor,o=s.Dom,u=s.RangeUtils,a=s.EditorUtils,f=s.Command,l=s.Tool,c=s.ToolTemplate,h=s.InlineFormatter,p=s.InlineFormatFinder,d=u.textNodes,v=s.EditorUtils.registerTool,m=r.extend({findSuitable:function(e){return o.parentOfType(e,["a"])}}),g=r.extend({init:function(){this.finder=new m},apply:function(e,t){var n=d(e),r,i,s,a;t.innerHTML?(r=u.getMarkers(e),i=u.documentFromRange(e),e.deleteContents(),a=o.create(i,"a",t),e.insertNode(a),r.length>1&&(o.insertAfter(r[r.length-1],a),o.insertAfter(r[1],a),o[n.length>0?"insertBefore":"insertAfter"](r[0],a))):(s=new h([{tags:["a"]}],t),s.finder=this.finder,s.apply(n))}}),y=f.extend({init:function(e){e.formatter={toggle:function(e){(new h([{tags:["a"]}])).remove(d(e))}},this.options=e,f.fn.init.call(this,e)}}),b=f.extend({init:function(e){var t=this;t.options=e,f.fn.init.call(t,e),t.attributes=null,t.async=!0,t.formatter=new g},exec:function(){function l(n){var i=e("#k-editor-link-url",m.element).val(),s,o,u;i&&i!="http://"&&(t.attributes={href:i},s=e("#k-editor-link-title",m.element).val(),s&&(t.attributes.title=s),o=e("#k-editor-link-text",m.element).val(),o!==f&&(t.attributes.innerHTML=o||i),u=e("#k-editor-link-target",m.element).is(":checked"),u&&(t.attributes.target="_blank"),t.formatter.apply(r,t.attributes)),c(n),t.change&&t.change()}function c(e){e.preventDefault(),m.destroy(),o.windowFromDocument(u.documentFromRange(r)).focus(),t.releaseRange(r)}var t=this,r=t.getRange(),i=r.collapsed,s,f=null;r=t.lockRange(!0),s=d(r);var h=s.length?t.formatter.finder.findSuitable(s[0]):null,p=s.length<=1||s.length==2&&i,v="<div class='k-editor-dialog'><ol><li class='k-form-text-row'><label for='k-editor-link-url'>Web address</label><input type='text' class='k-input' id='k-editor-link-url'></li>"+(p?"<li class='k-form-text-row'><label for='k-editor-link-text'>Text</label><input type='text' class='k-input' id='k-editor-link-text'></li>":"")+"<li class='k-form-text-row'><label for='k-editor-link-title'>Tooltip</label><input type='text' class='k-input' id='k-editor-link-title'></li>"+"<li class='k-form-checkbox-row'><input type='checkbox' id='k-editor-link-target'><label for='k-editor-link-target'>Open link in new window</label></li>"+"</ol>"+"<div class='k-button-wrapper'>"+"<button class='k-dialog-insert k-button'>Insert</button>"+"&nbsp;or&nbsp;"+"<a href='#' class='k-dialog-close k-link'>Close</a>"+"</div>"+"</div>",m=a.createDialog(v,t.editor,e.extend({},t.editor.options.dialogOptions,{title:"Insert link",close:c})).hide().find(".k-dialog-insert").click(l).end().find(".k-dialog-close").click(c).end().find(".k-form-text-row input").keydown(function(e){var t=n.keys;e.keyCode==t.ENTER?l(e):e.keyCode==t.ESC&&c(e)}).end().find("#k-editor-link-url").val(h?h.getAttribute("href",2):"http://").end().find("#k-editor-link-text").val(s.length>0?s.length==1?s[0].nodeValue:s[0].nodeValue+s[1].nodeValue:"").end().find("#k-editor-link-title").val(h?h.title:"").end().find("#k-editor-link-target").attr("checked",h?h.target=="_blank":!1).end().show().data("kendoWindow").center();p&&s.length>0&&(f=e("#k-editor-link-text",m.element).val()),e("#k-editor-link-url",m.element).focus().select()},redo:function(){var e=this,t=e.lockRange(!0);e.formatter.apply(t,e.attributes),e.releaseRange(t)}}),w=l.extend({init:function(t){this.options=t,this.finder=new p([{tags:["a"]}]),l.fn.init.call(this,e.extend(t,{command:y}))},initialize:function(e){e.attr("unselectable","on").addClass("k-state-disabled")},update:function(e,t){e.toggleClass("k-state-disabled",!this.finder.isFormatted(t)).removeClass("k-state-hover")}});i(n.ui.editor,{LinkFormatFinder:m,LinkFormatter:g,UnlinkCommand:y,LinkCommand:b,UnlinkTool:w}),v("createLink",new l({key:"K",ctrl:!0,command:b,template:new c({template:a.buttonTemplate,title:"Create Link"})})),v("unlink",new w({key:"K",ctrl:!0,shift:!0,template:new c({template:a.buttonTemplate,title:"Remove Link"})}))}(jQuery),function(e,t){var n=window.kendo,r=e.extend,i=n.ui.editor,s=i.EditorUtils,o=i.Dom,u=s.registerTool,a=i.ToolTemplate,f=i.RangeUtils,l=i.Command,c=n.keys,h="Insert Image",p="#k-editor-image-url",d="#k-editor-image-title",v=l.extend({init:function(e){var t=this;l.fn.init.call(t,e),t.async=!0,t.attributes={}},insertImage:function(e,t){var n=this.attributes;if(n.src&&n.src!="http://"){if(!e)return e=o.create(f.documentFromRange(t),"img",n),e.onload=e.onerror=function(){e.removeAttribute("complete"),e.removeAttribute("width"),e.removeAttribute("height")},t.deleteContents(),t.insertNode(e),t.setStartAfter(e),t.setEndAfter(e),f.selectRange(t),!0;o.attr(e,n)}return!1},redo:function(){var e=this,t=e.lockRange();e.insertImage(f.image(t),t)||e.releaseRange(t)},exec:function(){function y(t){i.attributes={src:e(p,m.element).val(),alt:e(d,m.element).val()},a=i.insertImage(l,u),b(t),i.change&&i.change()}function b(e){e.preventDefault(),m.destroy(),o.windowFromDocument(f.documentFromRange(u)).focus(),a||i.releaseRange(u)}function w(e){e.keyCode==c.ENTER?y(e):e.keyCode==c.ESC&&b(e)}var i=this,u=i.lockRange(),a=!1,l=f.image(u),v,m,g,E=i.editor.options.imageBrowser,S=!!(n.ui.ImageBrowser&&E&&E.transport&&E.transport.read!==t);v='<div class="k-editor-dialog">'+(S?'<div class="k-image-browser"></div>':"")+"<ol>"+'<li class="k-form-text-row"><label for="k-editor-image-url">Web address</label><input type="text" class="k-input" id="k-editor-image-url"/></li>'+'<li class="k-form-text-row"><label for="k-editor-image-title">Tooltip</label><input type="text" class="k-input" id="k-editor-image-title"/></li>'+"</ol>"+'<div class="k-button-wrapper">'+'<button class="k-dialog-insert k-button">Insert</button>'+"&nbsp;or&nbsp;"+'<a href="#" class="k-dialog-close k-link">Close</a>'+"</div>"+"</div>",g=S?{width:"960px"}:{},m=s.createDialog(v,i.editor,r(g,i.editor.options.dialogOptions,{title:h,close:b,resizable:S,activate:function(){if(S){var e=this;new n.ui.ImageBrowser(e.element.find(".k-image-browser"),r({},E,{change:function(){e.element.find(p).val(this.value())},apply:y}))}}})).hide().find(".k-dialog-insert").click(y).end().find(".k-dialog-close").click(b).end().find(".k-form-text-row input").keydown(w).end().toggleClass("k-imagebrowser",S).find(p).val(l?l.getAttribute("src",2):"http://").end().find(d).val(l?l.alt:"").end().show().data("kendoWindow").center(),e(p,m.element).focus().select()}});n.ui.editor.ImageCommand=v,u("insertImage",new i.Tool({command:v,template:new a({template:s.buttonTemplate,title:h})}))}(jQuery),function(e,t){var n=window.kendo,r=n.ui.Widget,i=n.ui.DropDownList,s=n.ui.editor,o=s.Dom,u="change",a="k-state-selected",f="."+a,l=".k-selected-color",c="unselectable",h="background-color",p="aria-selected",d="aria-labelledby",v=n.keys,m=n.template('<div class="k-colorpicker-popup"><ul class="k-reset"># for(var i = 0; i < colors.length; i++) { #<li #=(id && i === 0) ? "id=\\""+id+"\\" aria-selected=\\"true\\"" : "" # class="k-item #= colors[i] == value ? "k-state-selected" : "" #" aria-label="\\##= colors[i]#"><div style="background-color:\\##= colors[i] #"></div></li># } #</ul></div>'),g=r.extend({init:function(t,n){var i=this,s;r.fn.init.call(i,t,n),t=i.element,n=i.options,i._value=n.value,i._ariaId=s=n.ariaId,s&&t.attr(d,s),i.popup=e(m({colors:n.colors,value:n.value.substring(1),id:s})).kendoPopup({anchor:t,toggleTarget:t.find(".k-icon")}).delegate(".k-item","click",function(t){i.select(e(t.currentTarget).find("div").css(h))}).find("*").attr(c,"on").end().data("kendoPopup"),t.attr("tabIndex",0).keydown(function(e){i.keydown(e)}).focus(function(){t.css("outline","1px dotted #000")}).blur(function(){t.css("outline","")}).delegate(".k-tool-icon","click",function(){i.select()}).find("*").attr(c,"on"),i._value&&t.find(l).css(h,i._value)},options:{name:"ColorPicker",colors:"000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7".split(","),value:null},events:[u],select:function(e){var t=this;e?(e=o.toHex(e),t.trigger(u,{value:e})||(t.value(e),t.close())):t.trigger(u,{value:t._value})},open:function(){this.popup.open()},close:function(){this.popup.close()},toggle:function(){this.popup.toggle()},_applyAriaAttributes:function(e,t){var n=this;n.element.removeAttr(d),n.element.attr(d,n._ariaId),e.removeAttr("id"),e.attr(p,!1),t.attr({id:n._ariaId,"aria-selected":!0})},keydown:function(e){var t=this,n=t.popup.element,r=t.popup.visible(),i,s,o,u=!1,l=e.keyCode;l==v.DOWN?(r?(i=n.find(f),i[0]?s=i.next():s=n.find("li:first"),s[0]&&(i.removeClass(a),s.addClass(a),t._applyAriaAttributes(i,s))):t.open(),u=!0):l==v.UP?(r&&(i=n.find(f),o=i.prev(),o[0]&&(i.removeClass(a),o.addClass(a),t._applyAriaAttributes(i,o))),u=!0):l==v.TAB||l==v.RIGHT||l==v.LEFT?t.close():l==v.ENTER&&(n.find(f).click(),u=!0),u&&e.preventDefault()},value:function(e){var n=this;if(e===t)return n._value;e=o.toHex(e),n._value=e,n.element.find(l).css(h,e)}}),y=i.extend({init:function(e,t){var n=this;i.fn.init.call(n,e,t),n.value(n.options.title)},options:{name:"SelectBox"},value:function(e){var n=this,r=i.fn.value.call(n,e);if(e===t)return r;e!==i.fn.value.call(n)&&(n.text(n.options.title),n._current.removeClass("k-state-selected"),n.current(null),n._oldIndex=n.selectedIndex=-1)}});n.ui.editor.ColorPicker=g,n.ui.editor.SelectBox=y}(jQuery),function(e,t){function m(n,r){var i=e(n).css("direction")=="rtl",s=i?"Right":"Left",u=o.name(n)!="td"?"margin"+s:"padding"+s;if(r===t)return n.style[u]||0;r>0?n.style[u]=r+"px":(n.style[u]="",n.style.cssText||n.removeAttribute("style"))}var n=window.kendo,r=n.Class,i=e.extend,s=n.ui.editor,o=s.Dom,u=s.EditorUtils,a=u.registerTool,f=s.Command,l=s.Tool,c=s.ToolTemplate,h=s.RangeUtils,p=o.blockElements,d=s.BlockFormatFinder,v=s.BlockFormatter,g=r.extend({init:function(){this.finder=new d([{tags:o.blockElements}])},apply:function(t){var n=this.finder.findSuitable(t),r=[],i,s,u,a,f;if(n.length){for(i=0,s=n.length;i<s;i++)o.is(n[i],"li")?e(n[i]).index()?e.inArray(n[i].parentNode,r)<0&&r.push(n[i]):r.push(n[i].parentNode):r.push(n[i]);while(r.length){u=r.shift();if(o.is(u,"li")){a=u.parentNode,f=e(u).prev("li");var l=f.find("ul,ol").last(),c=e(u).children("ul,ol")[0];if(c&&f[0])l[0]?(l.append(u),l.append(e(c).children()),o.remove(c)):(f.append(c),c.insertBefore(u,c.firstChild));else{c=f.children("ul,ol")[0],c||(c=o.create(u.ownerDocument,o.name(a)),f.append(c));while(u&&u.parentNode==a)c.appendChild(u),u=r.shift()}}else{var h=parseInt(m(u),10)+30;m(u,h);for(var p=0;p<r.length;p++)e.contains(u,r[p])&&r.splice(p,1)}}}else{var d=new v([{tags:"p"}],{style:{marginLeft:30}});d.apply(t)}},remove:function(t){var n=this.finder.findSuitable(t),r,i,s,o,u,a,f,l;for(i=0,s=n.length;i<s;i++){f=e(n[i]);if(f.is("li")){o=f.parent(),u=o.parent();if(u.is("li,ul,ol")&&!m(o[0])){if(r&&e.contains(r,u[0]))continue;a=f.nextAll("li"),a.length&&e(o[0].cloneNode(!1)).appendTo(f).append(a),u.is("li")?f.insertAfter(u):f.appendTo(u),o.children("li").length||o.remove();continue}if(r==o[0])continue;r=o[0]}else r=n[i];l=parseInt(m(r),10)-30,m(r,l)}}}),y=f.extend({init:function(e){e.formatter={toggle:function(e){(new g).apply(h.nodes(e))}},f.fn.init.call(this,e)}}),b=f.extend({init:function(e){e.formatter={toggle:function(e){(new g).remove(h.nodes(e))}},f.fn.init.call(this,e)}}),w=l.extend({init:function(e){l.fn.init.call(this,i(e,{command:b})),this.finder=new d([{tags:p}])},initialize:function(e){e.attr("unselectable","on").addClass("k-state-disabled")},update:function(t,n){var r=this.finder.findSuitable(n),i,s,u,a;for(u=0,a=r.length;u<a;u++){i=m(r[u]),i||(s=e(r[u]).parents("ul,ol").length,i=o.is(r[u],"li")&&(s>1||m(r[u].parentNode))||o.ofType(r[u],["ul","ol"])&&s>0);if(i){t.removeClass("k-state-disabled");return}}t.addClass("k-state-disabled").removeClass("k-state-hover")}});i(s,{IndentFormatter:g,IndentCommand:y,OutdentCommand:b,OutdentTool:w}),a("indent",new l({command:y,template:new c({template:u.buttonTemplate,title:"Indent"})})),a("outdent",new w({template:new c({template:u.buttonTemplate,title:"Outdent"})}))}(jQuery),function(e,t){var n=window.kendo,r=e.extend,i=n.ui.editor,s=i.Dom,o=i.RangeUtils,u=i.EditorUtils,a=i.Command,f=i.Tool,l=i.ToolTemplate,c=a.extend({init:function(e){var t=this;t.options=e,a.fn.init.call(t,e),t.attributes=null,t.async=!0},exec:function(){function l(e){n.value(u.find(f).val()),h(e),t.change&&t.change(),n.trigger("change")}function h(e){e.preventDefault(),u.data("kendoWindow").destroy(),s.windowFromDocument(o.documentFromRange(i)).focus()}var t=this,n=t.editor,i=n.getRange(),u=e(c.template).appendTo(document.body),a=c.indent(n.value()),f=".k-editor-textarea";u.kendoWindow(r({},n.options.dialogOptions,{title:"View HTML",close:h})).hide().find(f).val(a).end().find(".k-dialog-update").click(l).end().find(".k-dialog-close").click(h).end().show().data("kendoWindow").center(),u.find(f).focus()}});r(c,{template:"<div class='k-editor-dialog'><textarea class='k-editor-textarea k-input'></textarea><div class='k-button-wrapper'><button class='k-dialog-update k-button'>Update</button>&nbsp;or&nbsp;<a href='#' class='k-dialog-close k-link'>Close</a></div></div>",indent:function(e){return e.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/ig,"<$1$2>\n<li").replace(/<br \/>/ig,"<br />\n").replace(/\n$/,"")}}),n.ui.editor.ViewHtmlCommand=c,i.EditorUtils.registerTool("viewHtml",new f({command:c,template:new l({template:u.buttonTemplate,title:"View HTML"})}))}(jQuery),function(e){var t=window.kendo,n=t.Class,r=e.extend,i=t.ui.editor,s=i.RangeUtils,o=i.Marker,u=n.extend({init:function(e){this.editor=e,this.formats=[]},apply:function(e){if(!this.hasPending())return;var t=new o;t.addCaret(e);var n=e.startContainer.childNodes[e.startOffset],i=n.previousSibling;i.nodeValue||(i=i.previousSibling),e.setStart(i,i.nodeValue.length-1),t.add(e);if(!s.textNodes(e).length){t.remove(e),e.collapse(!0),this.editor.selectRange(e);return}var u=t.end.previousSibling.previousSibling,a,f=this.formats;for(var l=0;l<f.length;l++){a=f[l];var c=a.command(r({range:e},a.options.params));c.editor=this.editor,c.exec(),e.selectNode(u)}t.remove(e),u.parentNode&&(e.setStart(u,1),e.collapse(!0)),this.clear(),this.editor.selectRange(e)},hasPending:function(){return this.formats.length>0},isPending:function(e){return!!this.getPending(e)},getPending:function(e){var t=this.formats;for(var n=0;n<t.length;n++)if(t[n].name==e)return t[n];return},toggle:function(e){var t=this.formats;for(var n=0;n<t.length;n++)if(t[n].name==e.name){t[n].params&&t[n].params.value!=e.params.value?t[n].params.value=e.params.value:t.splice(n,1);return}t.push(e)},clear:function(){this.formats=[]}});r(i,{PendingFormats:u})}(jQuery);