/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function M(t,n){try{return e.contains(t,n)||t==n}catch(r){return!1}}function _(e){return b?s.elementFromPoint(e.x.screen,e.y.screen):s.elementFromPoint(e.x.client,e.y.client)}function D(e,t){return parseInt(e.css(t),10)||0}function P(e,t){return Math.min(Math.max(e,t.min),t.max)}function H(e,t){var n=e.offset(),r=n.left+D(e,"borderLeftWidth")+D(e,"paddingLeft"),i=n.top+D(e,"borderTopWidth")+D(e,"paddingTop"),s=r+e.width()-t.outerWidth(!0),o=i+e.height()-t.outerHeight(!0);return{x:{min:r,max:s},y:{min:i,max:o}}}function B(e,n,i){var s,o,u=0,a=n&&n.length,f=i&&i.length;while(e&&e.parentNode){for(u=0;u<a;u++){s=n[u];if(s.element[0]===e)return{target:s,targetElement:e}}for(u=0;u<f;u++){o=i[u];if(r.matchesSelector.call(e,o.options.filter))return{target:o,targetElement:e}}e=e.parentNode}return t}var n=window.kendo,r=n.support,i=r.pointers,s=window.document,o=n.Class,u=n.ui.Widget,a=n.Observable,f=n.UserEvents,l=e.proxy,c=e.extend,h=n.getOffset,p={},d={},v={},m,g=r.mobileOS,y=g&&g.android,b=y&&g.browser=="chrome",w="mousedown",E="mouseup mouseleave",S="keyup",x="change",T="dragstart",N="drag",C="dragend",k="dragcancel",L="dragenter",A="dragleave",O="drop";r.touch&&(w="touchstart",E="touchend touchcancel"),i&&(w="MSPointerDown",E="MSPointerUp MSPointerCancel");var j=a.extend({init:function(t,n){var r=this,i=t[0];r.capture=!1,i.addEventListener(w,l(r._press,r),!0),e.each(E.split(" "),function(){i.addEventListener(this,l(r._release,r),!0)}),a.fn.init.call(r),r.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(e){var t=this;t.trigger("press"),t.capture&&e.preventDefault()},_release:function(e){var t=this;t.trigger("release"),t.capture&&(e.preventDefault(),t.cancelCapture())}}),F=a.extend({init:function(t){var n=this;a.fn.init.call(n),n.forcedEnabled=!1,e.extend(n,t),n.scale=1,n.max=0,n.horizontal?(n.measure="width",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="height",n.scrollSize="scrollHeight",n.axis="y")},outOfBounds:function(e){return e>this.max||e<this.min},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[this.measure]()},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(e){this.scale=e},update:function(e){var t=this,n=t.getTotal(),r=n*t.scale,i=t.getSize();t.size=i,t.total=r,t.min=Math.min(t.max,t.size-r),t.minScale=t.size/n,t.enabled=t.forcedEnabled||r>i,e||t.trigger(x,t)}}),I=a.extend({init:function(e){var t=this,r=l(t.refresh,t);a.fn.init.call(t),t.x=new F(c({horizontal:!0},e)),t.y=new F(c({horizontal:!1},e)),t.forcedMinScale=e.minScale,t.bind(x,e),n.onResize(r)},rescale:function(e){this.x.rescale(e),this.y.rescale(e),this.refresh()},refresh:function(){var e=this;e.x.update(),e.y.update(),e.enabled=e.x.enabled||e.y.enabled,e.minScale=e.forcedMinScale||Math.max(e.x.minScale,e.y.minScale),e.trigger(x)}}),q=a.extend({init:function(e){var t=this;c(t,e),a.fn.init.call(t)},dragMove:function(e){var t=this,n=t.dimension,r=t.axis,i=t.movable,s=i[r]+e;if(!n.enabled)return;if(s<n.min&&e<0||s>n.max&&e>0)e*=t.resistance;i.translateAxis(r,e),t.trigger(x,t)}}),R=o.extend({init:function(e){var t=this,n,r,i,s;c(t,{elastic:!0},e),i=t.elastic?.5:0,s=t.movable,t.x=n=new q({axis:"x",dimension:t.dimensions.x,resistance:i,movable:s}),t.y=r=new q({axis:"y",dimension:t.dimensions.y,resistance:i,movable:s}),t.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(e){t.gesture=e},gesturechange:function(e){var i=t.gesture,o=i.center,u=e.center,a=e.distance/i.distance,f=t.dimensions.minScale,l;s.scale<=f&&a<1&&(a+=(1-a)*.8),l={x:(s.x-o.x)*a+u.x-s.x,y:(s.y-o.y)*a+u.y-s.y},s.scaleWith(a),n.dragMove(l.x),r.dragMove(l.y),t.dimensions.rescale(s.scale),t.gesture=e},move:function(e){n.dimension.enabled||r.dimension.enabled?(n.dragMove(e.x.delta),r.dragMove(e.y.delta),e.preventDefault()):e.touch.skip()},end:function(e){e.preventDefault()}})}}),U=r.transitions.prefix+"Transform",z=Math.round,W;r.hasHW3D?W=function(e,t,n){return"translate3d("+z(e)+"px,"+z(t)+"px,0) scale("+n+")"}:W=function(e,t,n){return"translate("+z(e)+"px,"+z(t)+"px) scale("+n+")"};var X=a.extend({init:function(t){var n=this;a.fn.init.call(n),n.element=e(t),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(W(n.x,n.y,n.scale))},translateAxis:function(e,t){this[e]+=t,this.refresh()},scaleTo:function(e){this.scale=e,this.refresh()},scaleWith:function(e){this.scale*=e,this.refresh()},translate:function(e){this.x+=e.x,this.y+=e.y,this.refresh()},moveAxis:function(e,t){this[e]=t,this.refresh()},moveTo:function(e){c(this,e),this.refresh()},refresh:function(){var e=this,t=W(e.x,e.y,e.scale);t!=e.coordinates&&(e.element[0].style[U]=t,e._saveCoordinates(t),e.trigger(x))},_saveCoordinates:function(e){this.coordinates=e}}),V=u.extend({init:function(e,t){var n=this;u.fn.init.call(n,e,t);var r=n.options.group;r in d?d[r].push(n):d[r]=[n]},events:[L,A,O],options:{name:"DropTarget",group:"default"},destroy:function(){var e=this.options.group,t=d[e],n;if(t.length>1){u.fn.destroy.call(this);for(n=0;n<t.length;n++)if(t[n]==this){t.splice(n,1);break}}else V.destroyGroup(e)},_trigger:function(e,t){var n=this,r=p[n.options.group];if(r)return n.trigger(e,c({},t.event,{draggable:r,dropTarget:t.dropTarget}))},_over:function(e){this._trigger(L,e)},_out:function(e){this._trigger(A,e)},_drop:function(e){var t=this,n=p[t.options.group];n&&(n.dropped=!t._trigger(O,e))}});V.destroyGroup=function(e){var t=d[e],n;if(t){for(n=0;n<t.length;n++)u.fn.destroy.call(t[n]);t.length=0,delete d[e]}},V._cache=d;var $=V.extend({init:function(e,t){var n=this;u.fn.init.call(n,e,t);var r=n.options.group;r in v?v[r].push(n):v[r]=[n]},options:{name:"DropTargetArea",group:"default",filter:null}}),J=u.extend({init:function(e,t){var r=this;u.fn.init.call(r,e,t),r.userEvents=new f(r.element,{global:!0,stopPropagation:!0,filter:r.options.filter,threshold:r.options.distance,start:l(r._start,r),move:l(r._drag,r),end:l(r._end,r),cancel:l(r._cancel,r)}),r._afterEndHandler=l(r._afterEnd,r),r.captureEscape=function(e){e.keyCode===n.keys.ESC&&(r._trigger(k,{event:e}),r.userEvents.cancel())}},events:[T,N,C,k],options:{name:"Draggable",distance:5,group:"default",cursorOffset:null,axis:null,container:null,dropped:!1},_updateHint:function(t){var n=this,r,i=n.options,s=n.boundaries,o=i.axis,u=n.options.cursorOffset;u?r={left:t.x.location+u.left,top:t.y.location+u.top}:(n.hintOffset.left+=t.x.delta,n.hintOffset.top+=t.y.delta,r=e.extend({},n.hintOffset)),s&&(r.top=P(r.top,s.y),r.left=P(r.left,s.x)),o==="x"?delete r.top:o==="y"&&delete r.left,n.hint.css(r)},_start:function(t){var n=this,r=n.options,i=r.container,o=r.hint;n.currentTarget=t.target,n.currentTargetOffset=h(n.currentTarget);if(o){n.hint=e.isFunction(o)?e(o(n.currentTarget)):o;var u=h(n.currentTarget);n.hintOffset=u,n.hint.css({position:"absolute",zIndex:2e4,left:u.left,top:u.top}).appendTo(s.body)}p[r.group]=n,n.dropped=!1,i&&(n.boundaries=H(i,n.hint)),n._trigger(T,t)&&(n.userEvents.cancel(),n._afterEnd()),e(s).on(S,n.captureEscape)},_drag:function(t){var n=this;t.preventDefault(),n._withDropTarget(t,function(n,r){if(!n){m&&(m._trigger(A,c(t,{dropTarget:e(m.targetElement)})),m=null);return}if(m){if(r===m.targetElement)return;m._trigger(A,c(t,{dropTarget:e(m.targetElement)}))}n._trigger(L,c(t,{dropTarget:e(r)})),m=c(n,{targetElement:r})}),n._trigger(N,t),n.hint&&n._updateHint(t)},_end:function(t){var n=this;n._withDropTarget(t,function(n,r){n&&(n._drop(c({},t,{dropTarget:e(r)})),m=null)}),n._trigger(C,t),n._cancel(t.event)},_cancel:function(e){var t=this;t.hint&&!t.dropped?t.hint.animate(t.currentTargetOffset,"fast",t._afterEndHandler):t._afterEnd()},_trigger:function(e,t){var n=this;return n.trigger(e,c({},t.event,{x:t.x,y:t.y,currentTarget:n.currentTarget,dropTarget:t.dropTarget}))},_withDropTarget:function(e,t){var n=this,r,i,s=n.options,o=d[s.group],u=v[s.group];if(o&&o.length||u&&u.length)r=_(e),n.hint&&M(n.hint[0],r)&&(n.hint.hide(),r=_(e),r||(r=_(e)),n.hint.show()),i=B(r,o,u),i?t(i.target,i.targetElement):t()},destroy:function(){var e=this;u.fn.destroy.call(e),e._afterEnd(),e.userEvents.destroy()},_afterEnd:function(){var t=this;t.hint&&t.hint.remove(),delete p[t.options.group],t.trigger("destroy"),e(s).off(S,t.captureEscape)}});n.ui.plugin(V),n.ui.plugin($),n.ui.plugin(J),n.TapCapture=j,n.containerBoundaries=H,c(n.ui,{Pane:R,PaneDimensions:I,Movable:X})})(jQuery);