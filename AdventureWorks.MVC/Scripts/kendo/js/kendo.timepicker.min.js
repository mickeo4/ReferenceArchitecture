/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function B(e,t,n){var r=e.getTimezoneOffset(),i;e.setTime(e.getTime()+t),n||(i=e.getTimezoneOffset()-r,e.setTime(e.getTime()+i*E))}function j(){var e=new D,t=new D(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),n=new D(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0);return-1*(t.getTimezoneOffset()-n.getTimezoneOffset())}function F(e){return e.getHours()*60*E+e.getMinutes()*E+e.getSeconds()*1e3+e.getMilliseconds()}function I(e,t,n){var r=F(t),i=F(n),s;return!e||r==i?!0:(s=F(e),r>s&&(s+=S),i<r&&(i+=S),s>=r&&s<=i)}function R(e){var t=e.parseFormats;e.format=s(e.format||n.getCulture(e.culture).calendars.standard.patterns.t),t=O(t)?t:[t],t.splice(0,0,e.format),e.parseFormats=t}function U(e){e.preventDefault()}var n=window.kendo,r=n.support.touch,i=n.keys,s=n._extractFormat,o=n.ui,u=o.Widget,a="open",f="close",l="change",c=".kendoTimePicker",h=(r?"touchend":"click")+c,p="k-state-default",d="disabled",v="li",m="<span/>",g="k-state-focused",y="k-state-hover",b="mouseenter"+c+" mouseleave"+c,w="mousedown"+c,E=6e4,S=864e5,x="k-state-selected",T="k-state-disabled",N="aria-selected",C="aria-expanded",k="aria-hidden",L="aria-activedescendant",A="id",O=e.isArray,M=e.extend,_=e.proxy,D=Date,P=new D;P=new D(P.getFullYear(),P.getMonth(),P.getDate(),0,0,0);var H=function(t){var r=this,i=t.id;r.options=t,r.ul=e('<ul tabindex="-1" role="listbox" aria-hidden="true" unselectable="on" class="k-list k-reset"/>').css({overflow:n.support.touch?"":"auto"}).on(h,v,_(r._click,r)).on("mouseenter"+c,v,function(){e(this).addClass(y)}).on("mouseleave"+c,v,function(){e(this).removeClass(y)}),r.list=e("<div class='k-list-container'/>").append(r.ul).on(w,U),i&&(r._timeViewID=i+"_timeview",r._optionID=i+"_option_selected",r.ul.attr(A,r._timeViewID)),r._popup(),r.template=n.template('<li tabindex="-1" role="option" class="k-item" unselectable="on">#=data#</li>',{useWithBlock:!1})};H.prototype={current:function(n){var r=this,i=r.options.active;if(n===t)return r._current;r._current&&r._current.removeClass(x).removeAttr(N).removeAttr(A),n&&(n=e(n).addClass(x).attr(A,r._optionID).attr(N,!0),r.scroll(n[0])),r._current=n,i&&i(n)},close:function(){this.popup.close()},destroy:function(){var e=this;e.ul.off(c),e.list.off(c),e.popup.destroy()},open:function(){var e=this;e.ul[0].firstChild||e.bind(),e.popup.open(),e._current&&e.scroll(e._current[0])},dataBind:function(e){var t=this,r=t.options,i=r.format,s=n.toString,o=t.template,u=e.length,a=0,f,l="";for(;a<u;a++)f=e[a],I(f,r.min,r.max)&&(l+=o(s(f,i,r.culture)));t._html(l,u)},refresh:function(){var e=this,t=e.options,r=t.format,i=j(),s=i<0,o=t.min,u=t.max,a=F(o),f=F(u),l=t.interval*E,c=n.toString,h=e.template,p=new D(o),d=0,v,m="";s?v=(S+i*E)/l:v=S/l,a!=f&&(a>f&&(f+=S),v=(f-a)/l+1);for(;d<v;d++)d&&B(p,l,s),f&&F(p)>f&&(p=new D(u)),m+=h(c(p,r,t.culture));e._html(m,v)},bind:function(){var e=this,t=e.options.dates;t&&t[0]?e.dataBind(t):e.refresh()},_html:function(e,t){var n=this;n.ul[0].innerHTML=e,n._height(t),n.current(null),n.select(n._value)},scroll:function(e){if(!e)return;var t=this.ul[0],n=e.offsetTop,r=e.offsetHeight,i=t.scrollTop,s=t.clientHeight,o=n+r;t.scrollTop=i>n?n:o>i+s?o-s:i},select:function(t){var r=this,i=r.options,s=r._current;t instanceof Date&&(t=n.toString(t,i.format,i.culture)),typeof t=="string"&&(!s||s.text()!==t?(t=e.grep(r.ul[0].childNodes,function(e){return(e.textContent||e.innerText)==t}),t=t[0]?t:null):t=s),r.current(t)},toggle:function(){var e=this;e.popup.visible()?e.close():e.open()},value:function(e){var t=this;t._value=e,t.ul[0].firstChild&&t.select(e)},_click:function(t){var n=this,r=e(t.currentTarget);t.isDefaultPrevented()||(n.select(r),n.options.change(r.text(),!0),n.close())},_height:function(e){if(e){var t=this,n=t.list,r=n.parent(".k-animation-container"),i=t.options.height;n.add(r).show().height(t.ul[0].scrollHeight>i?i:"auto").hide()}},_parse:function(e){var t=this,r=t.options,i=t._value||P;return e instanceof D?e:(e=n.parseDate(e,r.parseFormats,r.culture),e&&(e=new D(i.getFullYear(),i.getMonth(),i.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())),e)},_popup:function(){var e=this,t=e.list,r=e.options,i=r.anchor,s;e.popup=new o.Popup(t,M(r.popup,{anchor:i,open:r.open,close:r.close,animation:r.animation,isRtl:n.support.isRtl(r.anchor)})),s=i.outerWidth()-(t.outerWidth()-t.width()),t.css({fontFamily:i.css("font-family"),width:s}),n.touchScroller(e.popup.element)},move:function(e){var t=this,n=e.keyCode,r=t.ul[0],s=t._current,o=n===i.DOWN;if(n===i.UP||o){if(e.altKey){t.toggle(o);return}o?s=s?s[0].nextSibling:r.firstChild:s=s?s[0].previousSibling:r.lastChild,s&&t.select(s),t.options.change(t._current.text()),e.preventDefault()}else if(n===i.ENTER||n===i.TAB||n===i.ESC)e.preventDefault(),s&&t.options.change(s.text(),!0),t.close()}},H.getMilliseconds=F,n.TimeView=H;var q=u.extend({init:function(e,t){var r=this,i,s;u.fn.init.call(r,e,t),e=r.element,t=r.options,R(t),r._wrapper(),r.timeView=s=new H(M({},t,{id:e.attr(A),anchor:r.wrapper,format:t.format,change:function(t,n){n?r._change(t):e.val(t)},open:function(t){r.trigger(a)?t.preventDefault():(e.attr(C,!0),i.attr(k,!1))},close:function(t){r.trigger(f)?t.preventDefault():(e.attr(C,!1),i.attr(k,!0))},active:function(t){e.removeAttr(L),t&&e.attr(L,s._optionID)}})),i=s.ul,r._icon(),r._reset(),e[0].type="text",e.addClass("k-input").on("keydown"+c,_(r._keydown,r)).on("blur"+c,_(r._blur,r)).on("focus"+c,function(){r._inputWrapper.addClass(g)}).attr({role:"textbox","aria-haspopup":!0,"aria-expanded":!1,"aria-owns":s._timeViewID}),r.enable(!e.is("[disabled]")),r.value(t.value||e.val()),n.notify(r)},options:{name:"TimePicker",min:P,max:P,format:"",dates:[],parseFormats:[],value:null,interval:30,height:200,animation:{}},events:[a,f,l],setOptions:function(e){var t=this;u.fn.setOptions.call(t,e),R(t.options),M(t.timeView.options,t.options),t.timeView.ul[0].innerHTML=""},dataBind:function(e){O(e)&&this.timeView.dataBind(e)},enable:function(e){var t=this,n=t.element,r=t._arrow.off(c),i=t._inputWrapper.off(b);e===!1?(i.removeClass(p).addClass(T),n.attr(d,d)):(i.removeClass(T).addClass(p).on(b,t._toggleHover),n.removeAttr(d),r.on(h,_(t._click,t)).on(w,U))},destroy:function(){var e=this;u.fn.destroy.call(e),e.timeView.destroy(),e.element.off(c),e._arrow.off(c),e._inputWrapper.off(c),e._form&&e._form.off("reset",e._resetHandler)},close:function(){this.timeView.close()},open:function(){this.timeView.open()},min:function(e){return this._option("min",e)},max:function(e){return this._option("max",e)},value:function(e){var n=this;if(e===t)return n._value;n._old=n._update(e)},_blur:function(){var e=this;e.close(),e._change(e.element.val()),e._inputWrapper.removeClass(g)},_click:function(){var e=this,t=e.element;e.timeView.toggle(),!r&&t[0]!==document.activeElement&&t.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t.trigger(l),t.element.trigger(l))},_icon:function(){var t=this,n=t.element,r;r=n.next("span.k-select"),r[0]||(r=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-clock">select</span></span>').insertAfter(n)),t._arrow=r.attr({role:"button","aria-controls":t.timeView._timeViewID})},_keydown:function(e){var t=this,n=e.keyCode,r=t.timeView;r.popup.visible()||e.altKey?r.move(e):n===i.ENTER&&t._change(t.element.val())},_option:function(e,n){var r=this,i=r.options;if(n===t)return i[e];n=r.timeView._parse(n);if(!n)return;n=new D(n),i[e]=n,r.timeView.options[e]=n,r.timeView.bind()},_toggleHover:function(t){r||e(t.currentTarget).toggleClass(y,t.type==="mouseenter")},_update:function(e){var t=this,r=t.options,i=t.timeView,s=i._parse(e);return I(s,r.min,r.max)||(s=null),t._value=s,t.element.val(s?n.toString(s,r.format,r.culture):e),i.value(s),s},_wrapper:function(){var t=this,n=t.element,r;r=n.parents(".k-timepicker"),r[0]||(r=n.wrap(m).parent().addClass("k-picker-wrap k-state-default"),r=r.wrap(m).parent()),r[0].style.cssText=n[0].style.cssText,n.css({width:"100%",height:n[0].style.height}),t.wrapper=r.addClass("k-widget k-timepicker k-header").addClass(n[0].className),t._inputWrapper=e(r[0].firstChild)},_reset:function(){var e=this,t=e.element,n=t.closest("form");n[0]&&(e._resetHandler=function(){e.value(t[0].defaultValue)},e._form=n.on("reset",e._resetHandler))}});o.plugin(q)})(jQuery);