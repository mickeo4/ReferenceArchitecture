/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function U(e,t){return e=e.split(" ")[!t+0]||e,e.replace("top","up").replace("bottom","down")}function z(e,t,r){e=e.split(" ")[!t+0]||e;var i={origin:["bottom",r?"right":"left"],position:["top",r?"right":"left"]},s=/left|right/.test(e);return s?(i.origin=["top",e],i.position[1]=n.directions[e].reverse):(i.origin[0]=e,i.position[0]=n.directions[e].reverse),i.origin=i.origin.join(" "),i.position=i.position.join(" "),i}function W(t,n){try{return e.contains(t,n)}catch(r){return!1}}function X(t){t=e(t),t.addClass("k-item").children(v).addClass(x),t.children("a").addClass(y).children(v).addClass(x),t.filter(":not([disabled])").addClass(A),t.filter(".k-separator:empty").append("&nbsp;"),t.filter("li[disabled]").addClass(_).removeAttr("disabled").attr("aria-disabled",!0),t.children("a").filter(":focus").parent().addClass(P),t.filter("[role]").length||t.attr("role","menuitem"),t.children("."+y).length||t.contents().filter(function(){return!this.nodeName.match(p)&&(this.nodeType!=3||!!e.trim(this.nodeValue))}).wrapAll("<span class='"+y+"'/>"),V(t),$(t)}function V(t){t=e(t),t.find(".k-icon").remove(),t.filter(":has(.k-group)").children(".k-link:not(:has([class*=k-i-arrow]))").each(function(){var t=e(this),n=t.parent().parent();t.append("<span class='k-icon "+(n.hasClass(g+"-horizontal")?"k-i-arrow-s":"k-i-arrow-e")+"'/>")})}function $(t){t=e(t),t.filter(".k-first:not(:first-child)").removeClass(S),t.filter(".k-last:not(:last-child)").removeClass(b),t.filter(":first-child").addClass(S),t.filter(":last-child").addClass(b)}var n=window.kendo,r=n.ui,i=n.support.touch&&n.support.mobileOS||n.support.pointers,s=n.support.mousedown,o=n.support.click,u=e.extend,a=e.proxy,f=e.each,l=n.template,c=n.keys,h=r.Widget,p=/^(ul|a|div)$/i,d=".kendoMenu",v="img",m="open",g="k-menu",y="k-link",b="k-last",w="close",E="timer",S="k-first",x="k-image",T="select",N="zIndex",C="mouseenter",k="mouseleave",L="kendoPopup",A="k-state-default",O="k-state-hover",M="k-state-focused",_="k-state-disabled",D=".k-group",P="k-state-active",H=":not(.k-list) > .k-item",B=".k-item.k-state-disabled",j=".k-item:not(.k-state-disabled)",F=".k-item:not(.k-state-disabled) > .k-link",I="div:not(.k-animation-container,.k-list-container)",q={content:l("<div class='k-content k-group'>#= content(item) #</div>"),group:l("<ul class='#= groupCssClass(group) #'#= groupAttributes(group) # role='menu' aria-hidden='true'>#= renderItems(data) #</ul>"),itemWrapper:l("<#= tag(item) # class='#= textClass(item) #'#= textAttributes(item) #>#= image(item) ##= sprite(item) ##= text(item) ##= arrow(data) #</#= tag(item) #>"),item:l("<li class='#= wrapperCssClass(group, item) #' role='menuitem' #=item.items ? \"aria-haspopup='true'\": \"\"##=item.enabled === false ? \"aria-disabled='true'\" : ''#>#= itemWrapper(data) ## if (item.items) { ##= subGroup({ items: item.items, menu: menu, group: { expanded: item.expanded } }) ## } #</li>"),image:l("<img class='k-image' alt='' src='#= imageUrl #' />"),arrow:l("<span class='#= arrowClass(item, group) #'></span>"),sprite:l("<span class='k-sprite #= spriteCssClass #'></span>"),empty:l("")},R={wrapperCssClass:function(e,t){var n="k-item",r=t.index;return t.enabled===!1?n+=" k-state-disabled":n+=" k-state-default",e.firstLevel&&r===0&&(n+=" k-first"),r==e.length-1&&(n+=" k-last"),n},textClass:function(e){return y},textAttributes:function(e){return e.url?" href='"+e.url+"'":""},arrowClass:function(e,t){var n="k-icon";return t.horizontal?n+=" k-i-arrow-s":n+=" k-i-arrow-e",n},text:function(e){return e.encoded===!1?e.text:n.htmlEncode(e.text)},tag:function(e){return e.url?"a":"span"},groupAttributes:function(e){return e.expanded!==!0?" style='display:none'":""},groupCssClass:function(e){return"k-group"},content:function(e){return e.content?e.content:"&nbsp;"}},J=h.extend({init:function(t,r){var i=this;h.fn.init.call(i,t,r),t=i.wrapper=i.element,r=i.options,r.dataSource&&(i.element.empty(),i.append(r.dataSource,t)),i._updateClasses(),r.animation===!1&&(r.animation={open:{show:!0,effects:{}},close:{hide:!0,effects:{}}}),i.nextItemZIndex=100,i._tabindex(),t.on("touchstart",function(t){i.element[0].blur(),i.element[0].focus(),setTimeout(function(){i._moveHover([],e(n.eventTarget(t)).closest(H))},200)}).on("MSPointerDown",function(t){i._oldHoverItem=e(t.target).closest(H)}).on(o+d,B,!1).on(o+d,j,a(i._click,i)).on("keydown"+d,a(i._keydown,i)).on("focus"+d,a(i._focus,i)).on("blur"+d,a(i._removeHoverItem,i)).on(C+d,j,a(i._mouseenter,i)).on(k+d,j,a(i._mouseleave,i)).on(C+d+" "+k+d+" "+s+d+" "+o+d,F,a(i._toggleHover,i)),r.openOnClick&&(i.clicked=!1,i._documentClickHandler=a(i._documentClick,i),e(document).click(i._documentClickHandler)),t.attr("role","menubar"),t[0].id&&(i._ariaId=n.format("{0}_mn_active",t[0].id)),n.notify(i)},events:[m,w,T],options:{name:"Menu",animation:{open:{duration:200,show:!0},close:{duration:100}},orientation:"horizontal",direction:"default",openOnClick:!1,closeOnClick:!0,hoverDelay:100},destroy:function(){var t=this;h.fn.destroy.call(t),t.element.off(d),t._documentClickHandler&&e(document).unbind(t._documentClickHandler)},enable:function(e,t){return this._toggleDisabled(e,t!==!1),this},disable:function(e){return this._toggleDisabled(e,!1),this},append:function(t,n){n=this.element.find(n);var r=this._insert(t,n,n.length?n.find("> .k-group, .k-animation-container > .k-group"):null);return f(r.items,function(t){r.group.append(this);var n=r.contents[t];n&&e(this).append(n),V(this)}),V(n),$(r.group.find(".k-first, .k-last").add(r.items)),this},insertBefore:function(t,n){n=this.element.find(n);var r=this._insert(t,n,n.parent());return f(r.items,function(t){n.before(this);var i=r.contents[t];i&&e(this).append(i),V(this),$(this)}),$(n),this},insertAfter:function(t,n){n=this.element.find(n);var r=this._insert(t,n,n.parent());return f(r.items,function(t){n.after(this);var i=r.contents[t];i&&e(this).append(i),V(this),$(this)}),$(n),this},_insert:function(t,n,r){var i=this,s,o,a=[];if(!n||!n.length)r=i.element;var f=e.isPlainObject(t),l={firstLevel:r.hasClass(g),horizontal:r.hasClass(g+"-horizontal"),expanded:!0,length:r.children().length};return n&&!r.length&&(r=e(J.renderGroup({group:l})).appendTo(n)),f||e.isArray(t)?(s=e.map(f?[t]:t,function(t,n){return typeof t=="string"?e(t):e(J.renderItem({group:l,item:u(t,{index:n})}))}),a=e.map(f?[t]:t,function(t,n){return t.content||t.contentUrl?e(J.renderContent({item:u(t,{index:n})})):!1})):(s=e(t),o=s.find("> ul").addClass("k-group").attr("role","menu"),s=s.filter("li"),s.add(o.find("> li")).each(function(){X(this)})),{items:s,group:r,contents:a}},remove:function(e){e=this.element.find(e);var t=this,n=e.parentsUntil(t.element,H),r=e.parent("ul");e.remove();if(r&&!r.children(H).length){var i=r.parent(".k-animation-container");i.length?i.remove():r.remove()}return n.length&&(n=n.eq(0),V(n),$(n)),t},open:function(r){var i=this,s=i.options,o=s.orientation=="horizontal",a=s.direction,f=n.support.isRtl(i.wrapper);return r=i.element.find(r),/^(top|bottom|default)$/.test(a)&&(f?a=o?(a+" left").replace("default","bottom"):"left":a=o?(a+" right").replace("default","bottom"):"right"),r.siblings().find(">.k-popup:visible,>.k-animation-container>.k-popup:visible").each(function(){var t=e(this).data("kendoPopup");t&&t.close()}),r.each(function(){var n=e(this);clearTimeout(n.data(E)),n.data(E,setTimeout(function(){var e=n.find(".k-group:first:hidden"),r;if(e[0]&&i.trigger(m,{item:n[0]})===!1){n.data(N,n.css(N)),n.css(N,i.nextItemZIndex++),r=e.data(L);var l=n.parent().hasClass(g),c=l&&o,h=z(a,l,f),p=s.animation.open.effects,d=p!==t?p:"slideIn:"+U(a,l);r?(r=e.data(L),r.options.origin=h.origin,r.options.position=h.position,r.options.animation.open.effects=d):r=e.kendoPopup({origin:h.origin,position:h.position,collision:s.popupCollision!==t?s.popupCollision:c?"fit":"fit flip",anchor:n,appendTo:n,animation:{open:u(!0,{effects:d},s.animation.open),close:s.animation.close},close:function(e){var t=e.sender.wrapper.parent();i.trigger(w,{item:t[0]})?e.preventDefault():(t.css(N,t.data(N)),t.removeData(N))}}).data(L),e.removeAttr("aria-hidden"),r.open()}},i.options.hoverDelay))}),i},close:function(t){var n=this,r=n.element;return t=r.find(t),t.length||(t=r.find(">.k-item")),t.each(function(){var t=e(this);clearTimeout(t.data(E)),t.data(E,setTimeout(function(){var e=t.find(".k-group:first:visible").data(L);e&&(e.close(),e.element.attr("aria-hidden",!0))},n.options.hoverDelay))}),n},_toggleDisabled:function(t,n){this.element.find(t).each(function(){e(this).toggleClass(A,n).toggleClass(_,!n).attr("aria-disabled",!n)})},_toggleHover:function(t){var r=e(n.eventTarget(t)||t.target).closest(H),i=t.type==C||s.indexOf(t.type)!==-1;r.parents("li."+_).length||r.toggleClass(O,i),this._removeHoverItem()},_removeHoverItem:function(){var e=this._oldHoverItem;e&&e.hasClass(M)&&(e.removeClass(M),this._oldHoverItem=null)},_updateClasses:function(){var e=this.element,t;e.addClass("k-widget k-reset k-header "+g).addClass(g+"-"+this.options.orientation),e.find("li > ul").addClass("k-group").attr("role","menu").attr("aria-hidden",e.is(":visible")),t=e.find("> li,.k-group > li"),t.each(function(){X(this)})},_mouseenter:function(t){var n=this,r=e(t.currentTarget),s=r.children(".k-animation-container").length||r.children(D).length;if(t.delegateTarget!=r.parents(".k-menu")[0])return;(!n.options.openOnClick||n.clicked)&&!W(t.currentTarget,t.relatedTarget)&&s&&n.open(r),(n.options.openOnClick&&n.clicked||i)&&r.siblings().each(a(function(e,t){n.close(t)},n))},_mouseleave:function(t){var n=this,r=e(t.currentTarget),s=r.children(".k-animation-container").length||r.children(D).length;if(r.parentsUntil(".k-animation-container",".k-list-container,.k-calendar-container")[0]){t.stopImmediatePropagation();return}!n.options.openOnClick&&!i&&!W(t.currentTarget,t.relatedTarget)&&s&&n.close(r)},_click:function(t){var r=this,i,s=r.options,o=e(n.eventTarget(t)),u=o[0]?o[0].nodeName.toUpperCase():"",a=u=="INPUT"||u=="SELECT"||u=="BUTTON",f=o.closest("."+y),l=o.closest(H),c=f.attr("href"),h,p,d=!!c&&c.charAt(c.length-1)!="#";if(l.children(I)[0])return;if(l.hasClass(_)){t.preventDefault();return}!t.handled&&r.trigger(T,{item:l[0]})&&!a&&t.preventDefault(),t.handled=!0,h=l.children(D+",.k-animation-container"),p=h.is(":visible");if(s.closeOnClick&&!d&&(!h.length||s.openOnClick&&p)){l.removeClass(O).css("height"),r._oldHoverItem=r._findRootParent(l),r.close(f.parentsUntil(r.element,H)),r.clicked=!1,"touchend MSPointerUp".indexOf(t.type)!=-1&&t.preventDefault();return}if((!l.parent().hasClass(g)||!s.openOnClick)&&!n.support.touch)return;!d&&!a&&t.preventDefault(),r.clicked=!0,i=h.is(":visible")?w:m,r[i](l)},_documentClick:function(e){if(W(this.element[0],e.target))return;this.clicked=!1},_focus:function(e){var t=this,n=e.target,r=t._hoverItem();n==t.wrapper[0]&&r.length?t._moveHover([],r):n==t.wrapper[0]&&!t._oldHoverItem&&t._moveHover([],t.wrapper.children().first())},_keydown:function(e){var t=this,r=e.keyCode,i=t._oldHoverItem,s,o,u,a=n.support.isRtl(t.wrapper);if(e.target!=e.currentTarget&&r!=c.ESC)return;i||(i=t._oldHoverItem=t._hoverItem()),o=t._itemBelongsToVertival(i),u=t._itemHasChildren(i);if(r==c.RIGHT)s=t[a?"_itemLeft":"_itemRight"](i,o,u);else if(r==c.LEFT)s=t[a?"_itemRight":"_itemLeft"](i,o,u);else if(r==c.DOWN)s=t._itemDown(i,o,u);else if(r==c.UP)s=t._itemUp(i,o,u);else if(r==c.ESC)s=t._itemEsc(i,o);else if(r==c.ENTER||r==c.SPACEBAR)s=i.children(".k-link"),s.length>0&&(t._click({target:s[0],preventDefault:function(){}}),t._moveHover(i,t._findRootParent(i)));else if(r==c.TAB){s=t._findRootParent(i),t.close(s),t._moveHover(i,s);return}s&&s[0]&&(e.preventDefault(),e.stopPropagation())},_hoverItem:function(){return this.wrapper.find("li.k-item.k-state-hover").filter(":visible")},_itemBelongsToVertival:function(e){var t=this.wrapper.hasClass("k-menu-vertical");return e.length?e.parent().hasClass("k-group")||t:t},_itemHasChildren:function(e){return e.length?e.children("ul.k-group, div.k-animation-container").length>0:!1},_moveHover:function(e,t){var n=this,r=n._ariaId;e.length&&t.length&&(e.removeClass(M),e[0].id===r&&e.removeAttr("id")),t.length&&(t[0].id&&(r=t[0].id),t.addClass(M),n._oldHoverItem=t,r&&(n.element.removeAttr("aria-activedescendant"),t.attr("id",r),n.element.attr("aria-activedescendant",r)))},_findRootParent:function(e){return e.parent().hasClass("k-menu")?e:e.parentsUntil(".k-menu","li.k-item").last()},_isRootItem:function(e){return e.parent().hasClass("k-menu")},_itemRight:function(e,t,n){var r=this,i,s;return t?n?(r.open(e),i=e.find(".k-group").children().first()):r.options.orientation=="horizontal"&&(s=r._findRootParent(e),r.close(s),i=s.next(),i.is(".k-separator")&&(i=i.next())):(i=e.next(),i.is(".k-separator")&&(i=i.next()),i.length||(i=e.parent().children().first())),i&&!i.length?i=r.wrapper.children(".k-item").first():i||(i=[]),r._moveHover(e,i),i},_itemLeft:function(e,t,n){var r=this,i;return t?(i=e.parent().closest(".k-item"),r.close(i),r._isRootItem(i)&&r.options.orientation=="horizontal"&&(i=i.prev(),i.is(".k-separator")&&(i=i.prev()))):(i=e.prev(),i.is(".k-separator")&&(i=i.prev()),i.length||(i=e.parent().children().last())),i.length||(i=r.wrapper.children(".k-item").last()),r._moveHover(e,i),i},_itemDown:function(e,t,n){var r=this,i;if(!t){if(!n||e.hasClass(_))return;r.open(e),i=e.find(".k-group").children().first()}else i=e.next(),i.is(".k-separator")&&(i=i.next());return!i.length&&e.length?i=e.parent().children().first():e.length||(i=r.wrapper.children(".k-item").first()),r._moveHover(e,i),i},_itemUp:function(e,t,n){var r=this,i;if(!t)return;return i=e.prev(),i.is(".k-separator")&&(i=i.prev()),!i.length&&e.length?i=e.parent().children().last():e.length||(i=r.wrapper.children(".k-item").last()),r._moveHover(e,i),i},_itemEsc:function(e,t){var n=this,r;return t?(r=e.parent().closest(".k-item"),n.close(r),n._moveHover(e,r),r):e}});u(J,{renderItem:function(e){e=u({menu:{},group:{}},e);var t=q.empty,n=e.item;return q.item(u(e,{image:n.imageUrl?q.image:t,sprite:n.spriteCssClass?q.sprite:t,itemWrapper:q.itemWrapper,arrow:n.items||n.content?q.arrow:t,subGroup:J.renderGroup},R))},renderGroup:function(e){return q.group(u({renderItems:function(e){var t="",n=0,r=e.items,i=r?r.length:0,s=u({length:i},e.group);for(;n<i;n++)t+=J.renderItem(u(e,{group:s,item:u({index:n},r[n])}));return t}},e,R))},renderContent:function(e){return q.content(u(e,R))}}),n.ui.plugin(J)})(jQuery);