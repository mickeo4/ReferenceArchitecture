/*
* Kendo UI Beta v2012.3.1024 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Beta license terms available at
* http://www.kendoui.com/purchase/license-agreement/kendo-ui-beta.aspx
*/

;(function(e,t){function g(e,t,n){var r=0,i=t.length-1,s;for(;r<i;++r)s=t[r],s in e||(e[s]={}),e=e[s];e[t[i]]=n}var n=window.kendo,r=n.ui,i=r.Select,s=n.support.mobileOS,o=".kendoDropDownList",u="disabled",a="change",f="select",l="k-state-focused",c="k-state-default",h="k-state-disabled",p="k-state-selected",d="mouseenter"+o+" mouseleave"+o,v=e.proxy,m=i.extend({init:function(r,s){var u=this,a=s&&s.index,l,c,h;u.ns=o,s=e.isArray(s)?{dataSource:s}:s,i.fn.init.call(u,r,s),u._focusHandler=function(){u.wrapper.focus()},s=u.options,r=u.element.on("focus"+o,u._focusHandler),u._reset(),u._word="",u._wrapper(),u._tabindex(),u._aria(),u._span(),u._popup(),u._mobile(),u._accessors(),u._dataSource(),u._enable(),u._cascade(),u.selectedIndex=-1,a!==t&&(s.index=a),s.autoBind?u.dataSource.fetch():(h=s.text,h||(l=u._optionLabelText(s.optionLabel),c=l&&s.index===0,r.is(f)?c?h=l:h=r.children(":selected").text():!r[0].value&&c&&(h=l)),u.text(h)),n.notify(u)},options:{name:"DropDownList",enable:!0,index:0,autoBind:!0,text:"",template:"",delay:500,height:200,dataTextField:"",dataValueField:"",optionLabel:"",cascadeFrom:"",ignoreCase:!0,animation:{}},events:["open","close",a,"select","dataBinding","dataBound"],setOptions:function(e){i.fn.setOptions.call(this,e),this._template(),this._accessors(),this._aria()},destroy:function(){var e=this;e.wrapper.off(o),e.element.off(o),e._inputWrapper.off(o),i.fn.destroy.call(e)},enable:function(e){var t=this,n=t.element,r=t.wrapper.off(o),i=t._inputWrapper.off(d);e===!1?(n.attr(u,u),i.removeClass(c).addClass(h)):(n.removeAttr(u,u),i.addClass(c).removeClass(h).on(d,t._toggleHover),r.on("click"+o,function(e){t._blured=!1,e.preventDefault(),t.toggle()}).on("keydown"+o,v(t._keydown,t)).on("keypress"+o,v(t._keypress,t)).on("focusin"+o,function(){i.addClass(l),t._blured=!1}).on("focusout"+o,function(){t._blured||(t._blur(),i.removeClass(l),t._blured=!0,n.blur())}))},open:function(){var e=this;e.ul[0].firstChild?(e.popup.open(),e._scroll(e._current)):(e._open=!0,e._request||e.dataSource.fetch())},toggle:function(e){this._toggle(e)},refresh:function(){var e=this,t=e._data(),r=t.length,i=e.options.optionLabel;e.trigger("dataBinding"),e._current&&e.current(null),e.ul[0].innerHTML=n.render(e.template,t),e._height(r),e.popup.visible()&&e.popup._position(),e.element.is(f)&&(i&&r&&(i=e._optionLabelText(i),i='<option value="">'+i+"</option>"),e._options(t,i)),e._open&&(e._open=!1,e.toggle(!!r)),e._hideBusy(),e._makeUnselectable(),e._valueCalled||(e._selectItem(),e._valueCalled=!1),e.trigger("dataBound")},search:function(e){if(e){var n=this,r=n.options.ignoreCase;r&&(e=e.toLowerCase()),n._select(function(i){var s=n._text(i);if(s!==t)return s+="",r&&(s=s.toLowerCase()),s.indexOf(e)===0})}},select:function(e){var n=this;if(e===t)return n.selectedIndex;n._select(e),n._old=n._accessor(),n._oldIndex=n.selectedIndex},text:function(e){var n=this.span;if(e===t)return n.text();n.text(e)},value:function(e){var n=this,r;if(e===t)return n._accessor();e!==null&&(e=e.toString()),n._valueCalled=!0;if(e&&n._valueOnFetch(e))return;r=n._index(e),n.select(r>-1?r:0)},_accept:function(e){this._focus(e)},_optionLabelText:function(){var e=this.options,t=e.dataTextField,n=e.optionLabel;return n&&t&&typeof n=="object"?this._text(n):n},_data:function(){var e=this,t=e.options,r=t.optionLabel,i=t.dataTextField,s=t.dataValueField,o=e.dataSource.view(),u=o.length,a=r,f=0;if(r&&u){typeof r=="object"?a=r:i&&(a={},i=i.split("."),s=s.split("."),g(a,s,""),g(a,i,r)),a=new n.data.ObservableArray([a]);for(;f<u;f++)a.push(o[f]);o=a}return o},_keydown:function(e){var t=this,r=e.keyCode,i=n.keys,s=t.ul[0];r===i.LEFT?r=i.UP:r===i.RIGHT&&(r=i.DOWN),e.keyCode=r,t._move(e),r===i.HOME?(e.preventDefault(),t._select(s.firstChild)):r===i.END&&(e.preventDefault(),t._select(s.lastChild))},_keypress:function(e){var t=this;setTimeout(function(){t._word+=String.fromCharCode(e.keyCode||e.charCode),t._search()})},_popup:function(){i.fn._popup.call(this),this.popup.one("open",function(){this.wrapper=n.wrap(this.element).addClass("km-popup")})},_search:function(){var e=this;clearTimeout(e._typing),e._typing=setTimeout(function(){e._word=""},e.options.delay),e.search(e._word)},_select:function(e){var n=this,i=n._current,s=n._data(),o,u,a;e=n._get(e),e&&e[0]&&!e.hasClass(p)&&(i&&i.removeClass(p),a=r.List.inArray(e[0],n.ul[0]),a>-1&&(s=s[a],u=n._text(s),o=n._value(s),n.selectedIndex=a,n.text(u),n._accessor(o!==t?o:u,a),n.current(e.addClass(p)),n._optionID&&n._current.attr("aria-selected",!0)))},_mobile:function(){var e=this,t=e.popup,n=t.element.parents(".km-root").eq(0);n.length&&s&&(t.options.animation.open.effects=s.android||s.meego?"fadeIn":s.ios?"slideIn:up":t.options.animation.open.effects)},_span:function(){var t=this,n=t.wrapper,r=".k-input",i;i=n.find(r),i[0]||(n.append('<span unselectable="on" class="k-dropdown-wrap k-state-default"><span unselectable="on" class="k-input">&nbsp;</span><span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-arrow-s">select</span></span></span>').append(t.element),i=n.find(r)),t.span=i,t._inputWrapper=e(n[0].firstChild),t._arrow=n.find(".k-icon").mousedown(function(e){e.preventDefault()})},_wrapper:function(){var e=this,t=e.element,n=t[0],r;r=t.parent(),r.is("span.k-widget")||(r=t.wrap("<span />").parent(),r[0].style.cssText=n.style.cssText),t.hide(),e._focused=e.wrapper=r.addClass("k-widget k-dropdown k-header").addClass(n.className).css("display","").attr({unselectable:"on",role:"listbox","aria-haspopup":!0,"aria-expanded":!1})}});r.plugin(m)})(jQuery);